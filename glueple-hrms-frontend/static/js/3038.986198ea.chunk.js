"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[3038],{3038:(e,a,l)=>{l.r(a),l.d(a,{default:()=>A});var t=l(65043),i=(l(34317),l(48334)),s=l(22166),d=l(94174),n=l(42145),o=l(92250),c=l(35685),r=l(34348),m=l.n(r),v=l(49985),u=l(80728),p=l(26181),b=l(33474),x=l(4418),h=l(70579);const f=e=>{var a;const{isOpenEmailType:l,toggleOffcanvas:i,getAllEmailTemplalte:c,setSelectedTemplateData:r,selectedTemplateData:m,onHandleViewModals:v}=e,[f,g]=(0,t.useState)({}),_=(0,s.wA)(),{getEmailTypePending:N,getEmailTypeRes:j,getEmailTypeError:E,addEmailTemplatePending:A,addEmailTemplateRes:y,addEmailTemplateError:T}=(0,s.d4)((e=>e.emailtemplate)),[S,k]=(0,t.useState)(!1),[C,w]=(0,t.useState)([]),[D,L]=(0,t.useState)(""),[R,M]=(0,t.useState)(""),[P,H]=(0,t.useState)(""),[O,J]=(0,t.useState)(""),[F,I]=(0,t.useState)([]),[V,q]=(0,t.useState)([]),[Y,B]=(0,t.useState)({template_name:"",email_title:"",email_type:"",body:"",is_active:"",remark:""});(0,t.useEffect)((()=>{B({template_name:(null===m||void 0===m?void 0:m.template_name)||"",email_title:(null===m||void 0===m?void 0:m.email_title)||"",email_type:m.email_type||"",body:null===m||void 0===m?void 0:m.body,remark:null===m||void 0===m?void 0:m.remark}),k(null===m||void 0===m?void 0:m.is_active),M(null===m||void 0===m?void 0:m.id),X(null===m||void 0===m?void 0:m.body)}),[m]),(0,t.useEffect)((()=>{B({template_name:(null===v||void 0===v?void 0:v.template_name)||"",email_title:(null===v||void 0===v?void 0:v.email_title)||"",email_type:null===v||void 0===v?void 0:v.email_type,body:null===v||void 0===v?void 0:v.body,remark:null===v||void 0===v?void 0:v.remark}),k(null===v||void 0===v?void 0:v.is_active),X(null===v||void 0===v?void 0:v.body)}),[v]),(0,t.useEffect)((()=>{U()}),[]);const U=()=>{_(d.JN.getEmailTypeRequest())};(0,t.useEffect)((()=>{if(!N){if(E)return void w([]);var e,a,l,t;if(j)if(200==(null===j||void 0===j||null===(e=j.data)||void 0===e?void 0:e.code))w(null===j||void 0===j||null===(a=j.data)||void 0===a||null===(l=a.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data)}}),[N,j,E]);const X=e=>{J(e)};(0,t.useEffect)((()=>{if(!A){if(T)return void n.oR.error(null===T||void 0===T?void 0:T.errorMessage);var e,a;if(y)if(200===(null===y||void 0===y||null===(e=y.data)||void 0===e?void 0:e.code))n.oR.success(null===y||void 0===y||null===(a=y.data)||void 0===a?void 0:a.msg),i(),c(),_(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_ADD_EMAIL_TEMPLATE_STORE"))}}),[y,T,A]);const $=e=>{var a;(f&&g({}),"email_type"==e.target.name)&&(console.log("sdfdsfdsf",e.target.value),I(null===z||void 0===z||null===(a=z.filter((a=>a.task==e.target.value))[0])||void 0===a?void 0:a.subtasks));const{name:l,value:t}=e.target;B({...Y,[l]:t})};(0,t.useEffect)((()=>{0==l&&G()}),[l]);const G=()=>{B({template_name:"",email_title:"",email_type:"",body:"",is_active:""}),r(""),g({}),L("")},z=[{id:1,task:"MRF",subtasks:[{value:"{employee_name}",label:"Employee Name"},{value:"{applying_for}",label:"Applying for"},{value:"{approval_by}",label:"Approval by"},{value:"{mrf_id}",label:"Mrf id"},{value:"{name}",label:"Name"},{value:"{current_date_time}",label:"Current date time"},{value:"{designation}",label:"Designation"}]},{id:2,task:"C-off",subtasks:[{value:"{Name}",label:"Name"},{value:"{emp_name}",label:"Emp Name"},{value:"{date}",label:"Date"},{value:"{no_of_days}",label:"No of days"},{value:"{reason}",label:"Reason"}]},{id:3,task:"attendance_correction",subtasks:[{value:"{manager_full_name}",label:"manager_full_name"},{value:"{emp_name}",label:"emp_name"},{value:"{date}",label:"date"},{value:"{first_check_in}",label:"first_check_in"},{value:"{first_check_out}",label:"first_check_out"},{value:"{corrected_check_in_time}",label:"corrected_check_in_time"},{value:"{corrected_check_out_time}",label:"corrected_check_out_time"}]}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden",width:"1025px"},children:[(0,h.jsxs)("div",{className:"offcanvas-header",children:[(0,h.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[v?"View":m?"Update":"Create New"," Email Template"]}),(0,h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>i("view")})]}),(0,h.jsx)("div",{className:"offcanvas-body",children:(0,h.jsxs)("div",{className:"formPanel",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsxs)("label",{htmlFor:!0,children:["Template Name",(0,h.jsx)("span",{className:"text-danger",children:""==v&&"*"})]})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[""!=v?(0,h.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.template_name}):(0,h.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Enter Template Name",name:"template_name",value:(null===Y||void 0===Y?void 0:Y.template_name)||"",onChange:e=>$(e),disabled:""!=v}),(null===f||void 0===f?void 0:f.template_name)&&(0,h.jsx)(b.A,{text:f.template_name})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsxs)("label",{htmlFor:!0,children:["Subject",(0,h.jsx)("span",{className:"text-danger",children:""==v&&"*"})]})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[""!=v?(0,h.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.email_title}):(0,h.jsx)("input",{type:"text",className:"form-control fs-7",name:"email_title",placeholder:"Enter Title",value:null===Y||void 0===Y?void 0:Y.email_title,onChange:e=>$(e),disabled:""!=v}),(null===f||void 0===f?void 0:f.email_title)&&(0,h.jsx)(b.A,{text:f.email_title})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsxs)("label",{htmlFor:!0,children:["Email For",(0,h.jsx)("span",{className:"text-danger",children:""==v&&"*"})]})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[""!=v?(0,h.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.email_type}):(0,h.jsxs)("select",{className:"form-select",required:!0,name:"email_type",value:null===Y||void 0===Y?void 0:Y.email_type,onChange:e=>$(e),disabled:""!=v,children:[(0,h.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Required Email Type"}),C&&(null===C||void 0===C?void 0:C.map((e=>(0,h.jsx)("option",{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name}))))]}),(null===f||void 0===f?void 0:f.email_type)&&(0,h.jsx)(b.A,{text:f.email_type})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)("label",{htmlFor:!0,children:"Body"})})}),(0,h.jsxs)("div",{className:"col-md-9",children:[(0,h.jsx)("div",{className:"form-group mb-3",children:""!=v?(0,h.jsx)("div",{className:"cardBox mb-3 mt-3 pt-3 myRequest",children:(0,h.jsx)("div",{children:(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:null===Y||void 0===Y||null===(a=Y.body)||void 0===a?void 0:a.replaceAll("&lt;","<")}})})}):(0,h.jsx)(x.A,{editorData:D,setEditorData:L,dropdownValue:P,setDropdownValue:H,bodydata:O})}),(null===f||void 0===f?void 0:f.body)&&(0,h.jsx)(b.A,{text:f.body})]})]}),""==v&&(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)("label",{htmlFor:!0,children:"Template fields"})})}),(0,h.jsxs)("div",{className:"col-md-9",children:[null===F||void 0===F?void 0:F.map((e=>(0,h.jsx)("span",{style:{cursor:"pointer"},className:"badge blueBadge2 me-2",onClick:()=>(e=>{H(null===e||void 0===e?void 0:e.value),V.push(e)})(e),children:e.label}))),(null===f||void 0===f?void 0:f.is_active)&&(0,h.jsx)(b.A,{text:f.is_active})]})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsxs)("label",{htmlFor:!0,children:["Re-Mark",(0,h.jsx)("span",{className:"text-danger"})]})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsx)("div",{className:"form-group mb-3",children:""!=v?(0,h.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.remark}):(0,h.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Enter ReMark Name",name:"remark",value:(null===Y||void 0===Y?void 0:Y.remark)||"",onChange:e=>$(e),disabled:""!=v})})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)("label",{htmlFor:!0,children:"Is Active"})})}),(0,h.jsxs)("div",{className:"col-md-9",children:[(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)("input",{type:"checkbox",placeholder:"Is Active",checked:S,onChange:e=>k(!S),disabled:""!=v})}),(null===f||void 0===f?void 0:f.is_active)&&(0,h.jsx)(b.A,{text:f.is_active})]})]}),(0,h.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:""==v&&(0,h.jsx)(o.Sv,{type:"button",classNames:"btn btn-primary gradientBg",handleClick:e=>(async()=>{Y.body=D,Y.is_active=S,Y.field=V;const e=await(0,p.i6)(u.Ch,Y);e.isValid?(g({}),m?(Y._id=R,_(d.JN.updateEmailTemplateRequest(Y)),c(),i()):(_(d.JN.addEmailTemplateRequest(Y)),c())):(g(e.errors),console.log(e.errors,"formattedErrors"))})(),text:(m?"Update":"Create")+" Template"})})]})})]})})};var g=l(82149);const _=e=>{const{TemplateList:a,isLoading:l,toggleOffcanvas:i,currentPage:d,setCurrentPage:n,setSelectedTemplateData:c,onHandleDeleteModal:r,onHandleViewModal:u}=e,[p,b]=(0,t.useState)(a),[x,f]=((0,s.wA)(),(0,t.useState)(!1)),[_,N]=(0,t.useState)([]);(0,t.useEffect)((()=>{b(a)}),[a]);const j=(0,t.useMemo)((()=>({sn:(e,a)=>(0,h.jsx)("span",{children:a+1}),is_active:e=>(0,h.jsx)("span",{className:`badge ${(0,v.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>m()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,h.jsxs)("div",{className:"actionGroup d-flex gap-2",children:[(0,h.jsx)(o.Sv,{text:"View",handleClick:()=>u(e),classNames:"btn btn-success"}),(0,h.jsx)(o.Sv,{text:"Update",classNames:"btn btn-primary",handleClick:()=>{c(e),i()}}),(0,h.jsx)(o.Sv,{text:"Delete",handleClick:()=>r(null===e||void 0===e?void 0:e.id),classNames:"btn btn-danger"})]})})),[c,i,r,u]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(g.A,{data:null===p||void 0===p?void 0:p.data,fields:[{key:"sn",label:"S.N"},{key:"template_name",label:"Template Name"},{key:"email_title",label:"Subject"},{key:"email_type",label:"Email For"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},{key:"action",label:"Action"}],isLoading:l,pagination:!0,currentPage:d,setCurrentPage:n,totalPages:null===p||void 0===p?void 0:p.totalPages,tableName:"Email Template",scopedSlots:j})})},N=e=>{const{ActionList:a,isLoading:l,toggleOpenAction:i,currentPage:d,setCurrentPage:n,setSelectedActionData:c,onHandleDeleteAction:r,onHandleViewModal:u}=e,[p,b]=(0,t.useState)(a),[x,f]=((0,s.wA)(),(0,t.useState)(!1)),[_,N]=(0,t.useState)([]);(0,t.useEffect)((()=>{b(a)}),[a]);const j=(0,t.useMemo)((()=>({sn:(e,a)=>(0,h.jsx)("span",{children:a+1}),is_active:e=>(0,h.jsx)("span",{className:`badge ${(0,v.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>m()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,h.jsxs)("div",{className:"actionGroup d-flex gap-2",children:[(0,h.jsx)(o.Sv,{text:"Update",classNames:"btn btn-primary",handleClick:()=>{c(e),i()}}),(0,h.jsx)(o.Sv,{text:"Delete",handleClick:()=>r(null===e||void 0===e?void 0:e.id),classNames:"btn btn-danger"})]})})),[c,i,r,u]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(g.A,{data:p,fields:[{key:"sn",label:"S.N"},{key:"action_name",label:"Action Name"},{key:"action_type",label:"Action Type"},{key:"action_type",label:"Action Type"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},{key:"action",label:"Action"}],isLoading:l,pagination:!0,currentPage:d,setCurrentPage:n,totalPages:null===p||void 0===p?void 0:p.totalPages,tableName:"Action",scopedSlots:j})})};l(30454);var j=l(52027),E=(l(39041),l(67565));const A=()=>{const e=(0,s.wA)(),[a,l]=(0,t.useState)(!1),{getActionTemplatePending:n,getActionTemplateRes:o,getActionTemplateError:r,getEmailTemplatePending:m,getEmailTemplateRes:v,getEmailTemplateError:u,deleteEmailTemplatePending:p,deleteEmailTemplateRes:b,deleteEmailTemplateError:x,DeleteActionTemplatePending:g,DeleteActionTemplateRes:A,DeleteActionTemplateError:y}=(0,s.d4)((e=>e.emailtemplate)),[T,S]=(0,t.useState)([]),[k,C]=(0,t.useState)(1),[w,D]=(0,t.useState)(""),[L,R]=(0,t.useState)(""),[M,P]=(0,t.useState)(),[H,O]=(0,t.useState)(!1),[J,F]=(0,t.useState)(""),[I,V]=(0,t.useState)(!1),[q,Y]=(0,t.useState)([]),[B,U]=(0,t.useState)(),[X,$]=(0,t.useState)(!1),G=e=>{F(e),Q()};(0,t.useEffect)((()=>{z(),K()}),[k]);const z=()=>{const a={page:k,limit:j.X$.limit};e(d.JN.getEmailTemplateRequest(a))},K=()=>{const a={page:k,limit:j.X$.limit};e(d.JN.getActionTemplateRequest(a))};(0,t.useEffect)((()=>{if(!n){if(r)return void Y([]);var e,a,l,t;if(o)if(200==(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.code))Y(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(l=a.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data)}}),[r,o,n]),(0,t.useEffect)((()=>{if(!m){if(u)return void S([]);var e,a,l;if(v)if(200==(null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.code))S(null===v||void 0===v||null===(a=v.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.data)}}),[m,v,u]),(0,t.useEffect)((()=>{if(!p){if(x)return void e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_EMAIL_TEMPLATE_STORE"));var a;if(b)200==(null===b||void 0===b||null===(a=b.data)||void 0===a?void 0:a.code)&&(e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_EMAIL_TEMPLATE_STORE")),z())}}),[b,x,p]),(0,t.useEffect)((()=>{if(!g){if(y)return void e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_ACTION_TEMPLATE_STORE"));var a;if(A)200==(null===A||void 0===A||null===(a=A.data)||void 0===a?void 0:a.code)&&(e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_ACTION_TEMPLATE_STORE")),K())}}),[b,y,g]);const Q=e=>{l(!a),"view"==e&&F("")},W=e=>{V(!I)},Z=(0,t.useMemo)((()=>T),[T]),ee=(0,t.useMemo)((()=>q),[q]);return(0,h.jsxs)("div",{className:"cardBox mb-3 mt-3 pt-5 myRequest",children:[(0,h.jsxs)("ul",{className:"nav nav-tabs leaveTabs mb-4",children:[(0,h.jsx)("li",{className:"nav-item",children:(0,h.jsx)("button",{className:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#createEmailTemplate",type:"button",children:"Create Email Template"})}),(0,h.jsx)("li",{className:"nav-item",children:(0,h.jsx)("button",{className:"nav-link","data-bs-toggle":"tab","data-bs-target":"#addAction",type:"button",children:"Add Action"})})]}),(0,h.jsxs)("div",{className:"tab-content",children:[(0,h.jsxs)("div",{className:"tab-pane fade active show",id:"createEmailTemplate",children:[(0,h.jsx)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:(0,h.jsx)(i.A,{btnClassName:"btn btn-primary gradientBg",onClickFun:()=>Q(),children:"Create New Email Template"})}),(0,h.jsx)(_,{TemplateList:Z,isLoading:m,toggleOffcanvas:Q,setSelectedTemplateData:D,onHandleDeleteModal:e=>{O(!H),P(e)},currentPage:k,setCurrentPage:C,onHandleViewModal:G}),(0,h.jsx)(f,{getAllEmailTemplalte:z,isOpenEmailType:a,toggleOffcanvas:Q,setSelectedTemplateData:D,selectedTemplateData:w,onHandleViewModals:J})]}),(0,h.jsxs)("div",{className:"tab-pane fade active",id:"addAction",children:[(0,h.jsx)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:(0,h.jsx)(i.A,{btnClassName:"btn btn-primary gradientBg",onClickFun:()=>W(),children:"Add Action"})}),(0,h.jsx)(N,{ActionList:ee,isLoading:m,toggleOpenAction:W,setSelectedActionData:R,onHandleDeleteAction:e=>{$(!X),U(e)},currentPage:k,setCurrentPage:C,onHandleViewModal:G}),(0,h.jsx)(E.A,{TemplateList:Z,getAllAction:K,toggleOpenAction:W,openAction:I,setSelectedActionData:R,selectedActionData:L,onHandleViewModals:J})]})]}),X&&(0,h.jsx)(c.A,{onApproveReject:a=>{if(a){const a={_id:B};e(null===d.JN||void 0===d.JN?void 0:d.JN.DeleteActionTemplateRequest(a)),$(!X)}else $(!X)},isShow:X,desc:"You want to delete this Action",btnRightLoading:g}),H&&(0,h.jsx)(c.A,{onApproveReject:a=>{if(a){const a={_id:M};console.log("New Datradadsadsdsad",a),e(null===d.JN||void 0===d.JN?void 0:d.JN.deleteEmailTemplateRequest(a)),O(!H)}else O(!H)},isShow:H,desc:"You want to delete this Email Template",btnRightLoading:p})]})}}}]);
//# sourceMappingURL=3038.986198ea.chunk.js.map