"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[8435],{58435:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var i=a(65043),s=a(29829),d=a(45531),t=a(26181),n=a(92250),r=a(90607),o=a(80728),v=a(22166),c=a(56462),u=a(70579);const m=e=>{const{t:l}=(0,r.K)(),{addTravelTypePending:a}=(0,v.d4)((e=>e.travelAndClaim)),{selectedTravelType:s,openModel:m,handleOpenClose:p,addUpdateTravelTypeData:g,filteredDropdownData:h}=e,[x,T]=(0,i.useState)({}),[f,_]=(0,i.useState)({travel_category:null,isTravel:!0,travel_type:"",isActive:!0}),j=(e,l)=>{var a;const i=l||(null===(a=e.target)||void 0===a?void 0:a.name),{value:s,type:d,checked:t}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};_((e=>({...e,[i]:"checkbox"===d?t:s}))),T((e=>({...e,[i]:void 0})))};(0,i.useEffect)((()=>()=>{y()}),[m]),(0,i.useEffect)((()=>{s&&_({travel_type:null===s||void 0===s?void 0:s.name,isActive:null===s||void 0===s?void 0:s.is_active,travel_category:{label:null===s||void 0===s?void 0:s.travel_category_label,value:null===s||void 0===s?void 0:s.travel_category_value},isTravel:null===s||void 0===s?void 0:s.is_travel})}),[s]);const y=()=>{_({travel_type:"",isActive:!1,travel_category:null,isTravel:!0}),T({})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(m?"show":""),tabIndex:-1,style:{visibility:m?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[s?"Update":"Add"," Travel Type"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>p("travel_type")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.JU,{text:l("labels.travelCategory"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group mb-2",children:[(0,u.jsx)(c.A,{data:null===h||void 0===h?void 0:h.travel_category,placeholder:"Select Travel Type",value:(null===f||void 0===f?void 0:f.travel_category)||"",handleChange:e=>j(e,"travel_category")}),(null===x||void 0===x?void 0:x.travel_category)&&(0,u.jsx)(n.eo,{text:x.travel_category})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.JU,{text:l("labels.travelType"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group mb-2",children:[(0,u.jsx)(d.pd,{type:"text",placeholder:l("placeholders.travelType"),value:null===f||void 0===f?void 0:f.travel_type,name:"travel_type",onChange:e=>j(e)}),(null===x||void 0===x?void 0:x.travel_type)&&(0,u.jsx)(n.eo,{text:x.travel_type})]})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.JU,{text:l("labels.isActive")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.P_,{id:"isActive",checked:null===f||void 0===f?void 0:f.isActive,handleChange:e=>j(e),name:"isActive"},"isActive")})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.JU,{text:l("labels.isTravel")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.P_,{id:"isTravel",checked:null===f||void 0===f?void 0:f.isTravel,handleChange:e=>j(e),name:"isTravel"},"isTravel")})})]})]})}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(n.Sv,{text:l(s?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,t.i6)(o.N7,f);if(e.isValid){const{isActive:e,travel_type:l,travel_category:a,isTravel:i}=f,s={travel_category:null===a||void 0===a?void 0:a.value,name:l,is_active:e,is_travel:i};g(s)}else T(e.errors)})(),isLoading:s?"":a})})})]}),m&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};var p=a(94174),g=a(52027);const h=e=>{var l,a;const{t:s}=(0,r.K)(),{addTravelRulePending:m}=(0,v.d4)((e=>e.travelAndClaim)),{selectedTravelRuleData:p,openModel:g,handleOpenClose:h,addTravelRuleData:x,allDesignations:T,allDepartments:f,handleDesignationByDepartment:_,handleAddTravelTypeRule:j,allTravelList:y,filteredDropdownData:b}=e,[A,N]=(0,i.useState)({}),[R,E]=(0,i.useState)({ruleName:"",department:null,designation:null,description:"",maxAmount:"",isTravel:!0,isActive:!0,self:!1}),C=(e,l)=>{var a;const i=l||(null===(a=e.target)||void 0===a?void 0:a.name),{value:s,type:d,checked:t}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};E((e=>{let l={...e,[i]:"checkbox"===d?t:s};return"travelType"===i&&(l={...l,travelClass:null}),"department"===i&&_(null===s||void 0===s?void 0:s.value),l})),N((e=>({...e,[i]:void 0})))};(0,i.useEffect)((()=>()=>{D()}),[g]),(0,i.useEffect)((()=>{p&&E({ruleName:null===p||void 0===p?void 0:p.name,description:null===p||void 0===p?void 0:p.description,isActive:null===p||void 0===p?void 0:p.is_active,maxAmount:null===p||void 0===p?void 0:p.max_amount,perKilometerPrice:null===p||void 0===p?void 0:p.perKilometerPrice,travelClass:{label:null===p||void 0===p?void 0:p.travel_class_name,value:null===p||void 0===p?void 0:p.travel_class_value},travelType:{label:null===p||void 0===p?void 0:p.travel_type_name,value:null===p||void 0===p?void 0:p.travel_type_value},parkingCharges:null===p||void 0===p?void 0:p.parking_charges,self:null===p||void 0===p?void 0:p.self})}),[p]);const D=()=>{E({ruleName:"",perKilometerPrice:"",description:"",maxAmount:"",isActive:!0,travelClass:null,travelType:null,parkingCharges:"",self:!1}),N({})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(g?"show":""),tabIndex:-1,style:{visibility:g?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[p?"Update":"Add"," Rule"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>h("travel_rule")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:s("labels.ruleName"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"text",placeholder:s("placeholders.ruleName"),value:null===R||void 0===R?void 0:R.ruleName,name:"ruleName",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.ruleName)&&(0,u.jsx)(n.eo,{text:A.ruleName})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:"Travel Type",required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(c.A,{data:y,placeholder:"Select Travel Type",value:(null===R||void 0===R?void 0:R.travelType)||"",handleChange:e=>C(e,"travelType")}),(null===A||void 0===A?void 0:A.travelType)&&(0,u.jsx)(n.eo,{text:A.travelType})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:s("labels.maxAmount"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"number",placeholder:s("placeholders.maxAmount"),value:null===R||void 0===R?void 0:R.maxAmount,name:"maxAmount",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.maxAmount)&&(0,u.jsx)(n.eo,{text:A.maxAmount})]})]}),!["67e233a5806b643e3c2b3994","67e23468806b643e3c2b39b0"].includes(null===R||void 0===R||null===(l=R.travelType)||void 0===l?void 0:l.travel_category_value)&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:"Travel Class"}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(c.A,{data:(()=>{var e,l;switch(null===R||void 0===R||null===(e=R.travelType)||void 0===e||null===(l=e.label)||void 0===l?void 0:l.toLowerCase()){case"car":return null===b||void 0===b?void 0:b.car_type;case"flight":return null===b||void 0===b?void 0:b.flight_class;case"train":case"bus":return null===b||void 0===b?void 0:b.travel_class_type;default:return[]}})(),placeholder:"Select Travel Class",value:(null===R||void 0===R?void 0:R.travelClass)||"",handleChange:e=>C(e,"travelClass")}),(null===A||void 0===A?void 0:A.travelClass)&&(0,u.jsx)(n.eo,{text:A.travelClass})]})]})}),["67e233e6806b643e3c2b399c"].includes(null===R||void 0===R||null===(a=R.travelType)||void 0===a?void 0:a.travel_category_value)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:s("labels.perKilometerPrice"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"number",placeholder:s("placeholders.perKilometerPrice"),value:null===R||void 0===R?void 0:R.perKilometerPrice,name:"perKilometerPrice",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.perKilometerPrice)&&(0,u.jsx)(n.eo,{text:A.perKilometerPrice})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:s("labels.parkingCharges"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"number",placeholder:s("placeholders.parkingCharges"),value:null===R||void 0===R?void 0:R.parkingCharges,name:"parkingCharges",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.parkingCharges)&&(0,u.jsx)(n.eo,{text:A.parkingCharges})]})]})]}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)(d.JU,{text:s("labels.description")}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.TM,{placeholder:s("placeholders.description"),onChange:e=>C(e),name:"description",value:null===R||void 0===R?void 0:R.description}),(null===A||void 0===A?void 0:A.description)&&(0,u.jsx)(n.eo,{text:A.description})]})]})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.JU,{text:s("labels.isActive")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.P_,{id:"isActive",checked:null===R||void 0===R?void 0:R.isActive,handleChange:e=>C(e),name:"isActive"},"iActive")})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.JU,{text:s("labels.self")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(d.P_,{id:"self",checked:null===R||void 0===R?void 0:R.self,handleChange:e=>C(e),name:"self"},"iActive")})})]})]})}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(n.Sv,{text:s(p?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,t.i6)(o.VY,R);if(e.isValid){const{ruleName:e,description:l,maxAmount:a,isActive:i,perKilometerPrice:s,parkingCharges:d,travelClass:t,travelType:n,self:r}=R,o={name:e,description:l,max_amount:a,is_active:i,per_kilometer_price:s,parking_charges:d,travel_class:null===t||void 0===t?void 0:t.value,travel_id:null===n||void 0===n?void 0:n.value,self:r};j(o)}else N(e.errors)})(),isLoading:p?"":m})})})]}),g&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};a(53536);var x=a(62001);const T=e=>{let{openModel:l,handleOpenClose:a,travelRuleData:s,assignRule:t,travelTypeDataByIdRuleData:o,selectedTravelType:m,setTravelTypeDataByIdRuleData:g,isLoading:h}=e;const{t:T}=(0,r.K)(),{getDropdownMasterConstantDataPending:f,getDropdownMasterConstantDataRes:_,getDropdownMasterConstantDataError:j}=(0,v.d4)((e=>e.dropdownMaster));console.log("selectedTravelType.....................",m);const y=(0,v.wA)(),[b,A]=(0,i.useState)([]),[N,R]=(0,i.useState)(""),[E,C]=(0,i.useState)([{label:null,inputType:null}]),[D,S]=(0,i.useState)({}),L=((0,i.useMemo)((()=>({sn:(e,l)=>(0,u.jsx)("span",{children:l+1}),select:e=>(0,u.jsx)("span",{children:(0,u.jsx)(d.P_,{id:"assign",checked:null===e||void 0===e?void 0:e.assign,handleChange:l=>L(l,e),name:"assign"},"assign")})})),[b]),(e,l)=>{const{value:a,name:i,checked:s,type:d}=e.target;A((e=>null===e||void 0===e?void 0:e.map((e=>(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l?void 0:l.id)?{...e,[i]:"checkbox"===d?s:a}:e))))});(0,i.useEffect)((()=>{w()}),[]);const w=()=>{y(null===p.dk||void 0===p.dk?void 0:p.dk.getDropdownMasterConstantDataRequest())};(0,i.useEffect)((()=>{if(!f){if(j)return;if(_&&200===(null===_||void 0===_?void 0:_.code)){const e=null===_||void 0===_?void 0:_.data;R(e)}}}),[_,j,f]),(0,i.useEffect)((()=>{if(s)if((null===o||void 0===o?void 0:o.length)>0){const e=null===s||void 0===s?void 0:s.map((e=>({...e,assign:o.includes(null===e||void 0===e?void 0:e.id)})));A(e)}else A(s)}),[s,o]);const P=e=>{const l=[];return null===e||void 0===e||e.map((e=>{var a;null===l||void 0===l||l.push({label:null===e||void 0===e?void 0:e.label,inputType:null===e||void 0===e||null===(a=e.inputType)||void 0===a?void 0:a.value})})),l};(0,i.useEffect)((()=>()=>{A([]),g(""),y(p.o1.handleClearTravelStore("HANDLE_CLEAR_GET_TRAVEL_TYPE_BY_ID_STORE"))}),[]);const k=(e,l,a)=>{var i;const s=l||(null===(i=e.target)||void 0===i?void 0:i.name),{value:d}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};C((e=>null===e||void 0===e?void 0:e.map(((e,l)=>l===a?{...e,[s]:d}:e))))},U=()=>{C((e=>[...e,{label:"",inputType:""}]))};return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:" Travel Rule Type"}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>a("assign_rule")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest  ",children:E&&(null===E||void 0===E?void 0:E.map(((e,l)=>(0,u.jsx)("div",{className:"row m-2",children:(0,u.jsx)("div",{className:"formPanel",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-5",children:[(0,u.jsx)(d.JU,{text:T("labels.ruleType"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"text",placeholder:T("placeholders.ruleType"),value:e.label,name:"label",onChange:e=>k(e,null,l)}),(null===D||void 0===D?void 0:D.ruleName)&&(0,u.jsx)(d.eo,{text:D.ruleName})]})]}),(0,u.jsxs)("div",{className:"col-md-5",children:[console.log("sdfsdfdsf",null===e||void 0===e?void 0:e.inputType),(0,u.jsx)(d.JU,{text:T("labels.ruleInputType"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(c.A,{data:N.dropdownInputType,placeholder:T("placeholders.ruleInputType"),value:(null===e||void 0===e?void 0:e.inputType)||"",handleChange:e=>k(e,"inputType",l),name:"inputType"}),(null===D||void 0===D?void 0:D.department)&&(0,u.jsx)(d.eo,{text:D.department})]})]}),(0,u.jsx)("div",{className:"col-md-2",children:(0,u.jsxs)("div",{className:"form-group mb-5",children:[E.length-1==l&&(0,u.jsx)("div",{className:"me-3",onClick:U,children:(0,u.jsx)(x.A,{imgSrc:"images/add-icon3.svg",altText:"",width:32})}),E.length>1&&(0,u.jsx)("div",{onClick:()=>(e=>{const l=E.filter(((l,a)=>a!==e));C(l)})(l),children:(0,u.jsx)(x.A,{imgSrc:"images/deletebg-Icon.svg",altText:"",width:32})})]})})]})})},l))))}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(n.Sv,{text:"Assign Rule",classNames:"btn btn-org-gradient",handleClick:()=>(()=>{const e={_id:null===m||void 0===m?void 0:m.id,rule_details:P(E)};t(e)})()})})})]}),l&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};var f=a(49985),_=a(35685),j=a(73216);const y=e=>{const{allDesignations:l,assignRuleData:a,travelTypeAssignRuleData:s,allTravelList:d}=e,[t,n]=(0,i.useState)("");(0,i.useEffect)((()=>{a&&(null===l||void 0===l?void 0:l.length)>0&&(null===s||void 0===s?void 0:s.length)>0&&r()}),[a,l,s]);const r=()=>{let e={};l&&(null===l||void 0===l||l.forEach((l=>{null===a||void 0===a||a.forEach((a=>{(null===a||void 0===a?void 0:a.designation_id)===(null===l||void 0===l?void 0:l._id)&&s&&(null===s||void 0===s||s.forEach((i=>{var s;if(null!==a&&void 0!==a&&null!==(s=a.travel_rule_ids)&&void 0!==s&&s.includes(null===i||void 0===i?void 0:i._id)){const a=`${null===i||void 0===i?void 0:i.travel_id}`;e[null===l||void 0===l?void 0:l._id]||(e[null===l||void 0===l?void 0:l._id]={}),e[null===l||void 0===l?void 0:l._id][a]||(e[null===l||void 0===l?void 0:l._id][a]=[]),e[null===l||void 0===l?void 0:l._id][a].push(i)}})))}))}))),n(e)};return(0,u.jsx)("div",{className:"table-responsive tableDiv",style:{height:"437px"},children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Designation"}),d&&(null===d||void 0===d?void 0:d.map((e=>(0,u.jsx)("th",{children:null===e||void 0===e?void 0:e.label},(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.label)))))]})}),(0,u.jsx)("tbody",{children:null!==l&&void 0!==l&&l.length?(0,u.jsx)(u.Fragment,{children:l&&(null===l||void 0===l?void 0:l.map((e=>a&&(null===a||void 0===a?void 0:a.some((l=>(null===l||void 0===l?void 0:l.designation_id)===(null===e||void 0===e?void 0:e._id))))?(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)("div",{style:{width:"200px"},children:null===e||void 0===e?void 0:e.label})}),d.map((l=>{var a,i;const s=(null===(a=t[null===e||void 0===e?void 0:e._id])||void 0===a||null===(i=a[null===l||void 0===l?void 0:l._id])||void 0===i?void 0:i.map((e=>null===e||void 0===e?void 0:e.name)))||[];return(0,u.jsx)("td",{children:(0,u.jsx)("div",{style:{width:"150px"},children:s.length>0?[...new Set(s)].join(", "):"-"})},(null===l||void 0===l?void 0:l._id)||(null===l||void 0===l?void 0:l.label))}))]},null===e||void 0===e?void 0:e._id):null)))}):null})]})})},b=()=>{const{t:e}=(0,r.K)(),l=(0,v.wA)(),{addTravelTypePending:a,addTravelTypeRes:t,addTravelTypeError:n,getTravelTypePending:o,getTravelTypeRes:c,getTravelTypeError:x,updateTravelTypePending:b,updateTravelTypeRes:A,updateTravelTypeError:N,deleteTravelTypePending:R,deleteTravelTypeRes:E,deleteTravelTypeError:C,getAllTravelTypePending:D,getAllTravelTypeRes:S,getAllTravelTypeError:L,createTravelAndClaimRulePending:w,createTravelAndClaimRuleRes:P,createTravelAndClaimRuleError:k,getTravelAndClaimRulePending:U,getTravelAndClaimRuleRes:q,getTravelAndClaimRuleError:I,updateTravelAndClaimRulePending:M,updateTravelAndClaimRuleRes:O,updateTravelAndClaimRuleError:H,deleteTravelAndClaimRulePending:B,deleteTravelAndClaimRuleRes:V,deleteTravelAndClaimRuleError:J,getAllTravelAndClaimRulePending:K,getAllTravelAndClaimRuleRes:F,getAllTravelAndClaimRuleError:Y,assignRulePending:$,assignRuleRes:X,assignRuleError:G,getTravelTypeByIdPending:Q,getTravelTypeByIdRes:Z,getTravelTypeByIdError:z,getAssignRulePending:W,getAssignRuleRes:ee,getAssignRuleError:le}=(0,v.d4)((e=>e.travelAndClaim)),{getFilteredDropdownDataError:ae,getFilteredDropdownDataRes:ie,getFilteredDropdownDataPending:se}=(0,v.d4)((e=>e.dropdownMaster)),de=(0,j.Zp)(),{getDepartmentListRes:te,getDepartmentListError:ne,getDepartmentListPending:re}=(0,v.d4)((e=>e.department)),{getDesignationsByDepartmentRes:oe,getDesignationsByDepartmentPending:ve,getDesignationsByDepartmentError:ce}=(0,v.d4)((e=>e.designation)),[ue,me]=(0,i.useState)([]),[pe,ge]=(0,i.useState)(""),[he,xe]=(0,i.useState)(!1),[Te,fe]=(0,i.useState)(!1),[_e,je]=(0,i.useState)(!1),[ye,be]=(0,i.useState)([]),[Ae,Ne]=(0,i.useState)([]),[Re,Ee]=(0,i.useState)(""),[Ce,De]=(0,i.useState)(""),[Se,Le]=(0,i.useState)(""),[we,Pe]=(0,i.useState)(""),[ke,Ue]=(0,i.useState)(""),[qe,Ie]=(0,i.useState)(!1),[Me,Oe]=(0,i.useState)(""),[He,Be]=(0,i.useState)(!1),[Ve,Je]=(0,i.useState)(""),[Ke,Fe]=(0,i.useState)(""),[Ye,$e]=(0,i.useState)({}),[Xe,Ge]=(0,i.useState)(""),[Qe,Ze]=(0,i.useState)({currPageTravelType:1,currPageTravelRule:1});(0,i.useEffect)((()=>{sl(),dl(),vl(),cl(),ul(),ml()}),[]);const ze=(e,l)=>{"travel_type"===e?(Pe(l||""),xe(!he)):"travel_rule"===e?(Oe(l||""),je(!_e)):"assign_rule"==e&&(fe(!Te),null!==l&&void 0!==l&&l.id?(ol(null===l||void 0===l?void 0:l.id),Pe(l)):Pe(""))},We=(e,l)=>{"travel_type"===e&&(Pe(l||""),Ie(!qe)),"travel_rule"===e&&Be(!He)},el=(0,i.useMemo)((()=>({sn:(e,l)=>(0,u.jsx)("span",{children:l+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,f.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),action:e=>(0,u.jsxs)("div",{className:"btn-group actionDrp",children:[(0,u.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,u.jsx)("ul",{className:"dropdown-menu",children:(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{ze("travel_type",e)},children:[(0,u.jsx)(d.In,{className:"fa fa-edit me-1"}),"Update"]})})})]})})),[]),ll=[{name:"Travel Type",onClickFun:e=>al(e),id:"travel_type"},{name:"Travel Rule",onClickFun:e=>al(e),id:"travel_rule"},{name:"Assign Rule",onClickFun:e=>al(e),id:"assign_rule"}],al=e=>{"travel_rule"===e&&rl()},il=(e,l)=>{"travel_type"===l&&(Ze({...Qe,currPageTravelType:e}),sl(e)),"travel_rule"===l&&(Ze({...Qe,currPageTravelRule:e}),rl(e))};(0,i.useEffect)((()=>{if(!a){if(n)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ADD_TRAVEL_TYPE_STORE"));t&&200===(null===t||void 0===t?void 0:t.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ADD_TRAVEL_TYPE_STORE")),ze("travel_type"),sl())}}),[a,t,n]),(0,i.useEffect)((()=>{if(!b){if(N)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_TYPE_STORE"));A&&200===(null===A||void 0===A?void 0:A.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_TYPE_STORE")),ze("travel_type"),sl())}}),[b,A,N]);(0,i.useEffect)((()=>{if(!R){if(C)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_TYPE_STORE"));E&&200===(null===E||void 0===E?void 0:E.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_TYPE_STORE")),sl(),We("travel_type"))}}),[R,E,C]);const sl=e=>{const a={page:e||(null===Qe||void 0===Qe?void 0:Qe.currPageTravelType),limit:g.X$.limit};l(p.o1.getTravelTypeRequest(a))};(0,i.useEffect)((()=>{if(!o){if(x)return;c&&200===(null===c||void 0===c?void 0:c.code)&&ge(null===c||void 0===c?void 0:c.data)}}),[o,c,x]);const dl=()=>{const e=null===te||void 0===te?void 0:te.data;null!==e&&void 0!==e&&e.length?be(e):l(p.vd.getDepartmentListRequest())};(0,i.useEffect)((()=>{if(!re){if(ne)return;if(te&&200===(null===te||void 0===te?void 0:te.code)){const e=null===te||void 0===te?void 0:te.data;be(e)}}}),[te,ne,re]);(0,i.useEffect)((()=>{if(!ve){if(ce)return;if(oe&&200===(null===oe||void 0===oe?void 0:oe.code)){const e=null===oe||void 0===oe?void 0:oe.data;Ne(e)}}}),[oe,ce,ve]);const tl=(0,i.useMemo)((()=>({sn:(e,l)=>(0,u.jsx)("span",{children:l+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,f.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),action:e=>(0,u.jsxs)("div",{className:"btn-group actionDrp",children:[(0,u.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,u.jsxs)("ul",{className:"dropdown-menu",children:[(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{ze("travel_rule",e)},children:[(0,u.jsx)(d.In,{className:"fa fa-calendar me-1"}),"Update"]})}),(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>nl(e._id),children:[(0,u.jsx)(d.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[]);(0,i.useEffect)((()=>{if(!w){if(k)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_CREATE_TRAVEL_AND_CLAIM_RULE_STORE"));P&&200===(null===P||void 0===P?void 0:P.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_CREATE_TRAVEL_AND_CLAIM_RULE_STORE")),ze("travel_rule"),rl(),vl())}}),[w,P,k]),(0,i.useEffect)((()=>{if(!M){if(H)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_AND_CLAIM_RULE_STORE"));O&&200===(null===O||void 0===O?void 0:O.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_AND_CLAIM_RULE_STORE")),ze("travel_rule"),rl(),vl())}}),[M,O,H]);const nl=e=>{e&&Je(e),We("travel_rule")};(0,i.useEffect)((()=>{if(!B){if(J)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_AND_CLAIM_RULE_STORE"));V&&200===(null===V||void 0===V?void 0:V.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_AND_CLAIM_RULE_STORE")),We("travel_rule"),rl(),vl())}}),[B,V,J]);const rl=e=>{let a={page:e||(null===Qe||void 0===Qe?void 0:Qe.currPageTravelRule),limit:g.X$.limit};l(p.o1.getTravelAndClaimRuleRequest(a))};(0,i.useEffect)((()=>{if(!U){if(I)return;q&&200===(null===q||void 0===q?void 0:q.code)&&Ee(null===q||void 0===q?void 0:q.data)}}),[U,q,I]);const ol=e=>{const a={_id:e};l(p.o1.getTravelTypeByIdRequest(a))};(0,i.useEffect)((()=>{if(!Q){if(z)return;Z&&200===(null===Z||void 0===Z?void 0:Z.code)&&Le(null===Z||void 0===Z?void 0:Z.data)}}),[Q,Z,z]);const vl=()=>{l(p.o1.getAllTravelAndClaimRuleRequest())};(0,i.useEffect)((()=>{if(!K){if(Y)return;F&&200===(null===F||void 0===F?void 0:F.code)&&De(null===F||void 0===F?void 0:F.data)}}),[K,F,Y]);(0,i.useEffect)((()=>{if(!$){if(G)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ASSIGN_RULE_STORE"));X&&200===(null===X||void 0===X?void 0:X.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ASSIGN_RULE_STORE")),ze("assign_rule"),Pe(""))}}),[$,X,G]);const cl=()=>{l(p.o1.getAllTravelTypeRequest())};(0,i.useEffect)((()=>{if(!D){if(L)return;S&&200===(null===S||void 0===S?void 0:S.code)&&Fe(null===S||void 0===S?void 0:S.data)}}),[S,L,D]);const ul=()=>{let e={category:""};["travel_category","flight_class","car_type","travel_class_type"].forEach((a=>{e.category=a,l(p.dk.getFilteredDropdownDataRequest(e))}))};(0,i.useEffect)((()=>{if(!se){if(ae)return;if(ie&&200===(null===ie||void 0===ie?void 0:ie.code)){const e=null===ie||void 0===ie?void 0:ie.data;let l=null===e||void 0===e?void 0:e.category;$e((a=>({...a,[l]:(null===e||void 0===e?void 0:e.data)||[]})))}}}),[ie,ae,se]);const ml=e=>{l(p.o1.getAssignRuleRequest(e))};return(0,i.useEffect)((()=>{if(!W){if(le)return;ee&&200===(null===ee||void 0===ee?void 0:ee.code)&&Ge(null===ee||void 0===ee?void 0:ee.data)}}),[W,ee,le]),(0,u.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,u.jsxs)("div",{className:"cardHead d-flex",children:[(0,u.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,u.jsx)("h4",{className:"ms-2 ",children:"Travel Setting"})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"dropdown payrollSetting",children:[(0,u.jsx)("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"true",children:"Add Setting"}),(0,u.jsxs)("ul",{className:"dropdown-menu dropdownLeft","data-popper-placement":"top-end",children:[(0,u.jsx)("li",{className:"dropdown-item",onClick:()=>ze("travel_type"),children:(0,u.jsx)("span",{children:"Add Travel Type"})}),(0,u.jsx)("li",{className:"dropdown-item",onClick:()=>ze("travel_rule"),children:(0,u.jsx)("span",{children:"Add Travel Rule"})}),(0,u.jsx)("li",{className:"dropdown-item",onClick:()=>{de("assign-travel-rules")},children:(0,u.jsx)("span",{children:"Assign Travel"})})]})]})})]}),(0,u.jsx)(s.QE,{tabs:ll,type:"travelSetting"}),(0,u.jsxs)("div",{className:"tab-content",children:[(0,u.jsx)("div",{className:"tab-pane fade active show",id:"travel_type",children:(0,u.jsx)(s.Ak,{data:null===pe||void 0===pe?void 0:pe.data,fields:[{key:"sn",label:"S.N"},{key:"name",label:"Travel Type"},{key:"is_active",label:"status"},{key:"action",label:"Action"}],isLoading:o,pagination:!0,currentPage:null===Qe||void 0===Qe?void 0:Qe.currPageTravelType,setCurrentPage:e=>il(e,"travel_type"),totalPages:null===pe||void 0===pe?void 0:pe.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:el})}),(0,u.jsx)("div",{className:"tab-pane fade  show",id:"travel_rule",children:(0,u.jsx)(s.Ak,{data:null===Re||void 0===Re?void 0:Re.data,fields:[{key:"sn",label:"S.N"},{key:"name",label:"Rule Name"},{key:"max_amount",label:"Amount"},{key:"is_active",label:"Active"},{key:"action",label:"Action"}],isLoading:U,pagination:!0,currentPage:null===Qe||void 0===Qe?void 0:Qe.currPageTravelRule,setCurrentPage:e=>il(e,"travel_rule"),totalPages:null===Re||void 0===Re?void 0:Re.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:tl})}),(0,u.jsx)("div",{className:"tab-pane fade  show",id:"assign_rule",children:(0,u.jsx)(y,{allDesignations:Ae,travelTypeAssignRuleData:Ce,assignRuleData:Xe,allTravelList:Ke})})]}),he&&(0,u.jsx)(m,{openModel:he,handleOpenClose:ze,addUpdateTravelTypeData:e=>{if(we){const a={...e,_id:null===we||void 0===we?void 0:we._id};l(p.o1.updateTravelTypeRequest(a))}else l(p.o1.addTravelTypeRequest(e))},selectedTravelType:we,filteredDropdownData:Ye}),_e&&(0,u.jsx)(h,{openModel:_e,handleOpenClose:ze,allDesignations:Ae,allDepartments:ye,handleDesignationByDepartment:e=>{const a={department_id:e};l(p.EU.getDesignationsByDepartmentRequest(a))},handleAddTravelTypeRule:e=>{Me?(e._id=null===Me||void 0===Me?void 0:Me._id,l(p.o1.updateTravelAndClaimRuleRequest(e))):l(p.o1.createTravelAndClaimRuleRequest(e))},selectedTravelRuleData:Me,allTravelList:Ke,filteredDropdownData:Ye}),Te&&(0,u.jsx)(T,{openModel:Te,handleOpenClose:ze,travelRuleData:Ce,assignRule:e=>{l(p.o1.assignRuleRequest(e))},travelTypeDataByIdRuleData:Se,selectedTravelType:we,setTravelTypeDataByIdRuleData:Le,isLoading:K}),qe&&(0,u.jsx)(_.A,{onApproveReject:e=>{if(e){const e={_id:ke};l(null===p.o1||void 0===p.o1?void 0:p.o1.deleteTravelTypeRequest(e))}else a&&Ue(a),We("travel_type");var a},isShow:qe,desc:e("alerts.deletePopup.desc").replace("$1","Travel Type"),btnRightLoading:R,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")}),He&&(0,u.jsx)(_.A,{onApproveReject:e=>{if(e){const e={_id:Ve};l(null===p.o1||void 0===p.o1?void 0:p.o1.deleteTravelAndClaimRuleRequest(e))}else nl()},isShow:He,desc:e("alerts.deletePopup.desc").replace("$1","Travel Rule"),btnRightLoading:B,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")})]})}}}]);
//# sourceMappingURL=8435.021ef8d7.chunk.js.map