"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[527],{80527:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(65043),s=n(90607),l=n(29829),d=n(45531),o=n(70579);const i=e=>{const{t:t}=(0,s.K)(),{isLoading:n,toggleAnnouncementDeleteModal:i,currentPage:r,setCurrentPage:c,allAnnouncements:u}=e,[v,m]=(0,a.useState)("");(0,a.useEffect)((()=>{m(u)}),[u]);const p=(0,a.useMemo)((()=>({sn:(e,t)=>(0,o.jsx)("span",{children:t+1}),action:e=>(0,o.jsxs)("div",{className:"btn-group actionDrp",children:[(0,o.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,o.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,o.jsx)("ul",{className:"dropdown-menu",children:(0,o.jsx)("li",{children:(0,o.jsxs)("span",{className:"dropdown-item",onClick:()=>i(e),children:[(0,o.jsx)(d.In,{className:"fa fa-trash test"})," Delete"]})})})]})})),[v,i]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.Ak,{data:v,fields:[{key:"sn",label:"S.N"},{key:"type",label:"Announcement Name"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date "},{key:"description",label:"Description "},{key:"action",label:"Action"}],isLoading:n,pagination:!0,currentPage:r,setCurrentPage:c,totalPages:null===v||void 0===v?void 0:v.totalPages,tableName:t("headings.announcement"),scopedSlots:p})})};var r=n(22166),c=n(35685),u=n(26181),v=n(85831),m=n(80728),p=n(56462);const x=e=>{const{t:t}=(0,s.K)(),{selectedAnnouncementData:n,openModel:l,handleOpenClose:i,handleCreateUpdateAnnouncement:r,filteredDropdownData:c}=e,[x,h]=(0,a.useState)({}),[f,g]=(0,a.useState)({startDate:"",endDate:"",description:"",announcement_type:null}),j=(e,t)=>{var n;const a=t||(null===(n=e.target)||void 0===n?void 0:n.name),{value:s,type:l,checked:d}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};g((e=>({...e,[a]:"checkbox"===l?d:s}))),h((e=>({...e,[a]:void 0})))};(0,a.useEffect)((()=>()=>{b()}),[l]),(0,a.useEffect)((()=>{n&&g({startDate:null===n||void 0===n?void 0:n.start_date,endDate:null===n||void 0===n?void 0:n.end_date,description:null===n||void 0===n?void 0:n.description,announcement_type:{label:null===n||void 0===n?void 0:n.announcement_type,value:null===n||void 0===n?void 0:n.announcement_type}})}),[n]);const b=()=>{g({announcement_type:null,startDate:"",endDate:"",description:""}),h({})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"offcanvas offcanvas-end  "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden"},id:"interviewDetail",children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[n?"Update":"Add"," Announcement"]}),(0,o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>i()})]}),(0,o.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,o.jsx)("div",{className:"formPanel",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(d.JU,{text:t("labels.startDate")}),(0,o.jsx)(p.A,{data:null===c||void 0===c?void 0:c.announcement_types,placeholder:"Select Announcement Type",value:null===f||void 0===f?void 0:f.announcement_type,handleChange:e=>j(e,"announcement_type")}),(null===x||void 0===x?void 0:x.announcement_type)&&(0,o.jsx)(v.eo,{text:x.announcement_type})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(d.JU,{text:t("labels.startDate")}),(0,o.jsx)(d.pd,{type:"date",placeholder:t("placeholders.startDate"),value:null===f||void 0===f?void 0:f.startDate,name:"startDate",onChange:e=>j(e)}),(null===x||void 0===x?void 0:x.startDate)&&(0,o.jsx)(v.eo,{text:x.startDate})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(d.JU,{text:t("labels.endDate")}),(0,o.jsx)(d.pd,{type:"date",placeholder:t("placeholders.endDate"),value:null===f||void 0===f?void 0:f.endDate,name:"endDate",onChange:e=>j(e),min:null===f||void 0===f?void 0:f.startDate}),(null===x||void 0===x?void 0:x.endDate)&&(0,o.jsx)(v.eo,{text:x.endDate})]})}),(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(d.JU,{text:t("labels.description")}),(0,o.jsx)(d.TM,{placeholder:"Enter here....",onChange:e=>j(e),name:"description",value:null===f||void 0===f?void 0:f.description}),(null===x||void 0===x?void 0:x.description)&&(0,o.jsx)(v.eo,{text:x.description})]})})]})})}),(0,o.jsx)("div",{className:"offcanvas-footer",children:(0,o.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,o.jsx)(v.Sv,{text:t("btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,u.i6)(m.wP,f);if(e.isValid){const{startDate:e,endDate:t,description:n,announcement_type:a}=f,s={start_date:e,end_date:t,description:n,type:null===a||void 0===a?void 0:a.label.toLowerCase()};r(s)}else h(e.errors)})()})})})]}),l&&(0,o.jsx)("div",{className:"modal-backdrop fade show"})]})};var h=n(94174),f=n(49985);const g=()=>{const{createPostPending:e,createPostRes:t,createPostError:n,updatePostPending:l,updatePostRes:d,updatePostError:u,getAllPostPending:m,getAllPostRes:p,getAllPostError:g,deletePostRes:j,deletePostError:b,deletePostPending:D}=(0,r.d4)((e=>null===e||void 0===e?void 0:e.community)),{getFilteredDropdownDataError:y,getFilteredDropdownDataRes:P,getFilteredDropdownDataPending:N}=(0,r.d4)((e=>e.dropdownMaster)),A=(0,r.wA)(),{t:_}=(0,s.K)(),[C,w]=(0,a.useState)(),[E,S]=(0,a.useState)(!1),[k,R]=(0,a.useState)(""),[T,L]=(0,a.useState)(!1),[M,U]=(0,a.useState)(""),[F,O]=(0,a.useState)(1),[J,q]=(0,a.useState)({});(0,a.useEffect)((()=>{K()}),[]);const z=e=>{R(e||""),S(!E)},I=e=>{e&&U(e),L(!T)};(0,a.useEffect)((()=>{if(!e){if(n)return void A(h.zP.handleClearCommunityStore("HANDLE_CLEAR_CREATE_POST_STORE"));t&&200===(null===t||void 0===t?void 0:t.code)&&A(h.zP.handleClearCommunityStore("HANDLE_CLEAR_CREATE_POST_STORE"))}}),[t,n,e]);const K=()=>{let e={category:["announcement_types"]};A(h.dk.getFilteredDropdownDataRequest(e))};return(0,a.useEffect)((()=>{if(!N){if(y)return;if(P&&200===(null===P||void 0===P?void 0:P.code)){var e;const t=(0,f.Ib)(null===P||void 0===P||null===(e=P.data)||void 0===e?void 0:e.data);q(t)}}}),[P,y,N]),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"d-flex  justify-content-end ",children:(0,o.jsx)(v.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>z(),text:_("btns.createAnnouncement")})}),(0,o.jsx)(x,{handleCreateUpdateAnnouncement:e=>{A(h.zP.createPostRequest(e))},handleOpenClose:z,openModel:E,filteredDropdownData:J}),(0,o.jsx)(i,{currentPage:F,setCurrentPage:O,allAnnouncements:C,toggleAnnouncementDeleteModal:I}),T&&(0,o.jsx)(c.A,{onApproveReject:e=>{if(e){}else I()},isShow:T,desc:_("alerts.deletePopup.desc").replace("$1","Announcement"),btnTextRight:_("btns.delete"),btnTextLeft:_("btns.cancel")})]})}}}]);
//# sourceMappingURL=527.89ac645f.chunk.js.map