"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[6736],{3038:(e,a,l)=>{l.r(a),l.d(a,{default:()=>A});var t=l(65043),i=(l(34317),l(48334)),s=l(22166),d=l(94174),n=l(42145),o=l(92250),c=l(34348),r=l.n(c),m=l(49985),v=l(82149),u=l(70579);const p=e=>{const{TemplateList:a,isLoading:l,toggleOffcanvas:i,currentPage:s,setCurrentPage:d,setSelectedTemplateData:n,onHandleDeleteModal:c,onHandleViewModal:p}=e,[b,x]=(0,t.useState)(a);(0,t.useEffect)((()=>{x(a)}),[a]);const h=(0,t.useMemo)((()=>({sn:(e,a)=>(0,u.jsx)("span",{children:a+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,m.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>r()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,u.jsxs)("div",{className:"actionGroup d-flex gap-2",children:[(0,u.jsx)(o.Sv,{text:"View",handleClick:()=>p(e),classNames:"btn btn-success"}),(0,u.jsx)(o.Sv,{text:"Update",classNames:"btn btn-primary",handleClick:()=>{n(e),i()}}),(0,u.jsx)(o.Sv,{text:"Delete",handleClick:()=>c(null===e||void 0===e?void 0:e.id),classNames:"btn btn-danger"})]})})),[n,i,c,p]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.A,{data:null===b||void 0===b?void 0:b.data,fields:[{key:"sn",label:"S.N"},{key:"template_name",label:"Template Name"},{key:"email_title",label:"Subject"},{key:"email_type",label:"Email For"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},{key:"action",label:"Action"}],isLoading:l,pagination:!0,currentPage:s,setCurrentPage:d,totalPages:null===b||void 0===b?void 0:b.totalPages,tableName:"Email Template",scopedSlots:h})})};var b=l(35685),x=l(80728),h=l(26181),_=l(33474),f=l(4418);const g=e=>{var a;const{isOpenEmailType:l,toggleOffcanvas:i,getAllEmailTemplalte:c,setSelectedTemplateData:r,selectedTemplateData:m,onHandleViewModals:v}=e,[p,b]=(0,t.useState)({}),g=(0,s.wA)(),{getEmailTypePending:j,getEmailTypeRes:N,getEmailTypeError:E,addEmailTemplatePending:A,addEmailTemplateRes:y,addEmailTemplateError:T}=(0,s.d4)((e=>e.emailtemplate)),[S,k]=(0,t.useState)(!1),[C,D]=(0,t.useState)([]),[w,L]=(0,t.useState)(""),[R,M]=(0,t.useState)(""),[P,H]=(0,t.useState)(""),[O,J]=(0,t.useState)(""),[F,I]=(0,t.useState)([]),[V,q]=(0,t.useState)([]),[Y,B]=(0,t.useState)({template_name:"",email_title:"",email_type:"",body:"",is_active:"",remark:""});(0,t.useEffect)((()=>{B({template_name:(null===m||void 0===m?void 0:m.template_name)||"",email_title:(null===m||void 0===m?void 0:m.email_title)||"",email_type:m.email_type||"",body:null===m||void 0===m?void 0:m.body,remark:null===m||void 0===m?void 0:m.remark}),k(null===m||void 0===m?void 0:m.is_active),M(null===m||void 0===m?void 0:m.id),X(null===m||void 0===m?void 0:m.body)}),[m]),(0,t.useEffect)((()=>{B({template_name:(null===v||void 0===v?void 0:v.template_name)||"",email_title:(null===v||void 0===v?void 0:v.email_title)||"",email_type:null===v||void 0===v?void 0:v.email_type,body:null===v||void 0===v?void 0:v.body,remark:null===v||void 0===v?void 0:v.remark}),k(null===v||void 0===v?void 0:v.is_active),X(null===v||void 0===v?void 0:v.body)}),[v]),(0,t.useEffect)((()=>{U()}),[]);const U=()=>{g(d.JN.getEmailTypeRequest())};(0,t.useEffect)((()=>{if(!j){if(E)return void D([]);var e,a,l,t;if(N)if(200==(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.code))D(null===N||void 0===N||null===(a=N.data)||void 0===a||null===(l=a.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data)}}),[j,N,E]);const X=e=>{J(e)};(0,t.useEffect)((()=>{if(!A){if(T)return void n.oR.error(null===T||void 0===T?void 0:T.errorMessage);var e,a;if(y)if(200===(null===y||void 0===y||null===(e=y.data)||void 0===e?void 0:e.code))n.oR.success(null===y||void 0===y||null===(a=y.data)||void 0===a?void 0:a.msg),i(),c(),g(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_ADD_EMAIL_TEMPLATE_STORE"))}}),[y,T,A]);const $=e=>{var a;(p&&b({}),"email_type"==e.target.name)&&I(null===z||void 0===z||null===(a=z.filter((a=>a.task==e.target.value))[0])||void 0===a?void 0:a.subtasks);const{name:l,value:t}=e.target;B({...Y,[l]:t})};(0,t.useEffect)((()=>{0==l&&G()}),[l]);const G=()=>{B({template_name:"",email_title:"",email_type:"",body:"",is_active:""}),r(""),b({}),L("")},z=[{id:1,task:"MRF",subtasks:[{value:"{employee_name}",label:"Employee Name"},{value:"{applying_for}",label:"Applying for"},{value:"{approval_by}",label:"Approval by"},{value:"{mrf_id}",label:"Mrf id"},{value:"{name}",label:"Name"},{value:"{current_date_time}",label:"Current date time"},{value:"{designation}",label:"Designation"}]},{id:2,task:"C-off",subtasks:[{value:"{Name}",label:"Name"},{value:"{emp_name}",label:"Emp Name"},{value:"{date}",label:"Date"},{value:"{no_of_days}",label:"No of days"},{value:"{reason}",label:"Reason"}]},{id:3,task:"attendance_correction",subtasks:[{value:"{manager_full_name}",label:"manager_full_name"},{value:"{emp_name}",label:"emp_name"},{value:"{date}",label:"date"},{value:"{first_check_in}",label:"first_check_in"},{value:"{first_check_out}",label:"first_check_out"},{value:"{corrected_check_in_time}",label:"corrected_check_in_time"},{value:"{corrected_check_out_time}",label:"corrected_check_out_time"}]}];return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden",width:"1025px"},children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[v?"View":m?"Update":"Create New"," Email Template"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>i("view")})]}),(0,u.jsx)("div",{className:"offcanvas-body",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Template Name",(0,u.jsx)("span",{className:"text-danger",children:""==v&&"*"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[""!=v?(0,u.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.template_name}):(0,u.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Enter Template Name",name:"template_name",value:(null===Y||void 0===Y?void 0:Y.template_name)||"",onChange:e=>$(e),disabled:""!=v}),(null===p||void 0===p?void 0:p.template_name)&&(0,u.jsx)(_.A,{text:p.template_name})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Subject",(0,u.jsx)("span",{className:"text-danger",children:""==v&&"*"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[""!=v?(0,u.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.email_title}):(0,u.jsx)("input",{type:"text",className:"form-control fs-7",name:"email_title",placeholder:"Enter Title",value:null===Y||void 0===Y?void 0:Y.email_title,onChange:e=>$(e),disabled:""!=v}),(null===p||void 0===p?void 0:p.email_title)&&(0,u.jsx)(_.A,{text:p.email_title})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Email For",(0,u.jsx)("span",{className:"text-danger",children:""==v&&"*"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[""!=v?(0,u.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.email_type}):(0,u.jsxs)("select",{className:"form-select",required:!0,name:"email_type",value:null===Y||void 0===Y?void 0:Y.email_type,onChange:e=>$(e),disabled:""!=v,children:[(0,u.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Required Email Type"}),C&&(null===C||void 0===C?void 0:C.map((e=>(0,u.jsx)("option",{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name}))))]}),(null===p||void 0===p?void 0:p.email_type)&&(0,u.jsx)(_.A,{text:p.email_type})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)("label",{htmlFor:!0,children:"Body"})})}),(0,u.jsxs)("div",{className:"col-md-9",children:[(0,u.jsx)("div",{className:"form-group mb-3",children:""!=v?(0,u.jsx)("div",{className:"cardBox mb-3 mt-3 pt-3 myRequest",children:(0,u.jsx)("div",{children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:null===Y||void 0===Y||null===(a=Y.body)||void 0===a?void 0:a.replaceAll("&lt;","<")}})})}):(0,u.jsx)(f.A,{editorData:w,setEditorData:L,dropdownValue:P,setDropdownValue:H,bodydata:O})}),(null===p||void 0===p?void 0:p.body)&&(0,u.jsx)(_.A,{text:p.body})]})]}),""==v&&(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)("label",{htmlFor:!0,children:"Template fields"})})}),(0,u.jsxs)("div",{className:"col-md-9",children:[null===F||void 0===F?void 0:F.map((e=>(0,u.jsx)("span",{style:{cursor:"pointer"},className:"badge blueBadge2 me-2",onClick:()=>(e=>{H(null===e||void 0===e?void 0:e.value),V.push(e)})(e),children:e.label}))),(null===p||void 0===p?void 0:p.is_active)&&(0,u.jsx)(_.A,{text:p.is_active})]})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Re-Mark",(0,u.jsx)("span",{className:"text-danger"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:""!=v?(0,u.jsx)("div",{children:null===Y||void 0===Y?void 0:Y.remark}):(0,u.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Enter ReMark Name",name:"remark",value:(null===Y||void 0===Y?void 0:Y.remark)||"",onChange:e=>$(e),disabled:""!=v})})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)("label",{htmlFor:!0,children:"Is Active"})})}),(0,u.jsxs)("div",{className:"col-md-9",children:[(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)("input",{type:"checkbox",placeholder:"Is Active",checked:S,onChange:e=>k(!S),disabled:""!=v})}),(null===p||void 0===p?void 0:p.is_active)&&(0,u.jsx)(_.A,{text:p.is_active})]})]}),(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:""==v&&(0,u.jsx)(o.Sv,{type:"button",classNames:"btn btn-primary gradientBg",handleClick:e=>(async()=>{Y.body=w,Y.is_active=S,Y.field=V;const e=await(0,h.i6)(x.Ch,Y);e.isValid?(b({}),m?(Y._id=R,g(d.JN.updateEmailTemplateRequest(Y)),c(),i()):(g(d.JN.addEmailTemplateRequest(Y)),c())):(b(e.errors),console.log(e.errors,"formattedErrors"))})(),text:(m?"Update":"Create")+" Template"})})]})})]})})},j=e=>{const{ActionList:a,isLoading:l,toggleOpenAction:i,currentPage:d,setCurrentPage:n,setSelectedActionData:c,onHandleDeleteAction:p,onHandleViewModal:b}=e,[x,h]=(0,t.useState)(a),[_,f]=((0,s.wA)(),(0,t.useState)(!1)),[g,j]=(0,t.useState)([]);(0,t.useEffect)((()=>{h(a)}),[a]);const N=(0,t.useMemo)((()=>({sn:(e,a)=>(0,u.jsx)("span",{children:a+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,m.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>r()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,u.jsxs)("div",{className:"actionGroup d-flex gap-2",children:[(0,u.jsx)(o.Sv,{text:"Update",classNames:"btn btn-primary",handleClick:()=>{c(e),i()}}),(0,u.jsx)(o.Sv,{text:"Delete",handleClick:()=>p(null===e||void 0===e?void 0:e.id),classNames:"btn btn-danger"})]})})),[c,i,p,b]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.A,{data:x,fields:[{key:"sn",label:"S.N"},{key:"action_name",label:"Action Name"},{key:"action_type",label:"Action Type"},{key:"action_type",label:"Action Type"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},{key:"action",label:"Action"}],isLoading:l,pagination:!0,currentPage:d,setCurrentPage:n,totalPages:null===x||void 0===x?void 0:x.totalPages,tableName:"Action",scopedSlots:N})})};l(30454);var N=l(52027),E=(l(39041),l(67565));const A=()=>{const e=(0,s.wA)(),[a,l]=(0,t.useState)(!1),{getActionTemplatePending:n,getActionTemplateRes:o,getActionTemplateError:c,getEmailTemplatePending:r,getEmailTemplateRes:m,getEmailTemplateError:v,deleteEmailTemplatePending:x,deleteEmailTemplateRes:h,deleteEmailTemplateError:_,DeleteActionTemplatePending:f,DeleteActionTemplateRes:A,DeleteActionTemplateError:y}=(0,s.d4)((e=>e.emailtemplate)),[T,S]=(0,t.useState)([]),[k,C]=(0,t.useState)(1),[D,w]=(0,t.useState)(""),[L,R]=(0,t.useState)(""),[M,P]=(0,t.useState)(),[H,O]=(0,t.useState)(!1),[J,F]=(0,t.useState)(""),[I,V]=(0,t.useState)(!1),[q,Y]=(0,t.useState)([]),[B,U]=(0,t.useState)(),[X,$]=(0,t.useState)(!1),G=e=>{F(e),Q()};(0,t.useEffect)((()=>{z(),K()}),[k]);const z=()=>{const a={page:k,limit:N.X$.limit};e(d.JN.getEmailTemplateRequest(a))},K=()=>{const a={page:k,limit:N.X$.limit};e(d.JN.getActionTemplateRequest(a))};(0,t.useEffect)((()=>{if(!n){if(c)return void Y([]);var e,a,l,t;if(o)if(200==(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.code))Y(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(l=a.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data)}}),[c,o,n]),(0,t.useEffect)((()=>{if(!r){if(v)return void S([]);var e,a,l;if(m)if(200==(null===m||void 0===m||null===(e=m.data)||void 0===e?void 0:e.code))S(null===m||void 0===m||null===(a=m.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.data)}}),[r,m,v]),(0,t.useEffect)((()=>{if(!x){if(_)return void e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_EMAIL_TEMPLATE_STORE"));var a;if(h)200==(null===h||void 0===h||null===(a=h.data)||void 0===a?void 0:a.code)&&(e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_EMAIL_TEMPLATE_STORE")),z())}}),[h,_,x]),(0,t.useEffect)((()=>{if(!f){if(y)return void e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_ACTION_TEMPLATE_STORE"));var a;if(A)200==(null===A||void 0===A||null===(a=A.data)||void 0===a?void 0:a.code)&&(e(d.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_DELETE_ACTION_TEMPLATE_STORE")),K())}}),[h,y,f]);const Q=e=>{l(!a),"view"==e&&F("")},W=e=>{V(!I)},Z=(0,t.useMemo)((()=>T),[T]),ee=(0,t.useMemo)((()=>q),[q]);return(0,u.jsxs)("div",{className:"cardBox mb-3 mt-3 pt-5 myRequest",children:[(0,u.jsxs)("ul",{className:"nav nav-tabs leaveTabs mb-4",children:[(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("button",{className:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#createEmailTemplate",type:"button",children:"Create Email Template"})}),(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("button",{className:"nav-link","data-bs-toggle":"tab","data-bs-target":"#addAction",type:"button",children:"Add Action"})})]}),(0,u.jsxs)("div",{className:"tab-content",children:[(0,u.jsxs)("div",{className:"tab-pane fade active show",id:"createEmailTemplate",children:[(0,u.jsx)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:(0,u.jsx)(i.A,{btnClassName:"btn btn-primary gradientBg",onClickFun:()=>Q(),children:"Create New Email Template"})}),(0,u.jsx)(p,{TemplateList:Z,isLoading:r,toggleOffcanvas:Q,setSelectedTemplateData:w,onHandleDeleteModal:e=>{O(!H),P(e)},currentPage:k,setCurrentPage:C,onHandleViewModal:G}),(0,u.jsx)(g,{getAllEmailTemplalte:z,isOpenEmailType:a,toggleOffcanvas:Q,setSelectedTemplateData:w,selectedTemplateData:D,onHandleViewModals:J})]}),(0,u.jsxs)("div",{className:"tab-pane fade active",id:"addAction",children:[(0,u.jsx)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:(0,u.jsx)(i.A,{btnClassName:"btn btn-primary gradientBg",onClickFun:()=>W(),children:"Add Action"})}),(0,u.jsx)(j,{ActionList:ee,isLoading:r,toggleOpenAction:W,setSelectedActionData:R,onHandleDeleteAction:e=>{$(!X),U(e)},currentPage:k,setCurrentPage:C,onHandleViewModal:G}),(0,u.jsx)(E.A,{TemplateList:Z,getAllAction:K,toggleOpenAction:W,openAction:I,setSelectedActionData:R,selectedActionData:L,onHandleViewModals:J})]})]}),X&&(0,u.jsx)(b.A,{onApproveReject:a=>{if(a){const a={_id:B};e(null===d.JN||void 0===d.JN?void 0:d.JN.DeleteActionTemplateRequest(a)),$(!X)}else $(!X)},isShow:X,desc:"You want to delete this Action",btnRightLoading:f}),H&&(0,u.jsx)(b.A,{onApproveReject:a=>{if(a){const a={_id:M};e(null===d.JN||void 0===d.JN?void 0:d.JN.deleteEmailTemplateRequest(a)),O(!H)}else O(!H)},isShow:H,desc:"You want to delete this Email Template",btnRightLoading:x})]})}}}]);
//# sourceMappingURL=6736.bbdebf41.chunk.js.map