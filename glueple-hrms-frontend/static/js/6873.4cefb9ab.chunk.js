/*! For license information please see 6873.4cefb9ab.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[6873],{13739:()=>{},92342:()=>{},77848:(e,t,r)=>{r.d(t,{FQ:()=>h,aF:()=>_});var n=r(65043),o=r(65173),i=Object.defineProperty,s=(e,t,r)=>((e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!==typeof t?t+"":t,r);const a=new Array(256).fill("").map(((e,t)=>("0"+t.toString(16)).slice(-2)));function c(){const e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+a[255&e]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255]+a[255&t]+a[t>>8&255]+a[t>>16&255]+a[t>>24&255]+a[255&r]+a[r>>8&255]+a[r>>16&255]+a[r>>24&255]+a[255&n]+a[n>>8&255]+a[n>>16&255]+a[n>>24&255]}const l=class e{constructor(e,t){s(this,"_lifecycle"),s(this,"_element"),s(this,"_releaseLock",null),s(this,"_value",null),s(this,"_afterMountCallbacks",[]),s(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),s(this,"release",function(e){let t=null;return function(){return t||(t={current:e(...arguments)}),t.current}}((()=>{const{_releaseLock:e,_state:t,_element:r,_lifecycle:n}=this;t.mountingInProgress?t.mountingInProgress.then((()=>n.unmount({element:r,mountResult:this.value}))).catch((e=>{console.error("Semaphore unmounting error:",e)})).then(e.resolve).then((()=>{this._value=null})):(t.destroyedBeforeInitialization=!0,e.resolve())}))),this._element=e,this._lifecycle=t,this._lock()}get value(){return this._value}unsafeSetValue(e){this._value=e,this._afterMountCallbacks.forEach((t=>t(e))),this._afterMountCallbacks=[]}runAfterMount(e){const{_value:t,_afterMountCallbacks:r}=this;t?e(t):r.push(e)}_lock(){const{_semaphores:t}=e,{_state:r,_element:n,_lifecycle:o}=this,i=t.get(n)||Promise.resolve(null),s=function(){const e={resolve:null,promise:null};return e.promise=new Promise((t=>{e.resolve=t})),e}();this._releaseLock=s;const a=i.then((()=>r.destroyedBeforeInitialization?Promise.resolve(void 0):(r.mountingInProgress=o.mount().then((e=>(e&&this.unsafeSetValue(e),e))),r.mountingInProgress))).then((async e=>{e&&o.afterMount&&await o.afterMount({element:n,mountResult:e})})).then((()=>s.promise)).catch((e=>{console.error("Semaphore mounting error:",e)})).then((()=>{t.get(n)===a&&t.delete(n)}));t.set(n,a)}};s(l,"_semaphores",new Map);let u=l;const d=n.createContext(null),h=e=>{const{id:t,context:r,watchdogConfig:o,children:i,config:s,onReady:a,contextWatchdog:l,isLayoutReady:u=!0,onError:h=(e,t)=>console.error(e,t)}=e,p=(()=>{const e=(0,n.useRef)(!1);return(0,n.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e})(),m=(0,n.useRef)(null),[f,g]=(0,n.useState)({status:"initializing"});function _(e){return m.current===e&&p.current}return(0,n.useEffect)((()=>{u?function(){const e=(m.current=c(),m.current),t=new l(r,o);t.on("error",((t,r)=>{_(e)&&h(r.error,{phase:"runtime",willContextRestart:r.causesRestart})})),t.on("stateChange",(()=>{a&&"ready"===t.state&&_(e)&&a(t.context,t)})),t.create(s).then((()=>{_(e)?g({status:"initialized",watchdog:t}):t.destroy()})).catch((t=>{_(e)&&(h(t,{phase:"initialization",willContextRestart:!1}),g({status:"error",error:t}))}))}():g({status:"initializing"})}),[t,u]),(0,n.useEffect)((()=>()=>{"initialized"===f.status&&f.watchdog.destroy()}),[f]),n.createElement(d.Provider,{value:f},i)},p=e=>t=>(e=>!!e&&"object"===typeof e&&"status"in e&&["initializing","initialized","error"].includes(e.status))(t)&&t.status===e,m=p("initializing"),f=e=>p("initialized")(e)&&"ready"===e.watchdog.state,g="Lock from React integration (@ckeditor/ckeditor5-react)";class _ extends n.Component{constructor(e){super(e),s(this,"domContainer",n.createRef()),s(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:e}=window;if(!e)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[t]=e.split(".").map(Number);t>=42||e.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:e}=this;return e?e.value:null}get watchdog(){const{_semaphoreValue:e}=this;return e?e.watchdog:null}get editor(){const{_semaphoreValue:e}=this;return e?e.instance:null}shouldComponentUpdate(e){const{props:t,editorSemaphore:r}=this;return e.id!==t.id||(e.disableWatchdog!==t.disableWatchdog||(r&&(r.runAfterMount((r=>{let{instance:n}=r;this._shouldUpdateEditorData(t,e,n)&&n.data.set(e.data)})),"disabled"in e&&r.runAfterMount((t=>{let{instance:r}=t;e.disabled?r.enableReadOnlyMode(g):r.disableReadOnlyMode(g)}))),!1))}componentDidMount(){m(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){m(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new u(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:e=>{let{mountResult:t}=e;const{onReady:r}=this.props;r&&null!==this.domContainer.current&&r(t.instance)},unmount:async e=>{let{element:t,mountResult:r}=e;const{onAfterDestroy:n}=this.props;try{await this._destroyEditor(r),t.innerHTML=""}finally{n&&n(r.instance)}}})}render(){return n.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog){return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null}}const e=(()=>f(this.context)?new y(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig))(),t={current:0};return e.setCreator((async(r,n)=>{var o;const{editorSemaphore:i}=this,{onAfterDestroy:s}=this.props;t.current>0&&s&&(null==(o=null==i?void 0:i.value)?void 0:o.instance)&&s(i.value.instance);const a=await this._createEditor(r,n);return i&&t.current>0&&(i.unsafeSetValue({instance:a,watchdog:e}),setTimeout((()=>{this.props.onReady&&this.props.onReady(e.editor)}))),t.current++,a})),e.on("error",((e,t)=>{let{error:r,causesRestart:n}=t;(this.props.onError||console.error)(r,{phase:"runtime",willEditorRestart:n})})),await e.create(this.domContainer.current,this._getConfig()).catch((e=>{(this.props.onError||console.error)(e,{phase:"initialization",willEditorRestart:!1})})),{watchdog:e,instance:e.editor}}_createEditor(e,t){return this.props.editor.create(e,t).then((e=>{"disabled"in this.props&&this.props.disabled&&e.enableReadOnlyMode(g);const t=e.model.document,r=e.editing.view.document;return t.on("change:data",(t=>{this.props.onChange&&this.props.onChange(t,e)})),r.on("focus",(t=>{this.props.onFocus&&this.props.onFocus(t,e)})),r.on("blur",(t=>{this.props.onBlur&&this.props.onBlur(t,e)})),e}))}async _destroyEditor(e){const{watchdog:t,instance:r}=e;return new Promise(((e,n)=>{setTimeout((async()=>{try{if(t)return await t.destroy(),e();if(r)return await r.destroy(),e();e()}catch(o){console.error(o),n(o)}}))}))}_shouldUpdateEditorData(e,t,r){return e.data!==t.data&&r.data.get()!==t.data}_getConfig(){const e=this.props.config||{};return this.props.data&&e.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...e,initialData:e.initialData||this.props.data||""}}}s(_,"contextType",d),s(_,"propTypes",{editor:o.func.isRequired,data:o.string,config:o.object,disableWatchdog:o.bool,watchdogConfig:o.object,onChange:o.func,onReady:o.func,onFocus:o.func,onBlur:o.func,onError:o.func,disabled:o.bool,id:o.any});class y{constructor(e){s(this,"_contextWatchdog"),s(this,"_id"),s(this,"_creator"),this._contextWatchdog=e,this._id=c()}setCreator(e){this._creator=e}create(e,t){return this._contextWatchdog.add({sourceElementOrData:e,config:t,creator:this._creator,id:this._id,type:"editor"})}on(e,t){this._contextWatchdog.on("itemError",((e,r)=>{let{itemId:n,error:o}=r;n===this._id&&t(null,{error:o,causesRestart:void 0})}))}destroy(){return"ready"===this._contextWatchdog.state?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}const E=(0,n.memo)((0,n.forwardRef)(((e,t)=>{let{id:r,semaphore:o,rootName:i}=e;const s=(0,n.useRef)(null);return(0,n.useEffect)((()=>{let e,t;return o.runAfterMount((r=>{let{instance:n}=r;if(!s.current)return;t=n;const{ui:o,model:a}=t,c=a.document.getRoot(i);c&&t.ui.getEditableElement(i)&&t.detachEditable(c),e=o.view.createEditable(i,s.current),o.addEditable(e),n.editing.view.forceRender()})),()=>{if(t&&"destroyed"!==t.state&&s.current){const e=t.model.document.getRoot(i);e&&t.detachEditable(e)}}}),[o.revision]),n.createElement("div",{key:o.revision,id:r,ref:w(t,s)})})));E.displayName="EditorEditable";const b=(0,n.forwardRef)(((e,t)=>{let{editor:r}=e;const o=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const e=o.current;if(!r||!e)return;const t=r.ui.view.toolbar.element;return e.appendChild(t),()=>{e.contains(t)&&e.removeChild(t)}}),[r&&r.id]),n.createElement("div",{ref:w(o,t)})}));b.displayName="EditorToolbarWrapper"}}]);
//# sourceMappingURL=6873.4cefb9ab.chunk.js.map