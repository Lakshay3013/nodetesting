"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[5461],{45185:(e,a,l)=>{l.d(a,{A:()=>n});l(65043);var s=l(49985),i=l(86178),t=l.n(i),d=l(70579);const n=e=>{var a;const{openModel:l,handleOpenClose:i,progressData:n,processType:o}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"offcanvas offcanvas-end applyLeaveCanvas "+(l?"show":""),tabIndex:-1,id:"attendanceCorrection",style:{visibility:l?"visible":"hidden",width:"800px"},children:[(0,d.jsxs)("div",{className:"offcanvas-header",children:[(0,d.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary text-capitalize",children:[(0,s.Sn)(o)," Process"]}),(0,d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>{i()}})]}),(0,d.jsx)("div",{className:"offcanvas-body",children:(0,d.jsx)("div",{className:"detailsCandidate",children:(0,d.jsxs)("ul",{className:"detailsList",children:[(0,d.jsxs)("li",{className:"select active",children:[(0,d.jsx)("figure",{className:"m-0",children:(0,d.jsx)("img",{src:"images/greenRight.svg",alt:"",width:45})}),(0,d.jsxs)("strong",{className:"text-capitalize",children:[(0,s.Sn)(o)," Applied",(0,d.jsx)("b",{children:n&&(null===n||void 0===n?void 0:n.length)>0&&(null===(a=n[0])||void 0===a?void 0:a.date)})]})]}),n&&(null===n||void 0===n?void 0:n.length)>0&&(()=>{var e,a;return null===(e=n[0])||void 0===e||null===(a=e.approver_data)||void 0===a?void 0:a.map(((e,a)=>{const l="approve"===e.action_type,s="reject"===e.action_type;return(0,d.jsxs)("li",{className:"select "+(l?"active":s?"nonactive":""),children:[(0,d.jsx)("figure",{className:"m-0",children:(0,d.jsx)("img",{src:l?"images/greenRight.svg":s?"images/redCross.svg":"images/greenRight.svg",alt:"",width:"45"})}),(0,d.jsxs)("strong",{children:[l?"Approved by ":s?"Rejected by ":"Pending by ",`${null===e||void 0===e?void 0:e.name} ( ${null===e||void 0===e?void 0:e.role_name} )`,(0,d.jsx)("b",{children:t()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY LT")})," ",(0,d.jsx)("b",{children:null===e||void 0===e?void 0:e.comment})]})]},a)}))})()]})})}),(0,d.jsx)("div",{className:"offcanvas-footer",children:(0,d.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3"})})]}),l&&(0,d.jsx)("div",{className:"modal-backdrop fade show"})]})}},65461:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var s=l(65043),i=l(85831),t=l(29829),d=l(45531),n=l(22166),o=l(94174),r=l(52027),c=l(90607),v=l(80728),m=l(56462),p=l(26181),u=l(70579);const x=e=>{const{t:a}=(0,c.K)(),{updateClaimPending:l,createClaimPending:t}=(0,n.d4)((e=>e.travelAndClaim)),{selectedTravelClaimData:o,openModel:r,handleOpenClose:x,createUpdateClaimRequest:h,travelTypeListData:f,allTravelApprovalData:b,actionBtnType:j}=e,[g,N]=(0,s.useState)({}),[C,y]=(0,s.useState)(""),[_,T]=(0,s.useState)({travelType:null,billNo:"",amount:"",date:"",description:"",isDraft:!1}),A=(0,s.useRef)(null),S=(e,a)=>{var l;const s=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:i,type:t,checked:d}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};T((e=>({...e,[s]:"checkbox"===t?d:i}))),N((e=>({...e,[s]:void 0})))},k=async e=>{const a=await(0,p.i6)(v.fi,_);if(a.isValid){const{billNo:a,amount:l,date:s,description:i,travelType:t,selectTravel:d}=_,n=new FormData;n.append("travel_id",null===d||void 0===d?void 0:d.value),n.append("travel_type_id",null===t||void 0===t?void 0:t.value),n.append("bill_no",a),n.append("amount",l),n.append("date",s),n.append("description",i),n.append("bill_image",C),"draft"===e&&n.append("is_draft",!0),"submit"===e&&n.append("is_draft",!1),o&&n.append("_id",null===o||void 0===o?void 0:o._id),h(n)}else N(a.errors)};(0,s.useEffect)((()=>()=>{D()}),[r]),(0,s.useEffect)((()=>{o&&T({selectTravel:{label:null===o||void 0===o?void 0:o.travel,value:null===o||void 0===o?void 0:o.travel_id},travelType:{label:null===o||void 0===o?void 0:o.type,value:null===o||void 0===o?void 0:o.travel_type_id},billNo:null===o||void 0===o?void 0:o.bill_no,amount:null===o||void 0===o?void 0:o.amount,description:null===o||void 0===o?void 0:o.description,date:null===o||void 0===o?void 0:o.date,isDraft:null===o||void 0===o?void 0:o.is_draft})}),[o]);const D=()=>{T({selectTravel:null,travelType:null,billNo:"",amount:"",date:"",description:""}),N({})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(r?"show":""),tabIndex:-1,style:{visibility:r?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:["draft"===j?"Draft":o?"Update":"Add"," Travel Claim"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>x("travel_rule")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,u.jsx)("div",{className:"formPanel",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:a("labels.selectTravel"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(m.A,{data:b,placeholder:a("placeholders.selectTravel"),value:(null===_||void 0===_?void 0:_.selectTravel)||"",handleChange:e=>S(e,"selectTravel"),name:"selectTravel"}),(null===g||void 0===g?void 0:g.selectTravel)&&(0,u.jsx)(i.eo,{text:g.selectTravel})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:a("labels.type")}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(m.A,{data:f,placeholder:a("placeholders.type"),value:(null===_||void 0===_?void 0:_.travelType)||"",handleChange:e=>S(e,"travelType"),name:"travelType"}),(null===g||void 0===g?void 0:g.travelType)&&(0,u.jsx)(i.eo,{text:g.travelType})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:a("labels.billNo"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"text",placeholder:a("placeholders.billNo"),value:null===_||void 0===_?void 0:_.billNo,name:"billNo",onChange:e=>S(e)}),(null===g||void 0===g?void 0:g.billNo)&&(0,u.jsx)(i.eo,{text:g.billNo})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:a("labels.amount"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"number",placeholder:a("placeholders.amount"),value:null===_||void 0===_?void 0:_.amount,name:"amount",onChange:e=>S(e)}),(null===g||void 0===g?void 0:g.amount)&&(0,u.jsx)(i.eo,{text:g.amount})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(d.JU,{text:a("labels.date"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.pd,{type:"date",placeholder:a("placeholders.date"),value:null===_||void 0===_?void 0:_.date,name:"date",onChange:e=>S(e)}),(null===g||void 0===g?void 0:g.date)&&(0,u.jsx)(i.eo,{text:g.date})]})]}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)(d.JU,{text:a("labels.description")}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(d.TM,{placeholder:a("placeholders.description"),onChange:e=>S(e),name:"description",value:null===_||void 0===_?void 0:_.description}),(null===g||void 0===g?void 0:g.description)&&(0,u.jsx)(i.eo,{text:g.description})]})]}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)(d.JU,{text:a("labels.billImage")}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)("input",{type:"file",id:"policyFile",name:"poster",className:"form-control ",onChange:e=>{const a=e.target.files[0];y(a)},accept:".png, .jpeg, .doc, .docx, .pdf",ref:A}),(null===g||void 0===g?void 0:g.billImage)&&(0,u.jsx)(i.eo,{text:g.billImage})]})]})]})})}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:[!o&&(0,u.jsx)(i.Sv,{text:"Draft",classNames:"btn btn-org-gradient",handleClick:()=>k("draft"),isDisabled:t}),(0,u.jsx)(i.Sv,{text:j?"Submit":a(o?"btns.update":"btns.submit"),classNames:"btn btn-primary",handleClick:()=>k("submit"),isDisabled:o?l:t})]})})]}),r&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};var h=l(35685),f=l(49985),b=(l(62001),l(45185)),j=l(67053),g=l(73216),N=l(19864);const C=()=>{const{t:e}=(0,c.K)(),a=(0,n.wA)(),l=(0,g.Zp)(),v=(0,f.Yo)("update_travel_claim"),m=(0,f.Yo)("delete_travel_claim"),p=(0,f.Yo)("approval_travel_claim"),C=(0,f.Yo)("draft_travel_claim"),[y,_]=(0,s.useState)(""),{getLeaveProgressPending:T,getLeaveProgressRes:A,getLeaveProgressError:S}=(0,n.d4)((e=>e.leave)),{createClaimPending:k,createClaimRes:D,createClaimError:E,updateClaimPending:w,updateClaimRes:R,updateClaimError:L,deleteClaimPending:P,deleteClaimRes:I,deleteClaimError:M,getClaimPending:q,getClaimRes:O,getClaimError:U,getAllTravelTypePending:H,getAllTravelTypeRes:B,getAllTravelTypeError:F,getAllTravelApprovalDataPending:Y,getAllTravelApprovalDataRes:J,getAllTravelApprovalDataError:z}=(0,n.d4)((e=>e.travelAndClaim)),[$,K]=(0,s.useState)(1),[X,V]=(0,s.useState)(!1),[W,Z]=(0,s.useState)(""),[G,Q]=(0,s.useState)(""),[ee,ae]=(0,s.useState)(""),[le,se]=(0,s.useState)(!1),[ie,te]=(0,s.useState)(""),[de,ne]=(0,s.useState)(""),[oe,re]=(0,s.useState)(!1),[ce,ve]=(0,s.useState)(!1),[me,pe]=(0,s.useState)(!1),[ue,xe]=(0,s.useState)("submit"),[he,fe]=(0,s.useState)(""),be=[{key:"sn",label:"S.N"},{key:"travel",label:"Travel"},{key:"emp_id",label:"Employee Code"},{key:"name",label:"Name"},{key:"approvers_status",label:"Status"},{key:"created_at",label:"Created Date"},{key:"travel_details",label:"Claim Detail"},(v||m||p||C)&&{key:"action",label:"Action"}],je=e=>{fe(e||""),ve(!ce)},ge=e=>{Q(e||""),pe(!me)},Ne=(0,s.useMemo)((()=>({sn:(e,a)=>(0,u.jsx)("span",{children:a+1}),approvers_status:e=>(0,u.jsx)("span",{className:`badge ${(0,f.XN)(null!==e&&void 0!==e&&e.is_draft?"inactive":e.approvers_status)} text-capitalize`,children:null!==e&&void 0!==e&&e.is_draft?"Draft":e.approvers_status}),travel_details:e=>(0,u.jsx)("span",{onClick:()=>ge(e),children:(0,u.jsx)("img",{src:"images/info-orange-bg.svg",alt:!0,width:"32"})}),created_at:e=>(0,u.jsx)("span",{children:(0,f.N_)(null===e||void 0===e?void 0:e.created_at)}),action:e=>(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"btn-group actionDrp",children:[(0,u.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,u.jsxs)("ul",{className:"dropdown-menu",children:[p&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{Ce("claim",null===e||void 0===e?void 0:e._id)},children:[(0,u.jsx)(d.In,{className:"fa fa-check me-1"}),"Approval Status"]})}),(null===e||void 0===e?void 0:e.is_draft)&&(0,u.jsxs)(u.Fragment,{children:[C&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{Ae(e,"draft")},children:[(0,u.jsx)(d.In,{className:"fa fa-file me-1"}),"Draft"]})}),v&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{Ae(e)},children:[(0,u.jsx)(d.In,{className:"fa fa-edit me-1"}),"Update"]})}),m&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>Te(e._id),children:[(0,u.jsx)(d.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})]})})})),[]),Ce=(e,l)=>{if(e||l){const s={id:l||"",type:e||""};a(o.OH.getLeaveProgressRequest(s))}re(!oe)};(0,s.useEffect)((()=>{if(!T){if(S)return;A&&200===(null===A||void 0===A?void 0:A.code)&&ne(null===A||void 0===A?void 0:A.data)}}),[A,S,T]);const ye=(e,a)=>{e?(Q(e),te(a)):Q(""),V(!X)};(0,s.useEffect)((()=>{_e()}),[$,ue]);const _e=()=>{const e={is_draft:"draft"===ue,page:$,limit:r.X$.limit};a(o.o1.getClaimRequest(e))};(0,s.useEffect)((()=>{if(!q){if(U)return;O&&200===(null===O||void 0===O?void 0:O.code)&&_(null===O||void 0===O?void 0:O.data)}}),[q,O,U]);(0,s.useEffect)((()=>{if(!k){if(E)return void a(o.o1.handleClearTravelStore("HANDLE_CLEAR_CREATE_CLAIM_STORE"));D&&200===(null===D||void 0===D?void 0:D.code)&&(a(o.o1.handleClearTravelStore("HANDLE_CLEAR_CREATE_CLAIM_STORE")),ye(),_e())}}),[E,D,k]),(0,s.useEffect)((()=>{if(!w){if(L)return void a(o.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_CLAIM_STORE"));R&&200===(null===R||void 0===R?void 0:R.code)&&(a(o.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_CLAIM_STORE")),ye(),_e())}}),[L,R,w]);const Te=e=>{e&&ae(e),se(!le)};(0,s.useEffect)((()=>{if(!P){if(M)return void a(o.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_CLAIM_STORE"));I&&200===(null===I||void 0===I?void 0:I.code)&&(a(o.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_CLAIM_STORE")),_e(),se(!le))}}),[M,I,P]);const Ae=(e,s)=>{e&&a(o.o1.selectedTravelClaimDetail({...e,action_type:s})),l("add-update-travel-claims")};return(0,u.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,u.jsxs)("div",{className:"cardHead d-flex",children:[(0,u.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,u.jsx)("h4",{className:"ms-2 ",children:"Travel Claim"})]}),(0,u.jsx)(i.Sv,{text:"Add Travel Claim",classNames:"btn btn-primary",icon:(0,u.jsx)(d.In,{className:"fa fa-plus"}),handleClick:()=>Ae(),slug:"add_travel_claim"})]}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"requestdata",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-6",children:(0,u.jsxs)("div",{className:"d-flex align-items-center mb-4 ",children:[(0,u.jsx)("span",{className:"fw-bold fs-6 text-black",children:"Claim Status"}),(0,u.jsxs)("ul",{className:"nav nav-tabs leaveTabs ms-3",children:[(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)(i.Sv,{text:"Submitted",classNames:"nav-link px-4 "+("submit"===ue?"active":""),handleClick:()=>xe("submit")})}),(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)(i.Sv,{text:"Draft",classNames:"nav-link px-4 "+("draft"==ue?"active":""),handleClick:()=>xe("draft")})})]})]})})})}),(0,u.jsx)(t.Ak,{data:null===y||void 0===y?void 0:y.data,fields:be,isLoading:q,pagination:!0,currentPage:$,setCurrentPage:K,totalPages:null===y||void 0===y?void 0:y.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:Ne}),X&&(0,u.jsx)(x,{handleOpenClose:ye,openModel:X,createUpdateClaimRequest:e=>{G?(e._id=null===G||void 0===G?void 0:G._id,a(o.o1.updateClaimRequest(e))):a(o.o1.createClaimRequest(e))},selectedTravelClaimData:G,actionBtnType:ie}),le&&(0,u.jsx)(h.A,{onApproveReject:e=>{if(e){const e={_id:ee};a(null===o.o1||void 0===o.o1?void 0:o.o1.deleteClaimRequest(e))}else Te()},isShow:le,desc:e("alerts.deletePopup.desc").replace("$1","Travel Claim"),btnRightLoading:P,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")}),oe&&(0,u.jsx)(b.A,{openModel:oe,handleOpenClose:Ce,progressData:de,processType:"Travel & Claim"}),ce&&(0,u.jsx)(j.A,{handleOpenClose:je,openModel:ce,billImageData:he}),me&&(0,u.jsx)(N.A,{handleOpenClose:ge,openModel:me,selectedTravelClaimData:G,toggleBillDetail:je})]})}},67053:(e,a,l)=>{l.d(a,{A:()=>d});l(65043);var s=l(90607),i=l(45531),t=l(70579);const d=e=>{const{t:a}=(0,s.K)(),{billImageData:l,openModel:d,handleOpenClose:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"modal fade attendanceLog "+(d?"show d-block":""),tabIndex:"-1",style:{zIndex:1060},"aria-hidden":!d,children:(0,t.jsx)("div",{className:"modal-dialog modal-dialog-centered",style:{maxWidth:"700px"},children:(0,t.jsxs)("div",{className:"modal-content rounded-0 border-0",children:[(0,t.jsxs)("div",{className:"modal-header ",children:[(0,t.jsx)("h1",{className:"modal-title fs-5 fw-bold text-primary",children:"Bill"}),(0,t.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:n})]}),(0,t.jsx)("div",{className:"modal-body pt-3",children:(0,t.jsx)("div",{className:"formPanel",children:null!==l&&void 0!==l&&l.bill_image?(0,t.jsx)("div",{className:"d-flex gap-3",children:(0,t.jsx)("img",{src:null===l||void 0===l?void 0:l.bill_image,alt:"Bill Image",height:210,width:210})}):(0,t.jsxs)("span",{className:"d-flex justify-content-center",children:[" ",(0,t.jsx)(i.eo,{text:"No Image Available"})]})})})]})})}),d&&(0,t.jsx)("div",{className:"modal-backdrop fade show",style:{zIndex:1055}})]})}},19864:(e,a,l)=>{l.d(a,{A:()=>r});var s=l(65043),i=l(90607),t=l(29829),d=l(49985),n=l(70579);const o=[{travel_type:"car",amount:"111",date:"2024-03-22",bill_no:"1234"}],r=e=>{const{t:a}=(0,i.K)(),{selectedTravelClaimData:l,openModel:r,handleOpenClose:c,toggleBillDetail:v}=e,m=(0,s.useMemo)((()=>({sn:(e,a)=>(0,n.jsx)("span",{children:a+1}),bill_image:e=>(0,n.jsx)("span",{onClick:()=>v(e),children:(0,n.jsx)("img",{src:"images/view-icon.svg",alt:!0,width:"32"})}),date:e=>(0,n.jsx)("span",{children:(0,d.N_)(null===e||void 0===e?void 0:e.created_at)})})),[l]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"offcanvas offcanvas-end  "+(r?"show":""),tabIndex:-1,style:{visibility:r?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,n.jsxs)("div",{className:"offcanvas-header",children:[(0,n.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:"Travel Detail"}),(0,n.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>c()})]}),(0,n.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,n.jsx)("div",{className:"formPanel",children:(0,n.jsx)(t.Ak,{data:(null===l||void 0===l?void 0:l.travel_details)||o,fields:[{key:"sn",label:"S.N"},{key:"travel_type_name",label:"Travel Type"},{key:"amount",label:"Amount"},{key:"date",label:"Date"},{key:"bill_no",label:"Bill No"},{key:"bill_image",label:"Bill "}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:m})})}),(0,n.jsx)("div",{className:"offcanvas-footer"})]}),r&&(0,n.jsx)("div",{className:"modal-backdrop fade show"})]})}}}]);
//# sourceMappingURL=5461.9cc81dca.chunk.js.map