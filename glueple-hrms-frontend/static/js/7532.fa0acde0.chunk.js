"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[7532],{77532:(e,l,a)=>{a.r(l),a.d(l,{default:()=>h});var i=a(65043),d=a(92250),s=a(56462),t=a(45531),o=a(26181),n=a(80728),r=a(22166),v=a(90607),c=a(52027),m=a(70579);const u=e=>{const{creditDebitLeavePending:l,getCreditDebitLeavePending:a}=(0,r.d4)((e=>null===e||void 0===e?void 0:e.leave)),{t:u}=(0,v.K)(),{selectedCreditDebitLeaveData:x,openModel:p,handleOpenClose:b,handleCreditDebitLeave:h,allEmployeeList:f,getCreditDebitLeaveById:j,creditDebitLeaveByIdData:y,leaveTypeListData:g}=e,[L,N]=(0,i.useState)({}),[D,C]=(0,i.useState)({creditDebit:null,employee:null,leaveType:null,noOfLeave:"",reason:""}),_=(e,l)=>{var a;const i=l||(null===(a=e.target)||void 0===a?void 0:a.name),{value:d,type:s,checked:t}=e.target?e.target:{value:e};"employee"===i&&j(null===d||void 0===d?void 0:d.value),C((e=>({...e,[i]:"checkbox"===s?t:d}))),N((e=>({...e,[i]:void 0})))};(0,i.useEffect)((()=>()=>{E()}),[p]),(0,i.useEffect)((()=>{x&&C({creditDebit:{value:null===x||void 0===x?void 0:x.credit_debit_id,label:null===x||void 0===x?void 0:x.credit_debit_name},employee:{value:null===x||void 0===x?void 0:x.credit_debit_id,label:null===x||void 0===x?void 0:x.credit_debit_name},leaveType:{value:null===x||void 0===x?void 0:x.leave_type,label:null===x||void 0===x?void 0:x.leave_type},noOfLeave:null===x||void 0===x?void 0:x.no_of_leave,reason:null===x||void 0===x?void 0:x.remark})}),[x]);const E=()=>{C({creditDebit:null,employee:null,leaveType:null,noOfLeave:"",reason:""}),N({})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"offcanvas offcanvas-end  "+(p?"show":""),tabIndex:-1,style:{visibility:p?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,m.jsxs)("div",{className:"offcanvas-header",children:[(0,m.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:u("headings.creditDebitLeaves")}),(0,m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>b()})]}),(0,m.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,m.jsx)("div",{className:"formPanel",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(t.JU,{text:u("labels.creditDebit"),required:!0})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsxs)("div",{className:"form-group mb-3",children:[(0,m.jsx)(s.A,{data:c.P$,placeholder:u("placeholders.select"),value:(null===D||void 0===D?void 0:D.creditDebit)||"",handleChange:e=>_(e,"creditDebit"),name:"creditDebit"}),(null===L||void 0===L?void 0:L.creditDebit)&&(0,m.jsx)(d.eo,{text:L.creditDebit})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(t.JU,{text:u("labels.employee"),required:!0})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsxs)("div",{className:"form-group mb-3",children:[(0,m.jsx)(s.A,{data:f,placeholder:u("placeholders.employee"),value:(null===D||void 0===D?void 0:D.employee)||"",handleChange:e=>_(e,"employee"),name:"employee"}),(null===L||void 0===L?void 0:L.employee)&&(0,m.jsx)(d.eo,{text:L.employee})]})}),(null===D||void 0===D?void 0:D.employee)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"col-md-3"}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("div",{className:"card-header",children:(0,m.jsx)(t.L1,{text:"Total Leaves",className:"text-orange",style:{fontSize:"16px"}})}),(0,m.jsx)("div",{className:"card-body ",children:a?(0,m.jsx)(d.L,{isShow:a,size:"md"}):y&&(null===y||void 0===y?void 0:y.length)>0?null===y||void 0===y?void 0:y.map(((e,l)=>(0,m.jsxs)("div",{className:"d-flex gap-5",children:[(0,m.jsx)("div",{children:(0,m.jsx)(t.L1,{text:null===e||void 0===e?void 0:e.leave_name,className:"text-primary"})}),(0,m.jsx)(t.L1,{text:" :"}),(0,m.jsx)("div",{children:(0,m.jsx)(t.L1,{text:null===e||void 0===e?void 0:e.leave_balance,className:"text-danger"})})]},l))):(0,m.jsx)(t.L1,{text:"NO Leave's Available",className:"text-center text-danger"})})]})})})]}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(t.JU,{text:u("labels.leaveType"),required:!0})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsxs)("div",{className:"form-group mb-3",children:[(0,m.jsx)(s.A,{data:g,placeholder:u("placeholders.select"),value:(null===D||void 0===D?void 0:D.leaveType)||"",handleChange:e=>_(e,"leaveType"),name:"leaveType"}),(null===L||void 0===L?void 0:L.leaveType)&&(0,m.jsx)(d.eo,{text:L.leaveType})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(t.JU,{text:u("labels.noOfLeave"),required:!0})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsxs)("div",{className:"form-group mb-3",children:[(0,m.jsx)(t.pd,{type:"number",placeholder:u("placeholders.noOfLeave"),value:null===D||void 0===D?void 0:D.noOfLeave,name:"noOfLeave",onChange:e=>_(e)}),(null===L||void 0===L?void 0:L.noOfLeave)&&(0,m.jsx)(d.eo,{text:L.noOfLeave})]})}),(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(t.JU,{text:u("labels.reason"),required:!0})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsxs)("div",{className:"form-group mb-3",children:[(0,m.jsx)(t.TM,{placeholder:u("placeholders.reason"),onChange:e=>_(e),name:"reason",value:null===D||void 0===D?void 0:D.reason}),(null===L||void 0===L?void 0:L.reason)&&(0,m.jsx)(d.eo,{text:L.reason})]})})]})})}),(0,m.jsx)("div",{className:"offcanvas-footer",children:(0,m.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,m.jsx)(d.Sv,{text:u("btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,o.i6)(n.kA,D);if(e.isValid){const{creditDebit:e,employee:l,leaveType:a,noOfLeave:i,reason:d}=D,s={credit_debit:null===e||void 0===e?void 0:e.value,employee_id:null===l||void 0===l?void 0:l.value,leave_type:null===a||void 0===a?void 0:a.value,no_of_leave:i,remark:d};h(s)}else N(e.errors)})(),isLoading:l})})})]}),p&&(0,m.jsx)("div",{className:"modal-backdrop fade show"})]})};var x=a(29829);a(49985),a(86178);const p=e=>{const{t:l}=(0,v.K)(),{allCreditDebitLeave:a,isLoading:d,toggleCreditDebitLeave:s,handleCreditDebitLeaveDeleteModal:t,currentPage:o,setCurrentPage:n}=e,[r,c]=(0,i.useState)(a);(0,i.useEffect)((()=>{c(a)}),[a]);const u=(0,i.useMemo)((()=>({sn:(e,l)=>(0,m.jsx)("span",{children:l+1})})),[s]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(x.Ak,{data:null===r||void 0===r?void 0:r.data,fields:[{key:"sn",label:"S.N"},{key:"credit_debit",label:"Credit Debit"},{key:"employee_Name",label:"Employee Name"},{key:"leave_type",label:"Leave Type"},{key:"no_of_leave",label:"No Of Leave "},{key:"remark",label:"Reason"}],isLoading:d,pagination:!0,currentPage:o,setCurrentPage:n,totalPages:null===r||void 0===r?void 0:r.totalPages,tableName:"Credit Debit Leaves",scopedSlots:u})})};var b=a(94174);const h=()=>{const e=(0,r.wA)(),{getAllEmployeeRes:l,getAllEmployeeError:a,getAllEmployeePending:s}=(0,r.d4)((e=>e.employee)),{creditDebitLeavePending:t,creditDebitLeaveRes:o,creditDebitLeaveError:n,getCreditDebitLeavePending:v,getCreditDebitLeaveRes:c,getCreditDebitLeaveError:x}=(0,r.d4)((e=>e.leave)),{getLeaveTypeListPending:h,getLeaveTypeListRes:f,getLeaveTypeListError:j}=(0,r.d4)((e=>e.leave)),[y,g]=(0,i.useState)(!1),[L,N]=(0,i.useState)(""),[D,C]=(0,i.useState)(""),[_,E]=(0,i.useState)(""),T=()=>{g(!y)};(0,i.useEffect)((()=>{k(),O()}),[]);const k=()=>{l&&200===(null===l||void 0===l?void 0:l.code)?e(b.mM.getAllEmployeeRequest()):N(null===l||void 0===l?void 0:l.data)};(0,i.useEffect)((()=>{if(!s){if(a)return;l&&200===(null===l||void 0===l?void 0:l.code)&&N(null===l||void 0===l?void 0:l.data)}}),[l,a,s]);(0,i.useEffect)((()=>{if(!t){if(n)return void e(b.OH.handleClearLeaveStore("HANDLE_CREDIT_DEBIT_LEAVE_STORE"));o&&200===(null===o||void 0===o?void 0:o.code)&&(e(b.OH.handleClearLeaveStore("HANDLE_CREDIT_DEBIT_LEAVE_STORE")),T())}}),[o,n,t]);(0,i.useEffect)((()=>{if(!v){if(x)return;c&&200===(null===c||void 0===c?void 0:c.code)&&C(null===c||void 0===c?void 0:c.data)}}),[c,x,v]);const O=l=>{e(b.OH.getLeaveTypeListRequest())};return(0,i.useEffect)((()=>{if(!h){if(j)return;f&&200===(null===f||void 0===f?void 0:f.code)&&E(null===f||void 0===f?void 0:f.data)}}),[f,j,h]),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"ticketScoreSection",children:(0,m.jsx)("div",{className:"row leavesMain mb-3",children:(0,m.jsx)("div",{className:"col-md-12 pe-md-2",children:(0,m.jsx)("div",{className:"cardBox leaveAppli ratingReview referral h-100 ",children:(0,m.jsx)("div",{className:"d-flex gap-3 justify-content-end",children:(0,m.jsx)(d.Sv,{text:"Credit Debit Leave",classNames:"btn btn-primary",handleClick:()=>{T()}})})})})})}),(0,m.jsx)(u,{handleOpenClose:T,openModel:y,handleCreditDebitLeave:l=>{e(b.OH.creditDebitLeaveRequest(l))},allEmployeeList:L,getCreditDebitLeaveById:l=>{e(b.OH.getCreditDebitLeaveRequest({employee_id:l}))},creditDebitLeaveByIdData:D,leaveTypeListData:_}),(0,m.jsx)(p,{})]})}}}]);
//# sourceMappingURL=7532.fa0acde0.chunk.js.map