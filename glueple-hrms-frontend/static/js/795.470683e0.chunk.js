"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[795],{60795:(e,a,i)=>{i.r(a),i.d(a,{default:()=>j});var s=i(65043),l=i(85831),n=i(22166),t=i(94174),d=i(52027),c=(i(35685),i(90607)),r=i(49985),o=i(45531),m=i(26181),v=i(80728),u=i(86178),f=i.n(u),x=i(70579);const h=e=>{const{addFinancialYearPending:a,updateFinancialYearPending:i}=(0,n.d4)((e=>null===e||void 0===e?void 0:e.position)),{t:t}=(0,c.K)(),{selectedFinancialYearData:d,openModel:r,handleOpenClose:u,handleCreateUpdateFinancialYear:h}=e,[g,p]=(0,s.useState)({}),[j,b]=(0,s.useState)({from:"",to:"",is_active:!0}),N=(e,a)=>{var i;const s=a||(null===(i=e.target)||void 0===i?void 0:i.name),{value:l,type:n,checked:t}=e.target?e.target:{value:e};b((e=>{let a={...e,[s]:"checkbox"===n?t:l};return"from"===s&&(a={...a,to:f()(l).add(1,"year").subtract(1,"day").format("YYYY-MM-DD")}),a})),p((e=>({...e,[s]:void 0})))};(0,s.useEffect)((()=>()=>{_()}),[r]),(0,s.useEffect)((()=>{d&&b({from:null===d||void 0===d?void 0:d.from,to:null===d||void 0===d?void 0:d.to,is_active:null===d||void 0===d?void 0:d.is_active})}),[d]);const _=()=>{b({from:"",to:"",is_active:!0}),p({})};return console.log("test admin data"),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"offcanvas offcanvas-end  "+(r?"show":""),tabIndex:-1,style:{visibility:r?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,x.jsxs)("div",{className:"offcanvas-header",children:[(0,x.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:t(d?"headings.updateFinancialYear":"headings.createFinancialYear")}),(0,x.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>u()})]}),(0,x.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,x.jsxs)("div",{className:"formPanel",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"form-group mb-3",children:(0,x.jsx)(o.JU,{text:t("labels.from"),required:!0})})}),(0,x.jsx)("div",{className:"col-md-9",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)(o.pd,{type:"date",value:null===j||void 0===j?void 0:j.from,name:"from",onChange:e=>N(e)}),(null===g||void 0===g?void 0:g.from)&&(0,x.jsx)(l.eo,{text:g.from})]})})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"form-group mb-3",children:(0,x.jsx)(o.JU,{text:t("labels.to")})})}),(0,x.jsx)("div",{className:"col-md-9",children:(0,x.jsx)("div",{className:"form-group mb-3",children:(0,x.jsx)(o.pd,{type:"date",value:null===j||void 0===j?void 0:j.to,name:"to",onChange:e=>N(e),isDisabled:!0})})})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"form-group mb-3",children:(0,x.jsx)(o.JU,{text:t("labels.isActive")})})}),(0,x.jsx)("div",{className:"col-md-9",children:(0,x.jsx)("div",{className:"form-group mb-3",children:(0,x.jsx)(o.P_,{id:"is_active",checked:null===j||void 0===j?void 0:j.is_active,handleChange:e=>N(e),name:"is_active"},"is_active")})})]})]})}),(0,x.jsx)("div",{className:"offcanvas-footer",children:(0,x.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,x.jsx)(l.Sv,{text:t(d?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,m.i6)(v.GV,j);if(e.isValid){const{from:e,to:a,is_active:i}=j,s={from:e,to:a,is_active:i};p({}),h(s)}else p(e.errors)})(),isLoading:d?i:a})})})]}),r&&(0,x.jsx)("div",{className:"modal-backdrop fade show"})]})};var g=i(29829);const p=e=>{const{t:a}=(0,c.K)(),{allFinancialYears:i,isLoading:l,toggleCreateUpdateFinancialYearModal:n,currentPage:t,setCurrentPage:d}=e,m=(0,s.useMemo)((()=>({sn:(e,a)=>(0,x.jsx)("span",{children:a+1}),is_active:e=>(0,x.jsx)("span",{className:`badge ${(0,r.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),from:e=>(0,r.N_)(e.from),to:e=>(0,r.N_)(e.to),created_at:e=>(0,r.N_)(e.created_at),action:e=>(0,x.jsxs)("div",{className:"btn-group actionDrp",children:[(0,x.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,x.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,x.jsx)("ul",{className:"dropdown-menu",children:(0,x.jsx)("li",{children:(0,x.jsxs)("span",{className:"dropdown-item",onClick:()=>{n(e)},children:[(0,x.jsx)(o.In,{className:"bi bi-pencil-square me-1"}),"Update"]})})})]})})),[n]);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(g.Ak,{data:null===i||void 0===i?void 0:i.data,fields:[{key:"sn",label:"S.N"},{key:"from",label:"From Date"},{key:"to",label:"To Date"},{key:"created_at",label:"Create At"},{key:"is_active",label:"Status"},{key:"action",label:"Action"}],isLoading:l,pagination:!0,currentPage:t,setCurrentPage:d,totalPages:null===i||void 0===i?void 0:i.totalPages,tableName:"FinancialYear",isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:m})})},j=()=>{const e=(0,n.wA)(),{t:a}=(0,c.K)(),{addFinancialYearPending:i,addFinancialYearRes:r,addFinancialYearError:m,getAllFinancialYearPending:v,getAllFinancialYearRes:u,getAllFinancialYearError:f,updateFinancialYearPending:g,updateFinancialYearRes:j,updateFinancialYearError:b}=(0,n.d4)((e=>e.financialYear)),[N,_]=(0,s.useState)(!1),[Y,C]=(0,s.useState)(""),[F,y]=(0,s.useState)(1),[S,A]=(0,s.useState)({}),E=e=>{C(e||""),_(!N)};(0,s.useEffect)((()=>{if(!i){if(m)return void e(t.Cm.handleClearFinancialYearStore("HANDLE_CLEAR_ADD_POSITION_STORE"));r&&200===(null===r||void 0===r?void 0:r.code)&&(e(t.Cm.handleClearFinancialYearStore("HANDLE_CLEAR_ADD_POSITION_STORE")),P(),_(!N))}}),[r,m,i]),(0,s.useEffect)((()=>{if(!g){if(b)return void e(t.Cm.handleClearFinancialYearStore("HANDLE_CLEAR_UPDATE_POSITION_STORE"));j&&200===(null===j||void 0===j?void 0:j.code)&&(e(t.Cm.handleClearFinancialYearStore("HANDLE_CLEAR_UPDATE_POSITION_STORE")),P(),_(!N))}}),[j,b,g]),(0,s.useEffect)((()=>{P()}),[F]);const P=()=>{const a={page:F,limit:d.X$.limit};e(t.Cm.getAllFinancialYearRequest(a))};return(0,s.useEffect)((()=>{if(!v){if(f)return;if(u&&200===(null===u||void 0===u?void 0:u.code)){const e=null===u||void 0===u?void 0:u.data;A(e)}}}),[u,f,v]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,x.jsxs)("div",{className:"cardHead d-flex",children:[(0,x.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,x.jsx)("h4",{className:"ms-2 ",children:"Financial Year"})]}),(0,x.jsx)(l.Sv,{text:"Financial Year",classNames:"btn btn-primary",icon:(0,x.jsx)(o.In,{className:"fa fa-plus"}),handleClick:()=>E()})]}),(0,x.jsx)(p,{toggleCreateUpdateFinancialYearModal:E,currentPage:F,setCurrentPage:y,allFinancialYears:S,isLoading:v})]}),N&&(0,x.jsx)(h,{openModel:N,handleOpenClose:E,handleCreateUpdateFinancialYear:a=>{Y?(a._id=(null===Y||void 0===Y?void 0:Y._id)||(null===Y||void 0===Y?void 0:Y.id),e(t.Cm.updateFinancialYearRequest(a))):e(t.Cm.addFinancialYearRequest(a))},selectedFinancialYearData:Y})]})}}}]);
//# sourceMappingURL=795.470683e0.chunk.js.map