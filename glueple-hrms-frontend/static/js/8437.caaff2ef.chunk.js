"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[8437,2786],{96816:(e,a,l)=>{l.d(a,{A:()=>n});l(65043);var t=l(70579);const n=()=>(0,t.jsx)("div",{children:(0,t.jsxs)("svg",{version:"1.1",id:"Layer_1",x:0,y:0,viewBox:"0 0 512 512",xmlSpace:"preserve",className:"icon icon-xlg me-2",style:{height:"23px",width:"23px",cursor:"pointer"},children:[(0,t.jsx)("circle",{id:"Oval-3",opacity:".1",fill:"#2B76D2",cx:256,cy:256,r:256}),(0,t.jsx)("path",{fill:"#2B76D2",d:"M277.3 362.7c-5.3 0-10.6-2-14.7-5.9l-85.3-81.5c-4.1-3.9-6.5-9.3-6.6-15-.1-5.7 2-11.1 5.9-15.2l85.3-89.1c8.1-8.5 21.7-8.8 30.2-.7 8.5 8.1 8.8 21.6.7 30.2l-70.6 73.7 69.9 66.8c8.5 8.1 8.8 21.6.7 30.1-4.2 4.4-9.8 6.6-15.5 6.6z"})]})})},38437:(e,a,l)=>{l.r(a),l.d(a,{default:()=>w});var t=l(65043),n=l(29829),s=l(85831),d=l(90607),i=l(82149),o=l(95535),r=l(49985),c=l(70579);const u=e=>{const{toggleAddArrearsModal:a,allArrearsList:l,isLoading:n,setCurrentPage:u,currentPage:m}=e,{t:v}=(0,d.K)(),[p,y]=(0,t.useState)([]),g=(0,r.Yo)("update_arrear"),h=(0,r.Yo)("employee_arrear_detail"),x=[{key:"sn",label:"S.N"},{key:"emp_code",label:"Employee Code "},{key:"name",label:"Employee Name"},{key:"pay_days",label:"Pay Days"},{key:"bonus",label:"Bonus"},{key:"total_employee",label:"Employee Contribution"},{key:"total_employer",label:" Employer Contribution"},{key:"gross",label:"Gross"},{key:"ctc",label:"CTC"}],j=[{key:"sn",label:"S.N",width:"20%"},{key:"name",label:"Arrear Name",width:"30%"},{key:"arrear_for",label:"Arrear For",width:"20%"},{key:"year_mon",label:"Pay Month",width:"20%"},(h||g)&&{key:"action",label:"Action",width:"20%"},{key:"sub_table",label:"",width:"20%"}],b=(0,t.useMemo)((()=>({sn:(e,a)=>(0,c.jsx)("span",{children:a+1}),pay_days:(e,a)=>(0,c.jsx)("span",{children:null===e||void 0===e?void 0:e.present}),bonus:(e,a)=>{var l;return(0,c.jsx)("span",{children:null===e||void 0===e||null===(l=e.bonus)||void 0===l?void 0:l.real})},total_employee:(e,a)=>{var l;return(0,c.jsx)("span",{children:null===e||void 0===e||null===(l=e.total_employee)||void 0===l?void 0:l.real})},total_employer:(e,a)=>{var l;return(0,c.jsx)("span",{children:null===e||void 0===e||null===(l=e.total_employer)||void 0===l?void 0:l.real})},gross:(e,a)=>{var l;return(0,c.jsx)("span",{children:null===e||void 0===e||null===(l=e.gross)||void 0===l?void 0:l.real})},ctc:(e,a)=>{var l;return(0,c.jsx)("span",{children:null===e||void 0===e||null===(l=e.ctc)||void 0===l?void 0:l.real})},action:(e,l)=>(0,c.jsxs)("div",{className:"btn-group actionDrp",children:[(0,c.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,c.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,c.jsxs)("ul",{className:"dropdown-menu",children:[g&&(0,c.jsx)("li",{className:"dropdown-item",onClick:()=>a(e),children:"Update Arrear"}),h&&(0,c.jsx)("li",{className:"dropdown-item",onClick:()=>f(l),children:"Employee Detail"})]})]}),sub_table:e=>(0,c.jsx)(i.A,{data:null===e||void 0===e?void 0:e.employees,fields:x,currentPage:m,setCurrentPage:e=>u(e,"addArrears"),totalPages:null===l||void 0===l?void 0:l.totalPages,tableName:"Employees",isHeader:!0,scopedSlots:b})})),[]),f=e=>{p.includes(e)?y(p.filter((a=>a!==e))):y([...p,e])};return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,c.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Arrears"}),(0,c.jsx)(s.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>a(),text:"Add Arrear",slug:"add_arrear"})]}),(0,c.jsx)(o.A,{data:null===l||void 0===l?void 0:l.data,fields:j,isLoading:n,scopedSlots:b,pagination:!0,currentPage:m,totalPages:null===l||void 0===l?void 0:l.totalPages,setCurrentPage:e=>u(e,"addArrears"),isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},isShowSubMenu:p})]})};var m=l(45531),v=l(56462),p=l(26181),y=l(80728);const g=e=>{const{isOpen:a,toggleOpenClose:l,allEmployeeList:i,handleAddArrears:o,selectedArrear:r}=e,{addArrearsPending:u}=e,{t:g}=(0,d.K)(),[h,x]=(0,t.useState)({}),[j,b]=(0,t.useState)(""),[f,N]=(0,t.useState)({arrearName:"",arrearFor:"",payMonth:"",description:"",employees:[]}),D=(0,t.useMemo)((()=>({sn:(e,a)=>(0,c.jsx)("span",{children:a+1}),pay_days:(e,a)=>(0,c.jsx)("span",{children:(0,c.jsx)(m.pd,{type:"number",value:(null===e||void 0===e?void 0:e.pay_days)||"",name:"pay_days",onChange:a=>((e,a)=>{const{value:l}=null===e||void 0===e?void 0:e.target;N((e=>({...e,employees:e.employees.map((e=>(null===e||void 0===e?void 0:e.value)===(null===a||void 0===a?void 0:a.value)?{...e,pay_days:l}:e))})))})(a,e)})})})),[f]),_=(e,a)=>{var l;const t=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:s,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};N((e=>({...e,[t]:"checkbox"===s?d:n}))),"employees"==t&&b(n),x((e=>({...e,[t]:void 0})))};return(0,t.useEffect)((()=>{r&&N({arrearName:null===r||void 0===r?void 0:r.name,arrearFor:null===r||void 0===r?void 0:r.arrear_for,payMonth:null===r||void 0===r?void 0:r.year_mon,description:null===r||void 0===r?void 0:r.description,employees:null===r||void 0===r?void 0:r.employees})}),[r]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(a?"show":""),tabIndex:-1,style:{visibility:a?"visible":"hidden",width:"800px"},children:[(0,c.jsxs)("div",{className:"offcanvas-header",children:[(0,c.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[" ",r?"Update":"Add"," Arrears "]}),(0,c.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,c.jsx)("div",{className:"offcanvas-body",children:(0,c.jsxs)("div",{className:"formPanel",children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsx)("div",{className:"form-group mb-3",children:(0,c.jsx)(m.JU,{text:g("labels.arrearName"),required:!0})})}),(0,c.jsx)("div",{className:"col-md-8",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)(m.pd,{type:"text",placeholder:g("placeholders.arrearName"),value:(null===f||void 0===f?void 0:f.arrearName)||"",name:"arrearName",onChange:e=>_(e)}),(null===h||void 0===h?void 0:h.arrearName)&&(0,c.jsx)(s.eo,{text:h.arrearName})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsx)("div",{className:"form-group mb-3",children:(0,c.jsx)(m.JU,{text:g("labels.arrearFor"),required:!0})})}),(0,c.jsx)("div",{className:"col-md-8",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)(m.pd,{type:"month",value:(null===f||void 0===f?void 0:f.arrearFor)||"",name:"arrearFor",onChange:e=>_(e)}),(null===h||void 0===h?void 0:h.arrearFor)&&(0,c.jsx)(s.eo,{text:h.arrearFor})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsx)("div",{className:"form-group mb-3",children:(0,c.jsx)(m.JU,{text:g("labels.payMonth"),required:!0})})}),(0,c.jsx)("div",{className:"col-md-8",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)(m.pd,{type:"month",value:(null===f||void 0===f?void 0:f.payMonth)||"",name:"payMonth",onChange:e=>_(e)}),(null===h||void 0===h?void 0:h.payMonth)&&(0,c.jsx)(s.eo,{text:h.payMonth})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsx)("div",{className:"form-group mb-3",children:(0,c.jsx)(m.JU,{text:g("labels.description"),required:!0})})}),(0,c.jsx)("div",{className:"col-md-8",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)(m.TM,{name:"description",value:null===f||void 0===f?void 0:f.description,placeholder:g("placeholders.description"),onChange:e=>_(e)}),(null===h||void 0===h?void 0:h.description)&&(0,c.jsx)(s.eo,{text:h.description})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsx)("div",{className:"form-group mb-3",children:(0,c.jsx)(m.JU,{text:g("labels.employee"),required:!0})})}),(0,c.jsx)("div",{className:"col-md-8",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)(v.A,{data:i,placeholder:g("placeholders.employee"),value:(null===f||void 0===f?void 0:f.employees)||"",handleChange:e=>_(e,"employees"),name:"employees",isMulti:!0}),(null===h||void 0===h?void 0:h.employees)&&(0,c.jsx)(s.eo,{text:h.employees})]})})]}),(0,c.jsx)(n.Ak,{data:null===f||void 0===f?void 0:f.employees,fields:[{key:"sn",label:"S.N"},{key:"pay_days",label:"Pay Days"},{key:"emp_code",label:"Emp Code"},{key:"name",label:"Emp Name"},{key:"department_name",label:"Department  "},{key:"designation_name",label:"Designation"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:D})]})}),(0,c.jsx)("div",{className:"offcanvas-footer",children:(0,c.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,c.jsx)(s.Sv,{text:r?"Update":"Add",classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,p.i6)(y.b1,f);if(e.isValid){const e={name:null===f||void 0===f?void 0:f.arrearName,description:null===f||void 0===f?void 0:f.description,year_mon:null===f||void 0===f?void 0:f.payMonth,arrear_for:null===f||void 0===f?void 0:f.arrearFor,employees:null===f||void 0===f?void 0:f.employees};o(e)}else x(e.errors)})(),isLoading:u})})})]}),(0,c.jsx)("div",{}),a&&(0,c.jsx)("div",{className:"modal-backdrop fade show"})]})};var h=l(99708),x=l(22166);const j=e=>{const{getLoansPending:a}=(0,x.d4)((e=>null===e||void 0===e?void 0:e.payroll)),{toggleAddLoanModal:l,loansData:d,currentPage:i,setCurrentPage:o}=e,[u,m]=(0,t.useState)(),v=(0,r.Yo)("employee_loan_detail"),p=[{key:"sn",label:"S.N"},{key:"name",label:"Employee Name"},{key:"emp_code",label:"Employee ID"},{key:"department_name",label:"Department"},{key:"loan_type_name",label:"Loan Type"},{key:"amount",label:"Loan Amount"},{key:"tenure_duration",label:"EMI Duration"},{key:"start_date",label:"Effective Date"},{key:"end_date",label:"End Date"},v&&{key:"action",label:"Action"}],y=(0,t.useMemo)((()=>({sn:(e,a)=>(0,c.jsx)("span",{children:a+1}),start_date:(e,a)=>(0,c.jsx)("span",{children:(0,r.N_)(null===e||void 0===e?void 0:e.start_date)}),end_date:(e,a)=>(0,c.jsx)("span",{children:(0,r.N_)(null===e||void 0===e?void 0:e.end_date)}),action:e=>(0,c.jsxs)("div",{className:"btn-group actionDrp",children:[(0,c.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,c.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,c.jsx)("ul",{className:"dropdown-menu",children:v&&(0,c.jsx)("li",{children:(0,c.jsx)("span",{className:"dropdown-item",onClick:()=>l(e,"view"),children:"View Details"})})})]})})),[d]);return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,c.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Loans"}),(0,c.jsx)(s.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>l(),text:"Add Loan",slug:"add_loan"})]}),(0,c.jsx)(n.Ak,{data:null===d||void 0===d?void 0:d.data,fields:p,isLoading:a,pagination:!0,currentPage:i,setCurrentPage:e=>o(e,"loan"),totalPages:null===d||void 0===d?void 0:d.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:y})]})};var b=l(86178),f=l.n(b);const N=e=>{const{t:a}=(0,d.K)(),{toggleOpenClose:l,isOpen:n,allEmployeeList:i,filteredDropdownData:o,handleAddUpdateLoan:u,openLoanTypeModal:g,selectedLoanData:x}=e,[j,b]=(0,t.useState)({employee:null,loanType:null,amount:"",emiDuration:null,effectiveDate:"",endDate:""}),[N,D]=(0,t.useState)(""),[_,A]=(0,t.useState)([]),P=(e,a)=>{var l;const t=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:s,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};"effectiveDate"===t&&(A([]),k(n)),"emiDuration"===t&&(b((e=>({...e,effectiveDate:"",endDate:""}))),A([])),"amount"===t&&(b((e=>({...e,emiDuration:null,effectiveDate:"",endDate:""}))),A([])),b((e=>({...e,[t]:"checkbox"===s?d:n}))),D((e=>({...e,[t]:void 0})))},k=e=>{const a=f()(e).add(Number(j.emiDuration.category_value)-1,"M").format("YYYY-MM-DD");b((e=>({...e,endDate:a}))),S(e)},S=e=>{var a;let l=parseInt(null===j||void 0===j||null===(a=j.emiDuration)||void 0===a?void 0:a.category_value),t=parseFloat((null===j||void 0===j?void 0:j.amount)/l).toFixed(2),n=[],s=f()(e).format("YYYY-MM-DD");for(let d=1;d<=l;d++){n.push({installment:d,payment_date:s,emi_amount:t});n.length;s=f()(s).add(1,"month").format("YYYY-MM-DD")}A(n)};return(0,t.useEffect)((()=>{x&&(A(null===x||void 0===x?void 0:x.installments),b({employee:{label:null===x||void 0===x?void 0:x.name,value:null===x||void 0===x?void 0:x.value},loanType:{label:null===x||void 0===x?void 0:x.loan_type_name,value:null===x||void 0===x?void 0:x.loan_type_value},amount:null===x||void 0===x?void 0:x.amount,emiDuration:{value:null===x||void 0===x?void 0:x.tenure_duration,label:""},effectiveDate:null===x||void 0===x?void 0:x.start_date,endDate:null===x||void 0===x?void 0:x.end_date}))}),[x]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(n?"show":""),tabIndex:-1,style:{visibility:n?"visible":"hidden",width:"800px"},children:[(0,c.jsxs)("div",{className:"offcanvas-header",children:[(0,c.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:" Add Loans "}),(0,c.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,c.jsx)("div",{className:"offcanvas-body",children:(0,c.jsx)("div",{className:"formPanel",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-md-6",children:[(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:a("labels.employee"),required:!0}),(0,c.jsx)(v.A,{data:i,placeholder:a("placeholders.employee"),value:(null===j||void 0===j?void 0:j.employee)||"",handleChange:e=>P(e,"employee"),name:"employee"})]}),(null===N||void 0===N?void 0:N.employee)&&(0,c.jsx)(s.eo,{text:N.employee})]}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:a("labels.loanType"),required:!0}),(0,c.jsx)(v.A,{data:null===o||void 0===o?void 0:o.loan_type,placeholder:a("placeholders.loanType"),value:(null===j||void 0===j?void 0:j.loanType)||"",handleChange:e=>P(e,"loanType"),name:"loanType"})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:a("labels.amount"),required:!0}),(0,c.jsx)(m.pd,{type:"number",placeholder:a("placeholders.amount"),value:null===j||void 0===j?void 0:j.amount,name:"amount",onChange:e=>P(e)}),(null===N||void 0===N?void 0:N.amount)&&(0,c.jsx)(s.eo,{text:N.amount})]})}),(0,c.jsxs)("div",{className:"col-md-6",children:[(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:a("labels.emiDuration"),required:!0}),(0,c.jsx)(v.A,{data:null===o||void 0===o?void 0:o.emi_duration,placeholder:a("placeholders.emiDuration"),value:(null===j||void 0===j?void 0:j.emiDuration)||"",handleChange:e=>P(e,"emiDuration"),name:"emiDuration"})]}),(null===N||void 0===N?void 0:N.emiDuration)&&(0,c.jsx)(s.eo,{text:N.emiDuration})]}),(0,c.jsxs)("div",{className:"col-md-6",children:[(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:a("labels.effectiveDate"),required:!0}),(0,c.jsx)(m.pd,{type:"date",value:(0,r.N_)(null===j||void 0===j?void 0:j.effectiveDate,"YYYY-MM-DD"),isDisabled:null===j||void 0===j||!j.emiDuration,name:"effectiveDate",onChange:e=>P(e)})]}),(null===N||void 0===N?void 0:N.effectiveDate)&&(0,c.jsx)(s.eo,{text:N.effectiveDate})]}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:a("labels.endDate"),required:!0}),(0,c.jsx)(m.pd,{type:"date",value:(0,r.N_)(null===j||void 0===j?void 0:j.endDate,"YYYY-MM-DD"),isDisabled:!0,name:"endDate",onChange:e=>P(e)}),(null===N||void 0===N?void 0:N.endDate)&&(0,c.jsx)(s.eo,{text:N.endDate})]})}),(0,c.jsx)("hr",{}),_&&(null===_||void 0===_?void 0:_.length)>0&&(0,c.jsxs)("div",{className:"col-12",children:[(0,c.jsxs)("div",{className:"card text-center p-1 m-o",style:{backgroundColor:"#3c82e9",color:"white"},children:[" ",(0,c.jsx)("h6",{children:"Pending Installment "})]}),(0,c.jsx)(h.A,{installmentData:_,setInstallmentData:A,loanData:j})]})]})})}),(0,c.jsx)("div",{className:"offcanvas-footer",children:(0,c.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,c.jsx)(s.Sv,{text:"Add",classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,p.i6)(y.aw,j);if(e.isValid){const{employee:e,loanType:a,amount:l,emiDuration:t,effectiveDate:n,endDate:s}=j;D({});const d={employee_id:null===e||void 0===e?void 0:e.value,loan_type:null===a||void 0===a?void 0:a.value,amount:l||0,tenure_duration:null===t||void 0===t?void 0:t.value,start_date:n,end_date:s,installments:_};u(d)}else D(e.errors)})()})})})]}),n&&(0,c.jsx)("div",{className:"modal-backdrop fade show"})]})};l(53536);const D=e=>{const{payRunHistoryData:a,currentPage:l,setCurrentPage:s}=e,d=(0,t.useMemo)((()=>({sn:(e,a)=>(0,c.jsx)("span",{children:a+1}),action:e=>(0,c.jsxs)("div",{className:"btn-group actionDrp",children:[(0,c.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,c.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,c.jsx)("ul",{className:"dropdown-menu",children:(0,c.jsx)("li",{children:(0,c.jsx)("span",{className:"dropdown-item",children:"View Details"})})})]})})),[a]);return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,c.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Payroll History"})}),(0,c.jsx)(n.Ak,{data:a,fields:[{key:"pay_month",label:"Payment Month"},{key:"pay_date",label:"Payment Date"},{key:"employee_no",label:"Pay Employees"},{key:"payroll_cost",label:"Payroll Cost"},{key:"payroll_netPay",label:"Payroll Net Pay"},{key:"action",label:"Action"}],pagination:!0,currentPage:l,setCurrentPage:e=>s(e,"loan"),totalPages:null===a||void 0===a?void 0:a.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:d})]})};var _=l(35475);const A=e=>{const{payRollNotificationData:a}=e;return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)("div",{className:" d-flex justify-content-between align-items-center mb-2",children:(0,c.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Run Attendance"})}),(0,c.jsx)("div",{className:"card",children:(0,c.jsxs)("div",{className:" payroll-card-body-css  p-3 border-left border-dark",children:[(0,c.jsxs)("div",{className:"payruns-cards d-flex align-items-center justify-content-around",children:[(0,c.jsxs)("div",{className:"col",children:[(0,c.jsxs)("small",{className:"text-secondary",children:["PAYMENT MONTH"," ",(0,c.jsx)("span",{className:`badge ${(0,r.XN)(null===a||void 0===a?void 0:a.status)}`,children:null===a||void 0===a?void 0:a.status})]}),(0,c.jsx)("h5",{className:"py-3",children:(0,r.N_)(null===a||void 0===a?void 0:a.pay_month,"MMM YYYY")})]}),(0,c.jsxs)("div",{className:"col",children:[(0,r.Yo)("create_pay_run_btn")&&(0,c.jsxs)(_.N_,{to:`/pay-runs/create-pay-run/${null===a||void 0===a?void 0:a.pay_month}`,children:[" ",(0,c.jsx)("button",{className:"btn btn-primary",children:"Create Pay Run"})]}),"\xa0\xa0",(0,r.Yo)("view_pay_run_detail")&&(0,c.jsx)(_.N_,{to:`/regular-payroll/${null===a||void 0===a?void 0:a.pay_month}`,children:(0,c.jsx)("button",{className:"btn btn-primary",children:"View Details"})})]})]}),(0,c.jsx)("i",{class:"bi bi-info-circle"})," ",(0,c.jsx)("span",{children:(0,c.jsxs)("small",{className:"text-secondary",children:["Please approve this payroll before"," ",(0,r.N_)(null===a||void 0===a?void 0:a.pay_date)]})})]})})]})};var P=l(94174);const k=e=>{const a=(0,x.wA)(),{currentPage:l,setCurrentPage:s,getAllEmployeeDetailsByPayDays:d,monthYear:i}=e,{getEmployeeDetailsByPayDaysPending:o}=(0,x.d4)((e=>e.payroll)),u=(0,t.useMemo)((()=>({sn:(e,a)=>(0,c.jsx)("span",{children:a+1}),account_status:e=>(0,c.jsx)("span",{className:`badge ${(0,r.XN)(e.account_status)}`,children:e.account_status}),action:e=>(0,c.jsxs)("div",{className:"btn-group actionDrp",children:[(0,c.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,c.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,c.jsx)("ul",{className:"dropdown-menu",children:(0,c.jsx)("li",{children:(0,c.jsx)(_.N_,{className:"dropdown-item",to:`employee-attendance-tracking/${null===e||void 0===e?void 0:e._id}/${i}`,onClick:()=>{return l=e,void a(P.Vg.selectedEmployeeData(l));var l},children:"View Details"})})})]})})),[d,l]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n.Ak,{data:null===d||void 0===d?void 0:d.data,fields:[{key:"sn",label:"S.N"},{key:"emp_id",label:"Emp Id"},{key:"name",label:"Full Name"},{key:"present_days",label:"Present Days"},{key:"absent_days",label:"Absent Days"},{key:"pay_days",label:"Pay Days"},{key:"account_status",label:"Account Status"},{key:"action",label:"Action"}],isLoading:o,pagination:!0,currentPage:l,setCurrentPage:e=>s(e,"attendanceTracking"),totalPages:null===d||void 0===d?void 0:d.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:u})})},S=e=>{const{allEmployeeList:a,allDepartments:l,allDesignations:n,handleDepartmentByDesignation:i,getEmployeeDetailsByPayDays:o,setMonthYear:u}=e,{t:p}=(0,d.K)(),[y,g]=(0,t.useState)({department:null,designation:null,employees:"",month_year:f()().format("YYYY-MM")}),h=(e,a)=>{var l;const t=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:s,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};"department"===t&&(n&&(null===n||void 0===n?void 0:n.value)&&i(null===n||void 0===n?void 0:n.value),g((e=>({...e,designation:null})))),"month_year"===t&&u(n),g((e=>({...e,[t]:"checkbox"===s?d:n})))};return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"formPanel cardBox",children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:p("labels.department")}),(0,c.jsx)(v.A,{data:l,placeholder:p("placeholders.selectDepartment"),value:(null===y||void 0===y?void 0:y.department)||"",handleChange:e=>h(e,"department"),name:"department"})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:p("labels.designation")}),(0,c.jsx)(v.A,{data:n,placeholder:p("placeholders.selectDesignation"),value:(null===y||void 0===y?void 0:y.designation)||"",handleChange:e=>h(e,"designation"),name:"designation",isDisabled:null===y||void 0===y||!y.department})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:p("labels.employees")}),(0,c.jsx)(v.A,{data:a,placeholder:p("placeholders.employees"),value:(null===y||void 0===y?void 0:y.employees)||"",handleChange:e=>h(e,"employees"),name:"employees",isMulti:!0,selectAllText:p("labels.selectAll")})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-2",children:[(0,c.jsx)(m.JU,{text:p("labels.monthYear")}),(0,c.jsx)(m.pd,{type:"month",value:(null===y||void 0===y?void 0:y.month_year)||"",onChange:e=>h(e),name:"month_year"})]})})]}),(0,c.jsx)("div",{className:"d-flex justify-content-end",children:(0,c.jsx)(s.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>(()=>{var e,a,l,t,n;const s={};null!==y&&void 0!==y&&null!==(e=y.department)&&void 0!==e&&e.value&&(s.department_id=null===y||void 0===y||null===(a=y.department)||void 0===a?void 0:a.value),null!==y&&void 0!==y&&null!==(l=y.designation)&&void 0!==l&&l.value&&(s.designation_id=null===y||void 0===y||null===(t=y.designation)||void 0===t?void 0:t.value),(null===y||void 0===y||null===(n=y.employees)||void 0===n?void 0:n.length)>0&&(s.employee_ids=(0,r.mu)(null===y||void 0===y?void 0:y.employees)),s.month_year=null===y||void 0===y?void 0:y.month_year,o(s)})(),text:p("btns.filter"),icon:(0,c.jsx)(m.In,{className:"fa fa-search"})})})]})})},E=e=>{const{allEmployeeList:a,allDepartments:l,allDesignations:n,handleDepartmentByDesignation:s,getAllEmployeeDetailsByPayDays:d,getEmployeeDetailsByPayDays:i,currentPage:o,setCurrentPage:r}=e,[u,m]=(0,t.useState)(f()().format("YYYY-MM"));return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,c.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Attendance Tracking"})}),(0,c.jsx)(S,{allEmployeeList:a,allDepartments:l,allDesignations:n,handleDepartmentByDesignation:s,getEmployeeDetailsByPayDays:i,setMonthYear:m}),(0,c.jsx)(k,{setCurrentPage:r,currentPage:o,allEmployeeData:a,getAllEmployeeDetailsByPayDays:d,monthYear:u})]})};l(72786);var C=l(52027);l(44978);const w=()=>{const e=(0,x.wA)(),{t:a}=(0,d.K)(),{getDepartmentListRes:l,getDepartmentListError:s,getDepartmentListPending:i}=(0,x.d4)((e=>e.department)),{getDesignationsByDepartmentRes:o,getDesignationsByDepartmentPending:m,getDesignationsByDepartmentError:v}=(0,x.d4)((e=>e.designation)),{getAllEmployeePending:p,getAllEmployeeRes:y,getAllEmployeeError:h}=(0,x.d4)((e=>e.employee)),{getFilteredDropdownDataError:b,getFilteredDropdownDataRes:f,getFilteredDropdownDataPending:_}=(0,x.d4)((e=>e.dropdownMaster)),{getEmployeeDetailsByPayDaysPending:k,getEmployeeDetailsByPayDaysRes:S,getEmployeeDetailsByPayDaysError:w,addArrearsPending:R,addArrearsRes:L,addArrearsError:M,getArrearsPending:Y,getArrearsRes:F,getArrearsError:H,addLoansPending:V,addLoansRes:T,addLoansError:B,getLoansPending:q,getLoansRes:O,getLoansError:U,getPayRunHistoryPending:I,getPayRunHistoryRes:$,getPayRunHistoryError:J,payRollNotificationPending:X,payRollNotificationRes:z,payRollNotificationError:K}=(0,x.d4)((e=>e.payroll)),[G,Q]=(0,t.useState)(!1),[W,Z]=(0,t.useState)(!1),[ee,ae]=(0,t.useState)(""),[le,te]=(0,t.useState)(""),[ne,se]=(0,t.useState)(""),[de,ie]=(0,t.useState)(""),[oe,re]=(0,t.useState)([]),[ce,ue]=(0,t.useState)([]),[me,ve]=(0,t.useState)(""),[pe,ye]=(0,t.useState)(""),[ge,he]=(0,t.useState)({}),[xe,je]=(0,t.useState)(""),[be,fe]=(0,t.useState)(""),[Ne,De]=(0,t.useState)(""),[_e,Ae]=(0,t.useState)(""),[Pe,ke]=(0,t.useState)({attendanceTrackCurrentPage:1,arrearCurrentPage:1,loanCurrentPage:1,payRunHistoryCurrentPage:1}),Se=[{name:"Run Attendance",onClickFun:e=>Ce(e),id:"runAttendance",permissionId:"run_attendance"},{name:"Attendance Tracking",onClickFun:e=>Ce(e),id:"attendanceTracking",permissionId:"attendance_tracking"},{name:"Add Arrears",onClickFun:e=>Ce(e),id:"addArrears",permissionId:"arrears"},{name:"Loans",onClickFun:e=>Ce(e),id:"loans",permissionId:"loans"},{name:"Payroll History",onClickFun:e=>Ce(e),id:"payRollHistory",permissionId:"payroll_history"}],Ee=(0,r.Ri)(Se);(0,t.useEffect)((()=>{Ce("runAttendance")}),[]);const Ce=e=>{"runAttendance"===e&&qe(),"attendanceTracking"===e?Ye():"addArrears"===e?Fe():"loans"===e?Te():"payRollHistory"===e&&Be()},we=e=>{e&&ye(e),Q(!G)},Re=(e,a)=>{a&&(ae(a),fe(e)),Z(!W)};(0,t.useEffect)((()=>{Me(),Le(),Ve()}),[]);const Le=()=>{e(P.mM.getAllEmployeeRequest())};(0,t.useEffect)((()=>{if(!p){if(h)return;y&&200===(null===y||void 0===y?void 0:y.code)&&te(null===y||void 0===y?void 0:y.data)}}),[y,h,p]);const Me=()=>{var a;null!==l&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&a.length?se(null===l||void 0===l?void 0:l.data):e(P.vd.getDepartmentListRequest())};(0,t.useEffect)((()=>{if(!i){if(s)return;if(l&&200===(null===l||void 0===l?void 0:l.code)){const e=null===l||void 0===l?void 0:l.data;se(e)}}}),[l,s,i]);(0,t.useEffect)((()=>{if(!m){if(v)return;if(o&&200===(null===o||void 0===o?void 0:o.code)){const e=(null===o||void 0===o?void 0:o.data)||[];ie(e)}}}),[o,v,m]);const Ye=(a,l)=>{const t={page:a||(null===Pe||void 0===Pe?void 0:Pe.attendanceTrackCurrentPage),limit:C.X$.limit};e(P.Vg.getEmployeeDetailsByPayDaysRequest(t))};(0,t.useEffect)((()=>{if(!k){if(w)return;if(S&&200===(null===S||void 0===S?void 0:S.code)){const e=null===S||void 0===S?void 0:S.data;re(e)}}}),[S,w,k]);(0,t.useEffect)((()=>{if(!R){if(M)return void e(null===P.Vg||void 0===P.Vg?void 0:P.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_ARREARS_STORE"));L&&200===(null===L||void 0===L?void 0:L.code)&&(we(),Fe(),e(null===P.Vg||void 0===P.Vg?void 0:P.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_ARREARS_STORE")))}}),[L,M,R]);const Fe=a=>{const l={page:a||(null===Pe||void 0===Pe?void 0:Pe.arrearCurrentPage),limit:null===C.X$||void 0===C.X$?void 0:C.X$.limit};e(P.Vg.getArrearsRequest(l))};(0,t.useEffect)((()=>{if(!Y){if(H)return void e(null===P.Vg||void 0===P.Vg?void 0:P.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_ARREARS_STORE"));F&&200===(null===F||void 0===F?void 0:F.code)&&ve(null===F||void 0===F?void 0:F.data)}}),[F,H,Y]);const He=(e,a)=>{"attendanceTracking"===a?(ke((a=>({...a,attendanceTrackCurrentPage:e}))),Ye(e)):"addArrears"===a?(ke((a=>({...a,arrearCurrentPage:e}))),Fe(e)):"loans"===a?(ke((a=>({...a,loanCurrentPage:e}))),Te(e)):"payRollHistory"===a&&(ke((a=>({...a,payRunHistoryCurrentPage:e}))),Be(e))},Ve=()=>{let a={category:["loan_type","emi_duration"]};e(P.dk.getFilteredDropdownDataRequest(a))};(0,t.useEffect)((()=>{if(!_){if(b)return;if(f&&200===(null===f||void 0===f?void 0:f.code)){var e;const a=(0,r.Ib)(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.data);he(a)}}}),[f,b,_]);(0,t.useEffect)((()=>{if(!V){if(B)return void e(null===P.Vg||void 0===P.Vg?void 0:P.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_LOANS_STORE"));T&&200===(null===T||void 0===T?void 0:T.code)&&e(null===P.Vg||void 0===P.Vg?void 0:P.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_LOANS_STORE"))}}),[T,B,V]);const Te=a=>{const l={page:a||(null===Pe||void 0===Pe?void 0:Pe.loanCurrentPage),limit:null===C.X$||void 0===C.X$?void 0:C.X$.limit};e(P.Vg.getLoansRequest(l))};(0,t.useEffect)((()=>{if(!q){if(U)return;O&&200===(null===O||void 0===O?void 0:O.code)&&je(null===O||void 0===O?void 0:O.data)}}),[O,U,q]);const Be=a=>{const l={page:a||(null===Pe||void 0===Pe?void 0:Pe.payRunHistoryCurrentPage),limit:null===C.X$||void 0===C.X$?void 0:C.X$.limit};e(P.Vg.getPayRunHistoryRequest(l))};(0,t.useEffect)((()=>{if(!I){if(J)return;$&&200===(null===$||void 0===$?void 0:$.code)&&De(null===$||void 0===$?void 0:$.data)}}),[$,J,I]);const qe=()=>{e(P.Vg.payRollNotificationRequest())};return(0,t.useEffect)((()=>{if(!X){if(K)return;z&&200===(null===z||void 0===z?void 0:z.code)&&Ae(null===z||void 0===z?void 0:z.data)}}),[z,K,X]),(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)("div",{className:"tab-pane fade show active",id:"receivedFeedback",children:(0,c.jsxs)("div",{className:"cardBox myRequest mb-3",children:[(0,c.jsxs)("div",{className:"cardHead d-flex justify-content-between",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("img",{src:"images/kpi-guidline.svg",alt:"",width:40,className:"me-2 fw-bold"}),(0,c.jsx)("div",{className:"",children:(0,c.jsx)("h3",{children:" Pay Runs"})})]}),(0,c.jsx)("div",{className:"searchB me-0 ",children:(0,c.jsx)("input",{type:"text",className:"form-control w-100 fs-7",placeholder:"Search"})})]}),(0,c.jsx)(n.QE,{tabs:Se,type:"rayRuns"}),(0,c.jsxs)("div",{className:"tab-content mykpiMain",children:[(0,c.jsx)("div",{className:`tab-pane fade ${"runAttendance"===Ee&&"active show"}`,id:"runAttendance",children:(0,c.jsx)(A,{payRollNotificationData:_e})}),(0,c.jsx)("div",{className:`tab-pane fade ${"attendanceTracking"===Ee&&"active show"}`,id:"attendanceTracking",children:(0,c.jsx)(E,{allEmployeeList:le,allDepartments:ne,allDesignations:de,handleDepartmentByDesignation:a=>{const l={department_id:a};e(P.EU.getDesignationsByDepartmentRequest(l))},getAllEmployeeDetailsByPayDays:oe,getEmployeeDetailsByPayDays:Ye,attendanceStatusData:ce,currentPage:null===Pe||void 0===Pe?void 0:Pe.attendanceTrackCurrentPage,setCurrentPage:He})}),(0,c.jsx)("div",{className:`tab-pane fade ${"addArrears"===Ee&&"active show"}`,id:"addArrears",children:(0,c.jsx)(u,{toggleAddArrearsModal:we,allArrearsList:me,isLoading:Y,currentPage:null===Pe||void 0===Pe?void 0:Pe.arrearCurrentPage,setCurrentPage:He})}),(0,c.jsx)("div",{className:`tab-pane fade ${"addArrears"===Ee&&"active show"}`,id:"loans",children:(0,c.jsx)(j,{toggleAddLoanModal:Re,loansData:xe,currentPage:null===Pe||void 0===Pe?void 0:Pe.arrearCurrentPage,setCurrentPage:He})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"payRollHistory",children:(0,c.jsx)(D,{payRunHistoryData:Ne,currentPage:null===Pe||void 0===Pe?void 0:Pe.payRunHistoryCurrentPage,setCurrentPage:He})})]})]})}),G&&(0,c.jsx)(g,{isOpen:G,toggleOpenClose:we,allEmployeeList:le,handleAddArrears:a=>{e(P.Vg.addArrearsRequest(a))},selectedArrear:pe}),W&&(0,c.jsx)(N,{isOpen:W,toggleOpenClose:Re,allEmployeeList:le,filteredDropdownData:ge,handleAddUpdateLoan:a=>{e(null===P.Vg||void 0===P.Vg?void 0:P.Vg.addLoansRequest(a))},openLoanTypeModal:ee,selectedLoanData:be})]})}},72786:(e,a,l)=>{l.r(a),l.d(a,{default:()=>y});var t=l(65043),n=l(29829),s=l(90607),d=l(45531),i=l(85831),o=(l(56462),l(96816)),r=l(73216),c=l(35475),u=l(22166),m=(l(52027),l(94174)),v=l(49985),p=l(70579);const y=()=>{const e=(0,u.wA)(),{payMonth:a}=(0,r.g)(),{getDepartmentListRes:l,getDepartmentListError:y,getDepartmentListPending:g}=(0,u.d4)((e=>e.department)),{getAllEmployeePending:h,getAllEmployeeRes:x,getAllEmployeeError:j}=(0,u.d4)((e=>e.employee)),{getEmployeeSalaryPending:b,getEmployeeSalaryRes:f,getEmployeeSalaryError:N,addPayRunPending:D,addPayRunRes:_,addPayRunError:A}=(0,u.d4)((e=>e.payroll)),{t:P}=(0,s.K)(),[k,S]=(0,t.useState)(1),[E,C]=(0,t.useState)(""),[w,R]=(0,t.useState)(!0),[L,M]=(0,t.useState)(""),[Y,F]=(0,t.useState)(""),[H,V]=(0,t.useState)(""),[T,B]=(0,t.useState)({employeeName:"",department:""}),q=(0,t.useMemo)((()=>({sn:(e,a)=>(0,p.jsx)("span",{children:a+1}),hold_salary:e=>(0,p.jsx)("span",{children:(0,p.jsx)(d.P_,{id:"is_hold",checked:null===e||void 0===e?void 0:e.is_hold,handleChange:a=>U(a,null,e),name:"is_hold"},"is_hold")}),create_salary:e=>(0,p.jsx)("span",{children:(0,p.jsx)(d.P_,{id:"create_salary",checked:null===e||void 0===e?void 0:e.create_salary,handleChange:a=>U(a,null,e),name:"create_salary"},"create_salary")})})),[w,E]);(0,t.useEffect)((()=>{$()}),[]);const O=[{name:"employeeName",label:"Select Employee / ID",type:"select",value:T.employeeName,data:H,placeholder:"Enter Employee Name",isMulti:!0},{name:"department",label:"Department",type:"select",data:Y,value:T.department,placeholder:"Select Department"}],U=(e,a,l)=>{var t;const n=a||(null===(t=e.target)||void 0===t?void 0:t.name),{value:s,type:d,checked:i}=null!==e&&void 0!==e&&e.target?e.target:{value:e};C((e=>{const a=null===e||void 0===e?void 0:e.map((e=>(null===e||void 0===e?void 0:e._id)===(null===l||void 0===l?void 0:l._id)?{...e,[n]:"checkbox"===d?i:s}:e)),t=a.every((e=>e.create_salary));return R(t),a}))};(0,t.useEffect)((()=>{I()}),[k]);const I=()=>{e(null===m.Vg||void 0===m.Vg?void 0:m.Vg.getEmployeeSalaryRequest())};(0,t.useEffect)((()=>{if(!b){if(N)return;f&&200===(null===f||void 0===f?void 0:f.code)&&(C(null===f||void 0===f?void 0:f.data),M(null===f||void 0===f?void 0:f.data))}}),[f,N,b]);const $=()=>{var a;null!==l&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&a.length?F(null===l||void 0===l?void 0:l.data):e(m.vd.getDepartmentListRequest())};(0,t.useEffect)((()=>{if(!g){if(y)return;if(l&&200===(null===l||void 0===l?void 0:l.code)){const e=null===l||void 0===l?void 0:l.data;F(e)}}}),[l,y,g]);(0,t.useEffect)((()=>{if(!h){if(j)return;x&&200===(null===x||void 0===x?void 0:x.code)&&V(null===x||void 0===x?void 0:x.data)}}),[x,j,h]);const J=()=>(null===E||void 0===E?void 0:E.filter((e=>!0===(null===e||void 0===e?void 0:e.create_salary))).map((e=>({id:null===e||void 0===e?void 0:e.employee_id,is_hold:null===e||void 0===e?void 0:e.is_hold}))))||[];return(0,t.useEffect)((()=>{if(!D){if(A)return void e(null===m.Vg||void 0===m.Vg?void 0:m.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_PAY_RUN_STORE"));_&&200===(null===_||void 0===_?void 0:_.code)&&e(null===m.Vg||void 0===m.Vg?void 0:m.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_PAY_RUN_STORE"))}}),[_,A,D]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"cardBox  creatNewTicketOff ",children:[(0,p.jsxs)("div",{className:"header d-flex",children:[(0,p.jsx)(c.N_,{to:"/pay-runs",children:(0,p.jsx)(o.A,{})}),(0,p.jsx)("h5",{className:"title  fs-5 fw-bold text-primary",children:"Create Pay Run "})]}),(0,p.jsxs)("div",{className:"body ",children:[(0,p.jsx)(d.Cs,{filters:O,handleFilterFormData:(e,a)=>{var l;const t=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:s,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};B((e=>({...e,[t]:"checkbox"===s?d:n})))},onSubmitHandleFilter:()=>{var e,a,l,t;const n={};null!==T&&void 0!==T&&null!==(e=T.department)&&void 0!==e&&e.value&&(n.department_id=null===T||void 0===T||null===(a=T.department)||void 0===a?void 0:a.value),null!==T&&void 0!==T&&null!==(l=T.designation)&&void 0!==l&&l.value&&(n.designation_id=null===T||void 0===T||null===(t=T.designation)||void 0===t?void 0:t.value),null!==T&&void 0!==T&&T.employeeName&&(n.employee_name=null===T||void 0===T?void 0:T.employeeName)}}),(0,p.jsxs)("div",{className:"mt-3",children:[(0,p.jsx)("div",{className:"row ms-2",children:(0,p.jsx)(d.P_,{id:"allActiveCreatedSalary",checked:w,handleChange:e=>(e=>{const{checked:a}=null===e||void 0===e?void 0:e.target;R(a),C((e=>e.map((e=>({...e,create_salary:a})))))})(e),name:"allActiveCreatedSalary",label:"Create Salary For All"},"allActiveCreatedSalary")}),(0,p.jsx)("div",{style:(null===E||void 0===E?void 0:E.length)>9?{height:"539px",overflowX:"scroll"}:{},children:(0,p.jsx)(n.Ak,{data:E,fields:[{key:"sn",label:"S.N"},{key:"hold_salary",label:"Hold Salary"},{key:"create_salary",label:"Create Salary"},{key:"emp_code",label:"Emp ID"},{key:"employee_name",label:"Emp Name"},{key:"email",label:"Email"},{key:"department",label:"Department  "},{key:"designation",label:"Designation"}],isLoading:b,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:q})})]})]}),(0,p.jsx)("div",{className:"footer",children:(0,p.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,p.jsx)(i.Sv,{text:"Submit",classNames:"btn btn-org-gradient",handleClick:()=>(()=>{const l={month:(0,v.N_)(a,"YYYY-MM"),employee_ids:J()};e(null===m.Vg||void 0===m.Vg?void 0:m.Vg.addPayRunRequest(l))})()})})})]}),D&&(0,p.jsx)(i.L,{isShow:D,size:"lg"})]})}},99708:(e,a,l)=>{l.d(a,{A:()=>i});var t=l(65043),n=l(29829),s=l(45531),d=l(70579);const i=e=>{const{installmentData:a,setInstallmentData:l,loanData:i}=e,o=(0,t.useMemo)((()=>({amount:(e,t)=>(0,d.jsx)("span",{children:(0,d.jsx)(s.pd,{type:"number",className:"form-control border border-black text-center",id:"instl_amt",placeholder:"Installment Amount",onChange:e=>((e,t)=>{let n,s=a;s[t].amount=parseFloat(e).toFixed(2);let d=0;s.forEach(((e,a)=>(d+=parseFloat(e.amount),a===t?(n=parseFloat(null===i||void 0===i?void 0:i.amount)-d>=0?parseFloat(null===i||void 0===i?void 0:i.amount)-d:0,n/=(s.length-1-t).toFixed(2)):a>t&&(e.amount=JSON.stringify(n)),e))),l(s)})(e.target.value,t),value:parseFloat(null===e||void 0===e?void 0:e.amount)})})})),[a]);return(0,d.jsx)(t.Fragment,{children:(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)(n.Ak,{data:a,fields:[{key:"installment",label:"Installment"},{key:"payment_date",label:"Payment Date"},{key:"emi_amount",label:"Amount"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none",marginTop:"0px !important"},scopedSlots:o})})})}},95535:(e,a,l)=>{l.d(a,{A:()=>m});var t=l(65043),n=l(76513),s=l(85831),d=l(30171),i=l(94140),o=l(4409),r=l(19675),c=l(49985),u=l(70579);const m=e=>{let{data:a,fields:l,isLoading:m,scopedSlots:v={},onSearch:p,pagination:y,setCurrentPage:g,totalPages:h,currentPage:x,tableName:j,isHeader:b=!0,tableStyle:f,isShowSubMenu:N}=e;return(0,u.jsxs)("div",{className:"cardBox mb-3 mt-3",style:f||{},children:[b&&(0,u.jsxs)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:[(0,u.jsx)(d.A,{name:j}),(0,u.jsxs)("div",{className:"d-flex",children:[(0,u.jsx)("div",{className:"ticketFilter",children:(0,u.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Filter.."})}),(0,u.jsx)(s.Sv,{text:"Search",classNames:"btn btn-primary p-1 ms-3"})]})]}),(0,u.jsx)("div",{className:"table-responsive tableDiv",children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)(n.A,{tableHeader:l})}),(0,u.jsx)("tbody",{children:m?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:null===l||void 0===l?void 0:l.length,children:(0,u.jsx)(s.L,{isShow:m,size:"xl"})})}):a&&a.length>0?a.map(((e,a)=>{const n=(0,c.DF)(a,x);return(0,u.jsxs)(t.Fragment,{children:[(0,u.jsx)("tr",{children:l.map((a=>"sub_table"!==a.key?(0,u.jsx)(o.A,{style:{width:a.width||"auto"},children:v[a.key]?v[a.key](e,n):e[a.key]},a.key):(0,u.jsx)(o.A,{style:{width:a.width||"auto"}},a.key)))}),v.sub_table&&N.includes(a)&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:l.length,style:{padding:"3px 20px",backgroundColor:"#f9f9f9"},children:v.sub_table(e,n)})})]},a)})):!m&&(0,u.jsx)(i.A,{totalField:null===l||void 0===l?void 0:l.length})})]})}),h>1&&y&&(0,u.jsx)(r.A,{currentPage:x,totalPages:h,onPageChange:e=>g(e)})]})}}}]);
//# sourceMappingURL=8437.caaff2ef.chunk.js.map