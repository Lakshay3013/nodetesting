"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[2786],{96816:(e,l,a)=>{a.d(l,{A:()=>t});a(65043);var d=a(70579);const t=()=>(0,d.jsx)("div",{children:(0,d.jsxs)("svg",{version:"1.1",id:"Layer_1",x:0,y:0,viewBox:"0 0 512 512",xmlSpace:"preserve",className:"icon icon-xlg me-2",style:{height:"23px",width:"23px",cursor:"pointer"},children:[(0,d.jsx)("circle",{id:"Oval-3",opacity:".1",fill:"#2B76D2",cx:256,cy:256,r:256}),(0,d.jsx)("path",{fill:"#2B76D2",d:"M277.3 362.7c-5.3 0-10.6-2-14.7-5.9l-85.3-81.5c-4.1-3.9-6.5-9.3-6.6-15-.1-5.7 2-11.1 5.9-15.2l85.3-89.1c8.1-8.5 21.7-8.8 30.2-.7 8.5 8.1 8.8 21.6.7 30.2l-70.6 73.7 69.9 66.8c8.5 8.1 8.8 21.6.7 30.1-4.2 4.4-9.8 6.6-15.5 6.6z"})]})})},72786:(e,l,a)=>{a.r(l),a.d(l,{default:()=>p});var d=a(65043),t=a(29829),i=a(90607),n=a(50586),o=a(85831),s=(a(56462),a(96816)),r=a(73216),c=a(35475),v=a(22166),u=(a(52027),a(94174)),m=a(49985),y=a(70579);const p=()=>{const e=(0,v.wA)(),{payMonth:l}=(0,r.g)(),{getDepartmentListRes:a,getDepartmentListError:p,getDepartmentListPending:h}=(0,v.d4)((e=>e.department)),{getAllEmployeePending:g,getAllEmployeeRes:_,getAllEmployeeError:x}=(0,v.d4)((e=>e.employee)),{getEmployeeSalaryPending:f,getEmployeeSalaryRes:S,getEmployeeSalaryError:E,addPayRunPending:j,addPayRunRes:N,addPayRunError:b}=(0,v.d4)((e=>e.payroll)),{t:k}=(0,i.K)(),[A,D]=(0,d.useState)(1),[R,C]=(0,d.useState)(""),[P,V]=(0,d.useState)(!0),[w,L]=(0,d.useState)(""),[M,Y]=(0,d.useState)(""),[F,H]=(0,d.useState)(""),[B,O]=(0,d.useState)({employeeName:"",department:""}),q=(0,d.useMemo)((()=>({sn:(e,l)=>(0,y.jsx)("span",{children:l+1}),hold_salary:e=>(0,y.jsx)("span",{children:(0,y.jsx)(n.P_,{id:"is_hold",checked:null===e||void 0===e?void 0:e.is_hold,handleChange:l=>z(l,null,e),name:"is_hold"},"is_hold")}),create_salary:e=>(0,y.jsx)("span",{children:(0,y.jsx)(n.P_,{id:"create_salary",checked:null===e||void 0===e?void 0:e.create_salary,handleChange:l=>z(l,null,e),name:"create_salary"},"create_salary")})})),[P,R]);(0,d.useEffect)((()=>{U()}),[]);const T=[{name:"employeeName",label:"Select Employee / ID",type:"select",value:B.employeeName,data:F,placeholder:"Enter Employee Name",isMulti:!0},{name:"department",label:"Department",type:"select",data:M,value:B.department,placeholder:"Select Department"}],z=(e,l,a)=>{var d;const t=l||(null===(d=e.target)||void 0===d?void 0:d.name),{value:i,type:n,checked:o}=null!==e&&void 0!==e&&e.target?e.target:{value:e};C((e=>{const l=null===e||void 0===e?void 0:e.map((e=>(null===e||void 0===e?void 0:e._id)===(null===a||void 0===a?void 0:a._id)?{...e,[t]:"checkbox"===n?o:i}:e)),d=l.every((e=>e.create_salary));return V(d),l}))};(0,d.useEffect)((()=>{I()}),[A]);const I=()=>{e(null===u.Vg||void 0===u.Vg?void 0:u.Vg.getEmployeeSalaryRequest())};(0,d.useEffect)((()=>{if(!f){if(E)return;S&&200===(null===S||void 0===S?void 0:S.code)&&(C(null===S||void 0===S?void 0:S.data),L(null===S||void 0===S?void 0:S.data))}}),[S,E,f]);const U=()=>{var l;null!==a&&void 0!==a&&null!==(l=a.data)&&void 0!==l&&l.length?Y(null===a||void 0===a?void 0:a.data):e(u.vd.getDepartmentListRequest())};(0,d.useEffect)((()=>{if(!h){if(p)return;if(a&&200===(null===a||void 0===a?void 0:a.code)){const e=null===a||void 0===a?void 0:a.data;Y(e)}}}),[a,p,h]);(0,d.useEffect)((()=>{if(!g){if(x)return;_&&200===(null===_||void 0===_?void 0:_.code)&&H(null===_||void 0===_?void 0:_.data)}}),[_,x,g]);const K=()=>(null===R||void 0===R?void 0:R.filter((e=>!0===(null===e||void 0===e?void 0:e.create_salary))).map((e=>({id:null===e||void 0===e?void 0:e.employee_id,is_hold:null===e||void 0===e?void 0:e.is_hold}))))||[];return(0,d.useEffect)((()=>{if(!j){if(b)return void e(null===u.Vg||void 0===u.Vg?void 0:u.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_PAY_RUN_STORE"));N&&200===(null===N||void 0===N?void 0:N.code)&&e(null===u.Vg||void 0===u.Vg?void 0:u.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_PAY_RUN_STORE"))}}),[N,b,j]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"cardBox  creatNewTicketOff ",children:[(0,y.jsxs)("div",{className:"header d-flex",children:[(0,y.jsx)(c.N_,{to:"/pay-runs",children:(0,y.jsx)(s.A,{})}),(0,y.jsx)("h5",{className:"title  fs-5 fw-bold text-primary",children:"Create Pay Run "})]}),(0,y.jsxs)("div",{className:"body ",children:[(0,y.jsx)(n.Cs,{filters:T,handleFilterFormData:(e,l)=>{var a;const d=l||(null===(a=e.target)||void 0===a?void 0:a.name),{value:t,type:i,checked:n}=null!==e&&void 0!==e&&e.target?e.target:{value:e};O((e=>({...e,[d]:"checkbox"===i?n:t})))},onSubmitHandleFilter:()=>{var e,l,a,d;const t={};null!==B&&void 0!==B&&null!==(e=B.department)&&void 0!==e&&e.value&&(t.department_id=null===B||void 0===B||null===(l=B.department)||void 0===l?void 0:l.value),null!==B&&void 0!==B&&null!==(a=B.designation)&&void 0!==a&&a.value&&(t.designation_id=null===B||void 0===B||null===(d=B.designation)||void 0===d?void 0:d.value),null!==B&&void 0!==B&&B.employeeName&&(t.employee_name=null===B||void 0===B?void 0:B.employeeName)}}),(0,y.jsxs)("div",{className:"mt-3",children:[(0,y.jsx)("div",{className:"row ms-2",children:(0,y.jsx)(n.P_,{id:"allActiveCreatedSalary",checked:P,handleChange:e=>(e=>{const{checked:l}=null===e||void 0===e?void 0:e.target;V(l),C((e=>e.map((e=>({...e,create_salary:l})))))})(e),name:"allActiveCreatedSalary",label:"Create Salary For All"},"allActiveCreatedSalary")}),(0,y.jsx)("div",{style:(null===R||void 0===R?void 0:R.length)>9?{height:"539px",overflowX:"scroll"}:{},children:(0,y.jsx)(t.Ak,{data:R,fields:[{key:"sn",label:"S.N"},{key:"hold_salary",label:"Hold Salary"},{key:"create_salary",label:"Create Salary"},{key:"emp_code",label:"Emp ID"},{key:"employee_name",label:"Emp Name"},{key:"email",label:"Email"},{key:"department",label:"Department  "},{key:"designation",label:"Designation"}],isLoading:f,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:q})})]})]}),(0,y.jsx)("div",{className:"footer",children:(0,y.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,y.jsx)(o.Sv,{text:"Submit",classNames:"btn btn-org-gradient",handleClick:()=>(()=>{const a={month:(0,m.N_)(l,"YYYY-MM"),employee_ids:K()};e(null===u.Vg||void 0===u.Vg?void 0:u.Vg.addPayRunRequest(a))})()})})})]}),j&&(0,y.jsx)(o.L,{isShow:j,size:"lg"})]})}}}]);
//# sourceMappingURL=2786.5be586e4.chunk.js.map