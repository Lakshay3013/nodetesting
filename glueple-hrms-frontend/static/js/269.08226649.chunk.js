"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[269],{8173:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var s=i(5043),a=i(8334),n=i(9657),l=i(7656),d=i(2166),o=i(4174),r=i(4348),c=i.n(r),v=(i(4018),i(579));const m=e=>{let{data:t,divClass:i,inputStyle:s,setData:a}=e;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"ticketFilter",children:(0,v.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Filter..",onChange:e=>(e=>{let i=t;const{value:s}=e.target;let n=s.split(" ").map((e=>e.charAt(0).toLowerCase()+e.slice(1))).join(" "),l=i.filter(((e,t)=>null===e||void 0===e?void 0:e.name.toLowerCase().includes(n)));a(l),""==n&&a(t)})(e)})})})};var u=i(2145);const g=e=>{const{designationList:t,isLoading:i,setSelectedDesignation:a,getAllDesignation:r,toggleDesignation:g}=e,h=(0,d.wA)(),{deleteDesignationPending:x,deleteDesignationRes:N,deleteDesignationError:f}=(0,d.d4)((e=>e.designation)),[j,p]=(0,s.useState)(!1),[D,E]=(0,s.useState)(""),[A,S]=(0,s.useState)(),[b,_]=(0,s.useState)();(0,s.useEffect)((()=>{if(!x){if(f)return u.oR.error(null===f||void 0===f?void 0:f.errorMessage),void h(o.EU.handleClearDesignationStore("HANDLE_CLEAR_DELETE_DESIGNATION_STORE"));var e,t;if(N)if(200==(null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.code))u.oR.success(null===N||void 0===N||null===(t=N.data)||void 0===t?void 0:t.message),h(o.EU.handleClearDesignationStore("HANDLE_CLEAR_DELETE_DESIGNATION_STORE")),r()}}),[N,f,x]);return(0,s.useEffect)((()=>{S(t)}),[t]),(0,v.jsxs)("div",{className:"cardBox mb-3 mt-3",children:[(0,v.jsxs)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:[(0,v.jsx)("h3",{children:"Designations List"}),(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(m,{data:t,setData:S}),(0,v.jsx)(n.Sv,{text:"Search",classNames:"btn btn-primary p-1 ms-3"})]})]}),(0,v.jsx)("div",{className:"table-responsive tableDiv",children:(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Short Name"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Created At"}),(0,v.jsx)("th",{children:"Action"})]})}),(0,v.jsxs)("tbody",{children:[!i&&A&&A.length>0&&A.map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.name}),(0,v.jsx)("td",{children:e.short_name}),(0,v.jsx)("td",{children:(0,v.jsx)("span",{className:"badge ".concat(null!==e&&void 0!==e&&e.is_active?"text-success":"text-danger"),children:null!==e&&void 0!==e&&e.is_active?"Active":"Inactive"})}),(0,v.jsx)("td",{children:c()(null===e||void 0===e?void 0:e.created_at).format("DD-MM-YYYY")}),(0,v.jsx)("td",{children:(0,v.jsxs)("div",{className:"actionGroup d-flex gap-2",children:[(0,v.jsx)(n.Sv,{text:"Update",classNames:"btn btn-primary",handleClick:()=>(a(e),void g())}),(0,v.jsx)(n.Sv,{text:"Delete",handleClick:()=>{return t=null===e||void 0===e?void 0:e._id,p(!j),void _(t);var t},classNames:"btn btn-danger"})]})})]},t))),0==A&&!i&&(0,v.jsx)("p",{className:"text-danger",style:{fontSize:"23px",textAlign:"center",paddingTop:"20px"},children:"Data Not Found"})]})]})}),j&&(0,v.jsx)(l.A,{onApproveReject:(e,t)=>{if(e){let e={_id:b};h(null===o.EU||void 0===o.EU?void 0:o.EU.deleteDesignationRequest(e))}p(!j)},isShow:j,desc:"You want to delete this Designation",isLoading:x})]})};var h=i(728),x=i(6181),N=i(3474),f=i(2405);const j=e=>{const{getAllDesignation:t,setSelectedDesignation:i,isOpen:a,toggleDesignation:l,selectedDesignation:r}=e,[c,m]=(0,s.useState)({}),u=(0,d.wA)(),{addDesignationPending:g,addDesignationRes:j,addDesignationError:p}=(0,d.d4)((e=>e.designation)),{getAllDepartmentRes:D,getAllDepartmentPending:E,getAllDepartmentError:A}=(0,d.d4)((e=>e.department)),{updateDesignationPending:S,updateDesignationRes:b,updateDesignationError:_}=(0,d.d4)((e=>e.designation)),[C,R]=(0,s.useState)([]),I=(0,d.d4)((e=>e.notifications)),[L,y]=(0,s.useState)(!1),[T,w]=(0,s.useState)(""),[O,U]=(0,s.useState)({departmentId:"",designationName:"",shortName:""});(0,s.useEffect)((()=>{k()}),[]);const k=()=>{u(o.vd.getAllDepartmentRequest())};(0,s.useEffect)((()=>{if(!E){if(A)return void R([]);var e,t,i,s;if(D)if(200==(null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.code))R(null===D||void 0===D||null===(t=D.data)||void 0===t||null===(i=t.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.data)}}),[E,A,D]),(0,s.useEffect)((()=>{null!==I&&void 0!==I&&I.isOpen&&((0,f.m)(I.messageText,I.alertType),u(o.P9.notificationClose("NOTIFICATION_CLOSE")))}),[I]);(0,s.useEffect)((()=>{if(!g){if(p)return void u(o.EU.handleClearDesignationStore("HANDLE_CLEAR_ADD_DESIGNATION_STORE"));var e;if(j)200==(null===j||void 0===j||null===(e=j.data)||void 0===e?void 0:e.code)&&(u(o.EU.handleClearDesignationStore("HANDLE_CLEAR_ADD_DESIGNATION_STORE")),l(),t())}}),[g,j,p]);const F=e=>{c&&m({});const{name:t,value:i}=e.target;U({...O,[t]:i})};return(0,s.useEffect)((()=>{U({departmentId:null===r||void 0===r?void 0:r.department_id,designationName:(null===r||void 0===r?void 0:r.name)||"",shortName:(null===r||void 0===r?void 0:r.short_name)||""}),y(null===r||void 0===r?void 0:r.is_active),w(null===r||void 0===r?void 0:r._id)}),[r]),console.log(r,"selectedDesignation"),(0,s.useEffect)((()=>{if(!S){if(_)return void u(o.EU.handleClearDesignationStore("HANDLE_CLEAR_UPDATE_DESIGNATION_STORE"));var e;if(b)200==(null===b||void 0===b||null===(e=b.data)||void 0===e?void 0:e.code)&&(u(o.EU.handleClearDesignationStore("HANDLE_CLEAR_UPDATE_DESIGNATION_STORE")),l(),t())}}),[S,b,_]),(0,s.useEffect)((()=>{0==a&&(U({departmentId:"",designationName:"",shortName:""}),i(""),m({}))}),[a]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff ".concat(a?"show":""),tabIndex:-1,style:{visibility:a?"visible":"hidden"},children:[(0,v.jsxs)("div",{className:"offcanvas-header",children:[(0,v.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[r?"Update":"Create New"," Designation"]}),(0,v.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,v.jsx)("div",{className:"offcanvas-body",children:(0,v.jsxs)("div",{className:"formPanel",children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-md-3",children:(0,v.jsx)("div",{className:"form-group mb-3",children:(0,v.jsxs)("label",{children:["Select Depatment ",(0,v.jsx)("span",{className:"text-danger",children:"*"})," "]})})}),(0,v.jsx)("div",{className:"col-md-9",children:(0,v.jsxs)("div",{className:"form-group mb-3",children:[(0,v.jsxs)("select",{className:"form-select",name:"departmentId",value:null===O||void 0===O?void 0:O.departmentId,onChange:e=>F(e),disabled:"",children:[(0,v.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Department..."}),C&&(null===C||void 0===C?void 0:C.length)>0&&(null===C||void 0===C?void 0:C.map(((e,t)=>(0,v.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name}))))]}),(null===c||void 0===c?void 0:c.department)&&(0,v.jsx)(N.A,{text:c.department})]})}),(0,v.jsx)("div",{className:"col-md-3",children:(0,v.jsx)("div",{className:"form-group mb-3",children:(0,v.jsxs)("label",{htmlFor:!0,children:["Name ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]})})}),(0,v.jsx)("div",{className:"col-md-9",children:(0,v.jsxs)("div",{className:"form-group mb-3",children:[(0,v.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Enter Designation Name",name:"designationName",value:(null===O||void 0===O?void 0:O.designationName)||"",onChange:e=>F(e)}),(null===c||void 0===c?void 0:c.designationName)&&(0,v.jsx)(N.A,{text:c.designationName})]})})]}),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-md-3",children:(0,v.jsx)("div",{className:"form-group mb-3",children:(0,v.jsxs)("label",{htmlFor:!0,children:["Short Name ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]})})}),(0,v.jsx)("div",{className:"col-md-9",children:(0,v.jsxs)("div",{className:"form-group mb-3",children:[(0,v.jsx)("input",{type:"text",className:"form-control fs-7",name:"shortName",placeholder:"Enter Short Name",value:null===O||void 0===O?void 0:O.shortName,onChange:e=>F(e)}),(null===c||void 0===c?void 0:c.shortName)&&(0,v.jsx)(N.A,{text:c.shortName})]})})]}),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-md-3",children:(0,v.jsx)("div",{className:"form-group mb-3",children:(0,v.jsx)("label",{htmlFor:!0,children:"Is Active"})})}),(0,v.jsx)("div",{className:"col-md-9",children:(0,v.jsx)("div",{className:"form-group mb-3",children:(0,v.jsx)("input",{type:"checkbox",placeholder:"Is Active",checked:L,onChange:e=>y(!L)})})})]}),(0,v.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:(0,v.jsx)(n.Sv,{type:"button",classNames:"btn btn-primary gradientBg",handleClick:e=>(async()=>{const e=await(0,x.i6)(h.Mv,O);if(e.isValid){m({});let e={department_id:null===O||void 0===O?void 0:O.departmentId,name:(null===O||void 0===O?void 0:O.designationName)||"",short_name:(null===O||void 0===O?void 0:O.shortName)||"",is_active:L};r?(e._id=T,u(o.EU.updateDesignationRequest(e))):u(o.EU.addDesignationRequest(e))}else m(e.errors)})(),isLoading:r?S:g,text:"".concat(r?"Update":"Create"," Designation")})})]})})]})})},p=()=>{const e=(0,d.wA)(),{getAllDesignationRes:t,getAllDesignationError:i,getAllDesignationPending:n}=(0,d.d4)((e=>e.designation)),[l,r]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{f()}),[]);const N=()=>{x(!h)},f=()=>{e(o.EU.getAllDesignationRequest())};return(0,s.useEffect)((()=>{if(!n){if(i)return void u.oR.error(null===i||void 0===i?void 0:i.errorMessage);var e,s,a,l;if(t)if(200==(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.code))r(null===t||void 0===t||null===(s=t.data)||void 0===s||null===(a=s.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.data)}}),[t,i,n]),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"cardHead d-flex align-items-center justify-content-between",children:(0,v.jsx)(a.A,{btnClassName:"btn btn-primary gradientBg",onClickFun:()=>N(),children:"Create New Designation"})}),(0,v.jsx)(g,{designationList:l,isLoading:n,getAllDesignation:f,setSelectedDesignation:m,toggleDesignation:N}),(0,v.jsx)(j,{getAllDesignation:f,setSelectedDesignation:m,isOpen:h,toggleDesignation:N,selectedDesignation:c})]})}}}]);
//# sourceMappingURL=269.08226649.chunk.js.map