"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[8435],{58435:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var i=a(65043),s=a(29829),t=a(45531),d=a(26181),n=a(85831),r=a(90607),o=a(80728),v=a(22166),c=a(56462),u=a(70579);const m=e=>{const{t:l}=(0,r.K)(),{addTravelTypePending:a}=(0,v.d4)((e=>e.travelAndClaim)),{selectedTravelType:s,openModel:m,handleOpenClose:p,addUpdateTravelTypeData:g,filteredDropdownData:h}=e,[x,T]=(0,i.useState)({}),[f,_]=(0,i.useState)({travel_category:null,isTravel:!0,travel_type:"",isActive:!0}),j=(e,l)=>{var a;const i=l||(null===(a=e.target)||void 0===a?void 0:a.name),{value:s,type:t,checked:d}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};_((e=>({...e,[i]:"checkbox"===t?d:s}))),T((e=>({...e,[i]:void 0})))};(0,i.useEffect)((()=>()=>{y()}),[m]),(0,i.useEffect)((()=>{s&&_({travel_type:null===s||void 0===s?void 0:s.name,isActive:null===s||void 0===s?void 0:s.is_active,travel_category:{label:null===s||void 0===s?void 0:s.travel_category_label,value:null===s||void 0===s?void 0:s.travel_category_value},isTravel:null===s||void 0===s?void 0:s.is_travel})}),[s]);const y=()=>{_({travel_type:"",isActive:!1,travel_category:null,isTravel:!0}),T({})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(m?"show":""),tabIndex:-1,style:{visibility:m?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[s?"Update":"Add"," Travel Type"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>p("travel_type")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.JU,{text:l("labels.travelCategory"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group mb-2",children:[(0,u.jsx)(c.A,{data:null===h||void 0===h?void 0:h.travel_category,placeholder:"Select Travel Type",value:(null===f||void 0===f?void 0:f.travel_category)||"",handleChange:e=>j(e,"travel_category")}),(null===x||void 0===x?void 0:x.travel_category)&&(0,u.jsx)(n.eo,{text:x.travel_category})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.JU,{text:l("labels.travelType"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group mb-2",children:[(0,u.jsx)(t.pd,{type:"text",placeholder:l("placeholders.travelType"),value:null===f||void 0===f?void 0:f.travel_type,name:"travel_type",onChange:e=>j(e)}),(null===x||void 0===x?void 0:x.travel_type)&&(0,u.jsx)(n.eo,{text:x.travel_type})]})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.JU,{text:l("labels.isActive")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.P_,{id:"isActive",checked:null===f||void 0===f?void 0:f.isActive,handleChange:e=>j(e),name:"isActive"},"isActive")})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.JU,{text:l("labels.isTravel")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.P_,{id:"isTravel",checked:null===f||void 0===f?void 0:f.isTravel,handleChange:e=>j(e),name:"isTravel"},"isTravel")})})]})]})}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(n.Sv,{text:l(s?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,d.i6)(o.N7,f);if(e.isValid){const{isActive:e,travel_type:l,travel_category:a,isTravel:i}=f,s={travel_category:null===a||void 0===a?void 0:a.value,name:l,is_active:e,is_travel:i};g(s)}else T(e.errors)})(),isLoading:s?"":a})})})]}),m&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};var p=a(94174),g=a(52027);const h=e=>{var l,a;const{t:s}=(0,r.K)(),{addTravelRulePending:m}=(0,v.d4)((e=>e.travelAndClaim)),{selectedTravelRuleData:p,openModel:g,handleOpenClose:h,addTravelRuleData:x,allDesignations:T,allDepartments:f,handleDesignationByDepartment:_,handleAddTravelTypeRule:j,allTravelList:y,filteredDropdownData:b}=e,[A,N]=(0,i.useState)({}),[R,E]=(0,i.useState)({ruleName:"",department:null,designation:null,description:"",maxAmount:"",isTravel:!0,isActive:!0,self:!1}),C=(e,l)=>{var a;const i=l||(null===(a=e.target)||void 0===a?void 0:a.name),{value:s,type:t,checked:d}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};E((e=>{let l={...e,[i]:"checkbox"===t?d:s};return"travelType"===i&&(l={...l,travelClass:null}),"department"===i&&_(null===s||void 0===s?void 0:s.value),l})),N((e=>({...e,[i]:void 0})))};(0,i.useEffect)((()=>()=>{D()}),[g]),(0,i.useEffect)((()=>{p&&E({ruleName:null===p||void 0===p?void 0:p.name,description:null===p||void 0===p?void 0:p.description,isActive:null===p||void 0===p?void 0:p.is_active,maxAmount:null===p||void 0===p?void 0:p.max_amount,perKilometerPrice:null===p||void 0===p?void 0:p.perKilometerPrice,travelClass:{label:null===p||void 0===p?void 0:p.travel_class_name,value:null===p||void 0===p?void 0:p.travel_class_value},travelType:{label:null===p||void 0===p?void 0:p.travel_type_name,value:null===p||void 0===p?void 0:p.travel_type_value},parkingCharges:null===p||void 0===p?void 0:p.parking_charges,self:null===p||void 0===p?void 0:p.self})}),[p]);const D=()=>{E({ruleName:"",perKilometerPrice:"",description:"",maxAmount:"",isActive:!0,travelClass:null,travelType:null,parkingCharges:"",self:!1}),N({})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(g?"show":""),tabIndex:-1,style:{visibility:g?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[p?"Update":"Add"," Rule"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>h("travel_rule")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(t.JU,{text:s("labels.ruleName"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(t.pd,{type:"text",placeholder:s("placeholders.ruleName"),value:null===R||void 0===R?void 0:R.ruleName,name:"ruleName",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.ruleName)&&(0,u.jsx)(n.eo,{text:A.ruleName})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(t.JU,{text:"Travel Type",required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(c.A,{data:y,placeholder:"Select Travel Type",value:(null===R||void 0===R?void 0:R.travelType)||"",handleChange:e=>C(e,"travelType")}),(null===A||void 0===A?void 0:A.travelType)&&(0,u.jsx)(n.eo,{text:A.travelType})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(t.JU,{text:s("labels.maxAmount"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(t.pd,{type:"number",placeholder:s("placeholders.maxAmount"),value:null===R||void 0===R?void 0:R.maxAmount,name:"maxAmount",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.maxAmount)&&(0,u.jsx)(n.eo,{text:A.maxAmount})]})]}),!["67e233a5806b643e3c2b3994","67e23468806b643e3c2b39b0"].includes(null===R||void 0===R||null===(l=R.travelType)||void 0===l?void 0:l.travel_category_value)&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(t.JU,{text:"Travel Class"}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(c.A,{data:(()=>{var e,l;switch(null===R||void 0===R||null===(e=R.travelType)||void 0===e||null===(l=e.label)||void 0===l?void 0:l.toLowerCase()){case"car":return null===b||void 0===b?void 0:b.car_type;case"flight":return null===b||void 0===b?void 0:b.flight_class;case"train":case"bus":return null===b||void 0===b?void 0:b.travel_class_type;default:return[]}})(),placeholder:"Select Travel Class",value:(null===R||void 0===R?void 0:R.travelClass)||"",handleChange:e=>C(e,"travelClass")}),(null===A||void 0===A?void 0:A.travelClass)&&(0,u.jsx)(n.eo,{text:A.travelClass})]})]})}),["67e233e6806b643e3c2b399c"].includes(null===R||void 0===R||null===(a=R.travelType)||void 0===a?void 0:a.travel_category_value)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(t.JU,{text:s("labels.perKilometerPrice"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(t.pd,{type:"number",placeholder:s("placeholders.perKilometerPrice"),value:null===R||void 0===R?void 0:R.perKilometerPrice,name:"perKilometerPrice",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.perKilometerPrice)&&(0,u.jsx)(n.eo,{text:A.perKilometerPrice})]})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)(t.JU,{text:s("labels.parkingCharges"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(t.pd,{type:"number",placeholder:s("placeholders.parkingCharges"),value:null===R||void 0===R?void 0:R.parkingCharges,name:"parkingCharges",onChange:e=>C(e)}),(null===A||void 0===A?void 0:A.parkingCharges)&&(0,u.jsx)(n.eo,{text:A.parkingCharges})]})]})]}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)(t.JU,{text:s("labels.description")}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(t.TM,{placeholder:s("placeholders.description"),onChange:e=>C(e),name:"description",value:null===R||void 0===R?void 0:R.description}),(null===A||void 0===A?void 0:A.description)&&(0,u.jsx)(n.eo,{text:A.description})]})]})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.JU,{text:s("labels.isActive")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.P_,{id:"isActive",checked:null===R||void 0===R?void 0:R.isActive,handleChange:e=>C(e),name:"isActive"},"iActive")})})]}),(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.JU,{text:s("labels.self")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(t.P_,{id:"self",checked:null===R||void 0===R?void 0:R.self,handleChange:e=>C(e),name:"self"},"iActive")})})]})]})}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(n.Sv,{text:s(p?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,d.i6)(o.VY,R);if(e.isValid){const{ruleName:e,description:l,maxAmount:a,isActive:i,perKilometerPrice:s,parkingCharges:t,travelClass:d,travelType:n,self:r}=R,o={name:e,description:l,max_amount:a,is_active:i,per_kilometer_price:s,parking_charges:t,travel_class:null===d||void 0===d?void 0:d.value,travel_id:null===n||void 0===n?void 0:n.value,self:r};j(o)}else N(e.errors)})(),isLoading:p?"":m})})})]}),g&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};a(53536);var x=a(62001);const T=e=>{let{openModel:l,handleOpenClose:a,travelRuleData:s,assignRule:d,travelTypeDataByIdRuleData:o,selectedTravelType:m,setTravelTypeDataByIdRuleData:g,isLoading:h}=e;const{t:T}=(0,r.K)(),{getDropdownMasterConstantDataPending:f,getDropdownMasterConstantDataRes:_,getDropdownMasterConstantDataError:j}=(0,v.d4)((e=>e.dropdownMaster));console.log("selectedTravelType.....................",m);const y=(0,v.wA)(),[b,A]=(0,i.useState)([]),[N,R]=(0,i.useState)(""),[E,C]=(0,i.useState)([{label:null,inputType:null}]),[D,S]=(0,i.useState)({}),L=((0,i.useMemo)((()=>({sn:(e,l)=>(0,u.jsx)("span",{children:l+1}),select:e=>(0,u.jsx)("span",{children:(0,u.jsx)(t.P_,{id:"assign",checked:null===e||void 0===e?void 0:e.assign,handleChange:l=>L(l,e),name:"assign"},"assign")})})),[b]),(e,l)=>{const{value:a,name:i,checked:s,type:t}=e.target;A((e=>null===e||void 0===e?void 0:e.map((e=>(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l?void 0:l.id)?{...e,[i]:"checkbox"===t?s:a}:e))))});(0,i.useEffect)((()=>{w()}),[]);const w=()=>{y(null===p.dk||void 0===p.dk?void 0:p.dk.getDropdownMasterConstantDataRequest())};(0,i.useEffect)((()=>{if(!f){if(j)return;if(_&&200===(null===_||void 0===_?void 0:_.code)){const e=null===_||void 0===_?void 0:_.data;R(e)}}}),[_,j,f]),(0,i.useEffect)((()=>{if(s)if((null===o||void 0===o?void 0:o.length)>0){const e=null===s||void 0===s?void 0:s.map((e=>({...e,assign:o.includes(null===e||void 0===e?void 0:e.id)})));A(e)}else A(s)}),[s,o]);const P=e=>{const l=[];return null===e||void 0===e||e.map((e=>{var a;null===l||void 0===l||l.push({label:null===e||void 0===e?void 0:e.label,inputType:null===e||void 0===e||null===(a=e.inputType)||void 0===a?void 0:a.value})})),l};(0,i.useEffect)((()=>()=>{A([]),g(""),y(p.o1.handleClearTravelStore("HANDLE_CLEAR_GET_TRAVEL_TYPE_BY_ID_STORE"))}),[]);const k=(e,l,a)=>{var i;const s=l||(null===(i=e.target)||void 0===i?void 0:i.name),{value:t}=null!==e&&void 0!==e&&e.target?null===e||void 0===e?void 0:e.target:{value:e};C((e=>null===e||void 0===e?void 0:e.map(((e,l)=>l===a?{...e,[s]:t}:e))))},I=()=>{C((e=>[...e,{label:"",inputType:""}]))};return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:" Travel Rule Type"}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>a("assign_rule")})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest  ",children:E&&(null===E||void 0===E?void 0:E.map(((e,l)=>(0,u.jsx)("div",{className:"row m-2",children:(0,u.jsx)("div",{className:"formPanel",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-5",children:[(0,u.jsx)(t.JU,{text:T("labels.ruleType"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(t.pd,{type:"text",placeholder:T("placeholders.ruleType"),value:e.label,name:"label",onChange:e=>k(e,null,l)}),(null===D||void 0===D?void 0:D.ruleName)&&(0,u.jsx)(t.eo,{text:D.ruleName})]})]}),(0,u.jsxs)("div",{className:"col-md-5",children:[console.log("sdfsdfdsf",null===e||void 0===e?void 0:e.inputType),(0,u.jsx)(t.JU,{text:T("labels.ruleInputType"),required:!0}),(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(c.A,{data:N.dropdownInputType,placeholder:T("placeholders.ruleInputType"),value:(null===e||void 0===e?void 0:e.inputType)||"",handleChange:e=>k(e,"inputType",l),name:"inputType"}),(null===D||void 0===D?void 0:D.department)&&(0,u.jsx)(t.eo,{text:D.department})]})]}),(0,u.jsx)("div",{className:"col-md-2",children:(0,u.jsxs)("div",{className:"form-group mb-5",children:[E.length-1==l&&(0,u.jsx)("div",{className:"me-3",onClick:I,children:(0,u.jsx)(x.A,{imgSrc:"images/add-icon3.svg",altText:"",width:32})}),E.length>1&&(0,u.jsx)("div",{onClick:()=>(e=>{const l=E.filter(((l,a)=>a!==e));C(l)})(l),children:(0,u.jsx)(x.A,{imgSrc:"images/deletebg-Icon.svg",altText:"",width:32})})]})})]})})},l))))}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(n.Sv,{text:"Assign Rule",classNames:"btn btn-org-gradient",handleClick:()=>(()=>{const e={_id:null===m||void 0===m?void 0:m.id,rule_details:P(E)};d(e)})()})})})]}),l&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})};var f=a(49985),_=a(35685),j=a(73216);const y=e=>{const{allDesignations:l,assignRuleData:a,travelTypeAssignRuleData:s,allTravelList:t}=e,[d,n]=(0,i.useState)("");(0,i.useEffect)((()=>{a&&(null===l||void 0===l?void 0:l.length)>0&&(null===s||void 0===s?void 0:s.length)>0&&r()}),[a,l,s]);const r=()=>{let e={};l&&(null===l||void 0===l||l.forEach((l=>{null===a||void 0===a||a.forEach((a=>{(null===a||void 0===a?void 0:a.designation_id)===(null===l||void 0===l?void 0:l._id)&&s&&(null===s||void 0===s||s.forEach((i=>{var s;if(null!==a&&void 0!==a&&null!==(s=a.travel_rule_ids)&&void 0!==s&&s.includes(null===i||void 0===i?void 0:i._id)){const a=`${null===i||void 0===i?void 0:i.travel_id}`;e[null===l||void 0===l?void 0:l._id]||(e[null===l||void 0===l?void 0:l._id]={}),e[null===l||void 0===l?void 0:l._id][a]||(e[null===l||void 0===l?void 0:l._id][a]=[]),e[null===l||void 0===l?void 0:l._id][a].push(i)}})))}))}))),n(e)};return(0,u.jsx)("div",{className:"table-responsive tableDiv",style:{height:"437px"},children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Designation"}),t&&(null===t||void 0===t?void 0:t.map((e=>(0,u.jsx)("th",{children:null===e||void 0===e?void 0:e.label},(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.label)))))]})}),(0,u.jsx)("tbody",{children:null!==l&&void 0!==l&&l.length?(0,u.jsx)(u.Fragment,{children:l&&(null===l||void 0===l?void 0:l.map((e=>a&&(null===a||void 0===a?void 0:a.some((l=>(null===l||void 0===l?void 0:l.designation_id)===(null===e||void 0===e?void 0:e._id))))?(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)("div",{style:{width:"200px"},children:null===e||void 0===e?void 0:e.label})}),t.map((l=>{var a,i;const s=(null===(a=d[null===e||void 0===e?void 0:e._id])||void 0===a||null===(i=a[null===l||void 0===l?void 0:l._id])||void 0===i?void 0:i.map((e=>null===e||void 0===e?void 0:e.name)))||[];return(0,u.jsx)("td",{children:(0,u.jsx)("div",{style:{width:"150px"},children:s.length>0?[...new Set(s)].join(", "):"-"})},(null===l||void 0===l?void 0:l._id)||(null===l||void 0===l?void 0:l.label))}))]},null===e||void 0===e?void 0:e._id):null)))}):null})]})})},b=()=>{const{t:e}=(0,r.K)(),l=(0,v.wA)(),{addTravelTypePending:a,addTravelTypeRes:d,addTravelTypeError:o,getTravelTypePending:c,getTravelTypeRes:x,getTravelTypeError:b,updateTravelTypePending:A,updateTravelTypeRes:N,updateTravelTypeError:R,deleteTravelTypePending:E,deleteTravelTypeRes:C,deleteTravelTypeError:D,getAllTravelTypePending:S,getAllTravelTypeRes:L,getAllTravelTypeError:w,createTravelAndClaimRulePending:P,createTravelAndClaimRuleRes:k,createTravelAndClaimRuleError:I,getTravelAndClaimRulePending:U,getTravelAndClaimRuleRes:q,getTravelAndClaimRuleError:M,updateTravelAndClaimRulePending:O,updateTravelAndClaimRuleRes:H,updateTravelAndClaimRuleError:B,deleteTravelAndClaimRulePending:V,deleteTravelAndClaimRuleRes:J,deleteTravelAndClaimRuleError:K,getAllTravelAndClaimRulePending:F,getAllTravelAndClaimRuleRes:Y,getAllTravelAndClaimRuleError:$,assignRulePending:X,assignRuleRes:G,assignRuleError:Q,getTravelTypeByIdPending:Z,getTravelTypeByIdRes:z,getTravelTypeByIdError:W,getAssignRulePending:ee,getAssignRuleRes:le,getAssignRuleError:ae}=(0,v.d4)((e=>e.travelAndClaim)),{getFilteredDropdownDataError:ie,getFilteredDropdownDataRes:se,getFilteredDropdownDataPending:te}=(0,v.d4)((e=>e.dropdownMaster)),de=(0,j.Zp)(),{getDepartmentListRes:ne,getDepartmentListError:re,getDepartmentListPending:oe}=(0,v.d4)((e=>e.department)),{getDesignationsByDepartmentRes:ve,getDesignationsByDepartmentPending:ce,getDesignationsByDepartmentError:ue}=(0,v.d4)((e=>e.designation)),me=((0,f.Yo)("update_travel_type"),(0,f.Yo)("update_travel_rule")),pe=(0,f.Yo)("delete_travel_rule"),[ge,he]=(0,i.useState)([]),[xe,Te]=(0,i.useState)(""),[fe,_e]=(0,i.useState)(!1),[je,ye]=(0,i.useState)(!1),[be,Ae]=(0,i.useState)(!1),[Ne,Re]=(0,i.useState)([]),[Ee,Ce]=(0,i.useState)([]),[De,Se]=(0,i.useState)(""),[Le,we]=(0,i.useState)(""),[Pe,ke]=(0,i.useState)(""),[Ie,Ue]=(0,i.useState)(""),[qe,Me]=(0,i.useState)(""),[Oe,He]=(0,i.useState)(!1),[Be,Ve]=(0,i.useState)(""),[Je,Ke]=(0,i.useState)(!1),[Fe,Ye]=(0,i.useState)(""),[$e,Xe]=(0,i.useState)(""),[Ge,Qe]=(0,i.useState)({}),[Ze,ze]=(0,i.useState)(""),[We,el]=(0,i.useState)({currPageTravelType:1,currPageTravelRule:1}),ll=[{name:"Travel Type",onClickFun:e=>nl(e),id:"travel_type",permissionId:"travel_type"},{name:"Travel Rule",onClickFun:e=>nl(e),id:"travel_rule",permissionId:"travel_rule"},{name:"Assign Rule",onClickFun:e=>nl(e),id:"assign_rule",permissionId:"assign_rule"}],al=(0,f.Ri)(ll);(0,i.useEffect)((()=>{ol(),vl(),hl(),xl(),Tl(),fl()}),[]);const il=(e,l)=>{"travel_type"===e?(Ue(l||""),_e(!fe)):"travel_rule"===e?(Ve(l||""),Ae(!be)):"assign_rule"==e&&(ye(!je),null!==l&&void 0!==l&&l.id?(gl(null===l||void 0===l?void 0:l.id),Ue(l)):Ue(""))},sl=(e,l)=>{"travel_type"===e&&(Ue(l||""),He(!Oe)),"travel_rule"===e&&Ke(!Je)},tl=[{key:"sn",label:"S.N"},{key:"name",label:"Travel Type"},{key:"is_active",label:"status"},me&&{key:"action",label:"Action"}],dl=(0,i.useMemo)((()=>({sn:(e,l)=>(0,u.jsx)("span",{children:l+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,f.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),action:e=>(0,u.jsxs)("div",{className:"btn-group actionDrp",children:[(0,u.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,u.jsx)("ul",{className:"dropdown-menu",children:me&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{il("travel_type",e)},children:[(0,u.jsx)(t.In,{className:"fa fa-edit me-1"}),"Update"]})})})]})})),[]),nl=e=>{"travel_rule"===e&&pl()},rl=(e,l)=>{"travel_type"===l&&(el({...We,currPageTravelType:e}),ol(e)),"travel_rule"===l&&(el({...We,currPageTravelRule:e}),pl(e))};(0,i.useEffect)((()=>{if(!a){if(o)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ADD_TRAVEL_TYPE_STORE"));d&&200===(null===d||void 0===d?void 0:d.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ADD_TRAVEL_TYPE_STORE")),il("travel_type"),ol())}}),[a,d,o]),(0,i.useEffect)((()=>{if(!A){if(R)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_TYPE_STORE"));N&&200===(null===N||void 0===N?void 0:N.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_TYPE_STORE")),il("travel_type"),ol())}}),[A,N,R]);(0,i.useEffect)((()=>{if(!E){if(D)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_TYPE_STORE"));C&&200===(null===C||void 0===C?void 0:C.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_TYPE_STORE")),ol(),sl("travel_type"))}}),[E,C,D]);const ol=e=>{const a={page:e||(null===We||void 0===We?void 0:We.currPageTravelType),limit:g.X$.limit};l(p.o1.getTravelTypeRequest(a))};(0,i.useEffect)((()=>{if(!c){if(b)return;x&&200===(null===x||void 0===x?void 0:x.code)&&Te(null===x||void 0===x?void 0:x.data)}}),[c,x,b]);const vl=()=>{const e=null===ne||void 0===ne?void 0:ne.data;null!==e&&void 0!==e&&e.length?Re(e):l(p.vd.getDepartmentListRequest())};(0,i.useEffect)((()=>{if(!oe){if(re)return;if(ne&&200===(null===ne||void 0===ne?void 0:ne.code)){const e=null===ne||void 0===ne?void 0:ne.data;Re(e)}}}),[ne,re,oe]);(0,i.useEffect)((()=>{if(!ce){if(ue)return;if(ve&&200===(null===ve||void 0===ve?void 0:ve.code)){const e=null===ve||void 0===ve?void 0:ve.data;Ce(e)}}}),[ve,ue,ce]);const cl=[{key:"sn",label:"S.N"},{key:"name",label:"Rule Name"},{key:"max_amount",label:"Amount"},{key:"is_active",label:"Active"},(me||pe)&&{key:"action",label:"Action"}],ul=(0,i.useMemo)((()=>({sn:(e,l)=>(0,u.jsx)("span",{children:l+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,f.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),action:e=>(0,u.jsxs)("div",{className:"btn-group actionDrp",children:[(0,u.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,u.jsxs)("ul",{className:"dropdown-menu",children:[me&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{il("travel_rule",e)},children:[(0,u.jsx)(t.In,{className:"fa fa-calendar me-1"}),"Update"]})}),pe&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>ml(e._id),children:[(0,u.jsx)(t.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[]);(0,i.useEffect)((()=>{if(!P){if(I)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_CREATE_TRAVEL_AND_CLAIM_RULE_STORE"));k&&200===(null===k||void 0===k?void 0:k.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_CREATE_TRAVEL_AND_CLAIM_RULE_STORE")),il("travel_rule"),pl(),hl())}}),[P,k,I]),(0,i.useEffect)((()=>{if(!O){if(B)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_AND_CLAIM_RULE_STORE"));H&&200===(null===H||void 0===H?void 0:H.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_UPDATE_TRAVEL_AND_CLAIM_RULE_STORE")),il("travel_rule"),pl(),hl())}}),[O,H,B]);const ml=e=>{e&&Ye(e),sl("travel_rule")};(0,i.useEffect)((()=>{if(!V){if(K)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_AND_CLAIM_RULE_STORE"));J&&200===(null===J||void 0===J?void 0:J.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_DELETE_TRAVEL_AND_CLAIM_RULE_STORE")),sl("travel_rule"),pl(),hl())}}),[V,J,K]);const pl=e=>{let a={page:e||(null===We||void 0===We?void 0:We.currPageTravelRule),limit:g.X$.limit};l(p.o1.getTravelAndClaimRuleRequest(a))};(0,i.useEffect)((()=>{if(!U){if(M)return;q&&200===(null===q||void 0===q?void 0:q.code)&&Se(null===q||void 0===q?void 0:q.data)}}),[U,q,M]);const gl=e=>{const a={_id:e};l(p.o1.getTravelTypeByIdRequest(a))};(0,i.useEffect)((()=>{if(!Z){if(W)return;z&&200===(null===z||void 0===z?void 0:z.code)&&ke(null===z||void 0===z?void 0:z.data)}}),[Z,z,W]);const hl=()=>{l(p.o1.getAllTravelAndClaimRuleRequest())};(0,i.useEffect)((()=>{if(!F){if($)return;Y&&200===(null===Y||void 0===Y?void 0:Y.code)&&we(null===Y||void 0===Y?void 0:Y.data)}}),[F,Y,$]);(0,i.useEffect)((()=>{if(!X){if(Q)return void l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ASSIGN_RULE_STORE"));G&&200===(null===G||void 0===G?void 0:G.code)&&(l(p.o1.handleClearTravelStore("HANDLE_CLEAR_ASSIGN_RULE_STORE")),il("assign_rule"),Ue(""))}}),[X,G,Q]);const xl=()=>{l(p.o1.getAllTravelTypeRequest())};(0,i.useEffect)((()=>{if(!S){if(w)return;L&&200===(null===L||void 0===L?void 0:L.code)&&Xe(null===L||void 0===L?void 0:L.data)}}),[L,w,S]);const Tl=()=>{let e={category:["travel_category","flight_class","car_type","travel_class_type"]};l(p.dk.getFilteredDropdownDataRequest(e))};(0,i.useEffect)((()=>{if(!te){if(ie)return;if(se&&200===(null===se||void 0===se?void 0:se.code)){var e;const l=(0,f.Ib)(null===se||void 0===se||null===(e=se.data)||void 0===e?void 0:e.data);Qe(l)}}}),[se,ie,te]);const fl=e=>{l(p.o1.getAssignRuleRequest(e))};return(0,i.useEffect)((()=>{if(!ee){if(ae)return;le&&200===(null===le||void 0===le?void 0:le.code)&&ze(null===le||void 0===le?void 0:le.data)}}),[ee,le,ae]),(0,u.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,u.jsxs)("div",{className:"cardHead d-flex",children:[(0,u.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,u.jsx)("h4",{className:"ms-2 ",children:"Travel Setting"})]}),(0,u.jsx)("div",{})]}),(0,u.jsx)(s.QE,{tabs:ll,type:"travelSetting"}),(0,u.jsxs)("div",{className:"tab-content",children:[(0,u.jsxs)("div",{className:`tab-pane fade ${"travel_type"===al&&"active show"}`,id:"travel_type",children:[(0,u.jsx)("div",{className:"d-flex gap-3 justify-content-end",children:(0,u.jsx)(n.Sv,{text:"Travel Type",classNames:"btn btn-primary",handleClick:()=>il("travel_type"),slug:"add_travel_type",icon:(0,u.jsx)(t.In,{className:"fa fa-plus"})})}),(0,u.jsx)(s.Ak,{data:null===xe||void 0===xe?void 0:xe.data,fields:tl,isLoading:c,pagination:!0,currentPage:null===We||void 0===We?void 0:We.currPageTravelType,setCurrentPage:e=>rl(e,"travel_type"),totalPages:null===xe||void 0===xe?void 0:xe.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:dl})]}),(0,u.jsxs)("div",{className:`tab-pane fade ${"travel_rule"===al&&"active show"}`,id:"travel_rule",children:[(0,u.jsx)("div",{className:"d-flex gap-3 justify-content-end ",children:(0,u.jsx)(n.Sv,{text:"Travel Rule",classNames:"btn btn-primary",handleClick:()=>il("travel_rule"),slug:"add_travel_rule",icon:(0,u.jsx)(t.In,{className:"fa fa-plus"})})}),(0,u.jsx)(s.Ak,{data:null===De||void 0===De?void 0:De.data,fields:cl,isLoading:U,pagination:!0,currentPage:null===We||void 0===We?void 0:We.currPageTravelRule,setCurrentPage:e=>rl(e,"travel_rule"),totalPages:null===De||void 0===De?void 0:De.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:ul})]}),(0,u.jsxs)("div",{className:`tab-pane fade ${"assign_rule"===al&&"active show"}`,id:"assign_rule",children:[(0,u.jsx)("div",{className:"d-flex gap-3 justify-content-end mb-2",children:(0,u.jsx)(n.Sv,{text:"Assign Rule",classNames:"btn btn-primary",handleClick:()=>{de("assign-travel-rules")},slug:"assign_travel_rules",icon:(0,u.jsx)(t.In,{className:"fa fa-pencil"})})}),(0,u.jsx)(y,{allDesignations:Ee,travelTypeAssignRuleData:Le,assignRuleData:Ze,allTravelList:$e})]})]}),fe&&(0,u.jsx)(m,{openModel:fe,handleOpenClose:il,addUpdateTravelTypeData:e=>{if(Ie){const a={...e,_id:null===Ie||void 0===Ie?void 0:Ie._id};l(p.o1.updateTravelTypeRequest(a))}else l(p.o1.addTravelTypeRequest(e))},selectedTravelType:Ie,filteredDropdownData:Ge}),be&&(0,u.jsx)(h,{openModel:be,handleOpenClose:il,allDesignations:Ee,allDepartments:Ne,handleDesignationByDepartment:e=>{const a={department_id:e};l(p.EU.getDesignationsByDepartmentRequest(a))},handleAddTravelTypeRule:e=>{Be?(e._id=null===Be||void 0===Be?void 0:Be._id,l(p.o1.updateTravelAndClaimRuleRequest(e))):l(p.o1.createTravelAndClaimRuleRequest(e))},selectedTravelRuleData:Be,allTravelList:$e,filteredDropdownData:Ge}),je&&(0,u.jsx)(T,{openModel:je,handleOpenClose:il,travelRuleData:Le,assignRule:e=>{l(p.o1.assignRuleRequest(e))},travelTypeDataByIdRuleData:Pe,selectedTravelType:Ie,setTravelTypeDataByIdRuleData:ke,isLoading:F}),Oe&&(0,u.jsx)(_.A,{onApproveReject:e=>{if(e){const e={_id:qe};l(null===p.o1||void 0===p.o1?void 0:p.o1.deleteTravelTypeRequest(e))}else a&&Me(a),sl("travel_type");var a},isShow:Oe,desc:e("alerts.deletePopup.desc").replace("$1","Travel Type"),btnRightLoading:E,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")}),Je&&(0,u.jsx)(_.A,{onApproveReject:e=>{if(e){const e={_id:Fe};l(null===p.o1||void 0===p.o1?void 0:p.o1.deleteTravelAndClaimRuleRequest(e))}else ml()},isShow:Je,desc:e("alerts.deletePopup.desc").replace("$1","Travel Rule"),btnRightLoading:V,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")})]})}}}]);
//# sourceMappingURL=8435.2cd718c8.chunk.js.map