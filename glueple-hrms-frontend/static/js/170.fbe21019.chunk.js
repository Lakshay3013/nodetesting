"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[170],{7565:(e,a,l)=>{l.d(a,{A:()=>v});var t=l(5043),i=l(2166),o=l(3885),s=l(4174),n=l(2145),d=l(728),c=(l(899),l(6181)),r=l(3474),m=(l(2405),l(4418),l(2027)),u=l(579);const v=e=>{(0,t.useRef)(null);const{TemplateList:a,openAction:l,getAllAction:v,toggleOpenAction:p,getAllEmailTemplalte:h,setSelectedActionData:g,selectedActionData:f,onHandleViewModals:x}=e,[N,b]=(0,t.useState)({}),A=(0,i.wA)(),{addActionTemplatePending:j,addActionTemplateRes:_,addActionTemplateError:y,GetActionTypeTemplatePending:T,GetActionTypeTemplateRes:E,GetActionTypeTemplateError:w}=(0,i.d4)((e=>e.emailtemplate)),[C,S]=(0,t.useState)(!1),[k,I]=(0,t.useState)(""),[R,F]=(0,t.useState)(""),[z,D]=(0,t.useState)([]),[q,P]=(0,t.useState)(1),[H,L]=(0,t.useState)({template_name:"",email_title:"",email_type:"",body:"",is_active:"",remark:""}),[G,O]=(0,t.useState)({action_name:"",action_type:"",template_id:""}),[U,V]=(0,t.useState)(null===a||void 0===a?void 0:a.data);(0,t.useEffect)((()=>{V(null===a||void 0===a?void 0:a.data)}),[a]),(0,t.useEffect)((()=>{B()}),[q]);const B=()=>{const e={page:q,limit:m.X$.limit};A(s.JN.GetActionTypeTemplateRequest(e))};(0,t.useEffect)((()=>{if(!T){if(w)return void D([]);var e,a,l,t;if(E)if(200==(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.code))D(null===E||void 0===E||null===(a=E.data)||void 0===a||null===(l=a.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data)}}),[T,E,w]),(0,t.useEffect)((()=>{O({action_name:(null===f||void 0===f?void 0:f.action_name)||"",action_type:(null===f||void 0===f?void 0:f.action_type)||"",template_id:f.template_id||""}),S(null===f||void 0===f?void 0:f.is_active),F(null===f||void 0===f?void 0:f.id)}),[f]),(0,t.useEffect)((()=>{if(!j){if(y)return void n.oR.error(null===y||void 0===y?void 0:y.errorMessage);var e,a;if(_)if(200===(null===_||void 0===_||null===(e=_.data)||void 0===e?void 0:e.code))n.oR.success(null===_||void 0===_||null===(a=_.data)||void 0===a?void 0:a.msg),p(),v(),A(s.JN.handleClearEmailTemplateStore("HANDLE_CLEAR_ADD_ACTION_TEMPLATE_STORE"))}}),[_,y,j]);const J=e=>{N&&b({});const{name:a,value:l}=e.target;O({...G,[a]:l})};(0,t.useEffect)((()=>{0==l&&Q()}),[l]);const Q=()=>{O({action_name:"",action_type:"",template_id:""}),g(""),b({}),I("")};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden"},children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[x?"View":f?"Update":"Create New"," Action"]}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>p("view")})]}),(0,u.jsx)("div",{className:"offcanvas-body",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Action Name",(0,u.jsx)("span",{className:"text-danger",children:"*"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)("input",{type:"text",className:"form-control fs-7",placeholder:"Enter Action Name",name:"action_name",value:(null===G||void 0===G?void 0:G.action_name)||"",onChange:e=>J(e)}),(null===N||void 0===N?void 0:N.template_name)&&(0,u.jsx)(r.A,{text:N.template_name})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Action Type",(0,u.jsx)("span",{className:"text-danger",children:"*"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsxs)("select",{className:"form-select",required:!0,name:"action_type",value:null===G||void 0===G?void 0:G.action_type,onChange:e=>J(e),disabled:""!=x,children:[(0,u.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Required Action Type"}),z&&(null===z||void 0===z?void 0:z.map((e=>(0,u.jsx)("option",{value:null===e||void 0===e?void 0:e.action_name,children:null===e||void 0===e?void 0:e.action_name}))))]}),(null===N||void 0===N?void 0:N.email_title)&&(0,u.jsx)(r.A,{text:N.action_type})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsxs)("label",{htmlFor:!0,children:["Select Email Template",(0,u.jsx)("span",{className:"text-danger",children:"*"})]})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsxs)("select",{className:"form-select",required:!0,name:"template_id",value:null===G||void 0===G?void 0:G.template_id,onChange:e=>J(e),disabled:""!=x,children:[(0,u.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Required Email Type"}),U&&(null===U||void 0===U?void 0:U.map((e=>(0,u.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.template_name}))))]}),(null===N||void 0===N?void 0:N.email_type)&&(0,u.jsx)(r.A,{text:N.template_id})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)("label",{htmlFor:!0,children:"Is Active"})})}),(0,u.jsxs)("div",{className:"col-md-9",children:[(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)("input",{type:"checkbox",placeholder:"Is Active",checked:C,onChange:e=>S(!C),disabled:""!=x})}),(null===N||void 0===N?void 0:N.is_active)&&(0,u.jsx)(r.A,{text:N.is_active})]})]}),(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:""==x&&(0,u.jsx)(o.Sv,{type:"button",classNames:"btn btn-primary gradientBg",handleClick:e=>(async()=>{G.is_active=C;const e=await(0,c.i6)(d.Xt,G);e.isValid?(b({}),f?(G._id=R,A(s.JN.UpdataActionTemplateRequest(G)),v(),p()):(A(s.JN.AddActionTemplateRequest(G)),v())):(b(e.errors),console.log(e.errors,"formattedErrors"))})(),text:(f?"Update":"Create")+" Action"})})]})})]})})}},454:(e,a,l)=>{l(5043),l(2166),l(3885),l(4174),l(2145),l(728),l(6181),l(3474),l(579)},4418:(e,a,l)=>{l.d(a,{A:()=>c});l(3739);var t=l(7848),i=l(9969),o=l(5043),s=l(4174),n=l(2166),d=l(579);const c=e=>{const a=(0,o.useRef)(""),l=(0,n.wA)(),{editorData:c,setEditorData:r,dropdownValue:m,setDropdownValue:u,bodydata:v}=e;(0,o.useEffect)((()=>{h(m),void 0!==v&&p(v)}),[m,v]);const p=e=>{const l=a.current.editor,t=(null===l||void 0===l?void 0:l.getData())+(null===e||void 0===e?void 0:e.replaceAll("&lt;","<"));console.log("Hello new html",t),null===l||void 0===l||l.setData(t)},h=e=>{const l=a.current.editor,t=null===e||void 0===e?void 0:e.replaceAll("&lt;","<");null===l||void 0===l||l.model.change((e=>{const a=l.model.document.selection.getFirstPosition();e.insertText(t,a)}))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(t.FQ,{context:i.obS,contextWatchdog:i.Zdk,children:(0,d.jsx)(t.aF,{editor:i.aRV,data:c,config:{plugins:[i.uwK,i.yN4,i.J20,i.fzL,i.NGz,i.N_E,i.smP,i.B8B,i.XIK,i.e1U,i._V3,i.FUH,i.qIF,i.bsd,i.uXn,i.eHb,i.fTX,i.$ts,i.FG2,i.PQA,i.f4q,i.DZT,i.KQV,i.ayq,i.NeA,i.CyN,i.GkN,i.Eac,i.Z3f,i.z2z,i.TgZ,i._KA,i.Y0,i.He$,i.H09,i.FRC,i.ozN,i.OF1,i.rwA,i.Z4w,i.$r$,i.C1k,i.PXQ,i.Syw,i.n7r,i.ybQ,i.q2u],toolbar:{items:["undo","redo","heading","|","bold","italic","Alignment","|","link","bulletedList","numberedList","insertImage","image","simpleUploadAdapter","insertTable","sourceEditing","fullPage","highlight","font","fontColor","style","textPartLanguage","|","fontSize","fontFamily","|","findAndReplace","underline","strikethrough","code","subscript","superscript","indent","outdent","blockQuote","horizontalLine","image","AutoImage","Markdown","codeBlock","mention","mediaEmbed","htmlComment","removeFormat","linkImage","htmlEmbed"],shouldNotGroupWhenFull:!0},style:{definitions:[{name:"Article Category",element:"h3",classes:["category"]},{name:"Info Box",element:"p",classes:["info-box"]},{name:"Quotation",element:"blockquote",classes:["quote"]},{name:"Code Snippet",element:"code",classes:["code-snippet"]},{name:"Warning Box",element:"div",classes:["warning-box"]},{name:"Highlight",element:"span",classes:["highlight"]}]},simpleUpload:{uploadUrl:"http://localhost:3001/v1/api/add-template-image",withCredentials:!0,headers:{"X-CSRF-TOKEN":"CSRF-Token",Authorization:"Bearer <JSON Web Token>"}},image:{resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}],toolbar:["toggleImageCaption","imageTextAlternative","ckboxImageEdit","resizeImage:50","resizeImage:75","resizeImage:original","resizeImage:custom"]},htmlSupport:{allow:[{attributes:!0,classes:!0,styles:!0}]},htmlEmbed:{showPreviews:!0}},onReady:e=>{a.current={editor:e}},onChange:(e,t)=>((e,t)=>{var i;console.log("Helllo chandan");const o=t.getData(),n=null===a||void 0===a||null===(i=a.current)||void 0===i?void 0:i.previousData;if(!n||n===o)return r(o),void(a.current.previousData=o);const d=[...(null===n||void 0===n?void 0:n.matchAll(/<img.*?src="(.*?)"/g))||[]].map((e=>e[1])),c=[...(null===o||void 0===o?void 0:o.matchAll(/<img.*?src="(.*?)"/g))||[]].map((e=>e[1])),m=d.filter((e=>!c.includes(e)));console.log("Removed Images:",m),m.forEach((e=>l(s.JN.RemoveImageRequest({url:e})))),a.current.previousData=o,r(o)})(0,t)})})})}}}]);
//# sourceMappingURL=170.fbe21019.chunk.js.map