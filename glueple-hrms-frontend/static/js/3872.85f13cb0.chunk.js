"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[3872],{73872:(e,a,l)=>{l.r(a),l.d(a,{default:()=>R});var s=l(65043),n=l(26362),t=l(92250),d=l(90607),i=l(82149),o=l(70579);const r=e=>{const{toggleAddArrearsModal:a}=e,{t:l}=(0,d.K)(),n=(0,s.useMemo)((()=>({sn:(e,a)=>(0,o.jsx)("span",{children:a+1})})),[]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,o.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Arrears"}),(0,o.jsx)(t.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>a(),text:"Add Arrear"})]}),(0,o.jsx)("div",{className:"card p-3",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsxs)("div",{className:"col-12 form-group mb-3",children:[(0,o.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Employees"}),(0,o.jsx)(i.A,{data:[],fields:[{key:"sn",label:"S.N"},{key:"Employee Name",label:"Employee Name"},{key:"emp_id",label:"Employee ID"},{key:"Year-month",label:"Year-month"},{key:"present_days",label:"Present Days"},{key:"pay_days",label:"Pay Days"},{key:"basic",label:"Basic"},{key:"hra",label:"HRA"},{key:"education_allowance",label:"Education Allowance"},{key:"meal_allowance",label:"Meal Allowance"},{key:"petrol_allowance",label:"Petrol Allowance"},{key:"special_allowance",label:"Special Allowance"},{key:"lta",label:"LTA "},{key:"arrear",label:"Arrear"},{key:"pf_contribution",label:"PF-Employee Contribution"},{key:"esi_contribution",label:"ESI Employee Contribution"},{key:"action",label:"Action"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:n})]})})}),(0,o.jsx)(t.Sv,{classNames:"btn btn-primary gradientBg mt-2",text:"Save"})]})};var c=l(61487),m=l(56462),p=l(26181),v=l(80728);const u=e=>{const{isOpen:a,toggleOpenClose:l,allEmployeeList:i,handleAddArrears:r}=e,{addArrearsPending:u}=e,{t:y}=(0,d.K)(),[h,x]=(0,s.useState)({}),[j,b]=(0,s.useState)(""),[g,f]=(0,s.useState)({arrearName:"",arrearFor:"",payMonth:"",description:"",employees:[]}),N=(0,s.useMemo)((()=>({sn:(e,a)=>(0,o.jsx)("span",{children:a+1}),pay_days:(e,a)=>(0,o.jsx)("span",{children:(0,o.jsx)(c.pd,{type:"number",value:(null===e||void 0===e?void 0:e.pay_days)||"",name:"pay_days",onChange:a=>((e,a)=>{const{value:l}=null===e||void 0===e?void 0:e.target;f((e=>({...e,employees:e.employees.map((e=>(null===e||void 0===e?void 0:e.value)===(null===a||void 0===a?void 0:a.value)?{...e,pay_days:l}:e))})))})(a,e)})})})),[g]),D=(e,a)=>{var l;const s=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:t,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};f((e=>({...e,[s]:"checkbox"===t?d:n}))),"employees"==s&&b(n),x((e=>({...e,[s]:void 0})))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(a?"show":""),tabIndex:-1,style:{visibility:a?"visible":"hidden",width:"800px"},children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:" Add Arrears "}),(0,o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,o.jsx)("div",{className:"offcanvas-body",children:(0,o.jsxs)("div",{className:"formPanel",children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("div",{className:"form-group mb-3",children:(0,o.jsx)(c.JU,{text:y("labels.arrearName"),required:!0})})}),(0,o.jsx)("div",{className:"col-md-8",children:(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)(c.pd,{type:"text",placeholder:y("placeholders.arrearName"),value:(null===g||void 0===g?void 0:g.arrearName)||"",name:"arrearName",onChange:e=>D(e)}),(null===h||void 0===h?void 0:h.arrearName)&&(0,o.jsx)(t.eo,{text:h.arrearName})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("div",{className:"form-group mb-3",children:(0,o.jsx)(c.JU,{text:y("labels.arrearFor"),required:!0})})}),(0,o.jsx)("div",{className:"col-md-8",children:(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)(c.pd,{type:"month",value:(null===g||void 0===g?void 0:g.arrearFor)||"",name:"arrearFor",onChange:e=>D(e)}),(null===h||void 0===h?void 0:h.arrearFor)&&(0,o.jsx)(t.eo,{text:h.arrearFor})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("div",{className:"form-group mb-3",children:(0,o.jsx)(c.JU,{text:y("labels.payMonth"),required:!0})})}),(0,o.jsx)("div",{className:"col-md-8",children:(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)(c.pd,{type:"month",value:(null===g||void 0===g?void 0:g.payMonth)||"",name:"payMonth",onChange:e=>D(e)}),(null===h||void 0===h?void 0:h.payMonth)&&(0,o.jsx)(t.eo,{text:h.payMonth})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("div",{className:"form-group mb-3",children:(0,o.jsx)(c.JU,{text:y("labels.description"),required:!0})})}),(0,o.jsx)("div",{className:"col-md-8",children:(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)(c.TM,{name:"description",value:null===g||void 0===g?void 0:g.description,placeholder:y("placeholders.description"),onChange:e=>D(e)}),(null===h||void 0===h?void 0:h.description)&&(0,o.jsx)(t.eo,{text:h.description})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("div",{className:"form-group mb-3",children:(0,o.jsx)(c.JU,{text:y("labels.employee"),required:!0})})}),(0,o.jsx)("div",{className:"col-md-8",children:(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)(m.A,{data:i,placeholder:y("placeholders.employee"),value:(null===g||void 0===g?void 0:g.employees)||"",handleChange:e=>D(e,"employees"),name:"employees",isMulti:!0}),(null===h||void 0===h?void 0:h.employees)&&(0,o.jsx)(t.eo,{text:h.employees})]})})]}),(0,o.jsx)(n.Ak,{data:null===g||void 0===g?void 0:g.employees,fields:[{key:"sn",label:"S.N"},{key:"pay_days",label:"Pay Days"},{key:"emp_code",label:"Emp Code"},{key:"name",label:"Emp Name"},{key:"department_name",label:"Department  "},{key:"designation_name",label:"Designation"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:N})]})}),(0,o.jsx)("div",{className:"offcanvas-footer",children:(0,o.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,o.jsx)(t.Sv,{text:"Add",classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,p.i6)(v.b1,g);if(e.isValid){const e={name:null===g||void 0===g?void 0:g.arrearName,description:null===g||void 0===g?void 0:g.description,year_mon:null===g||void 0===g?void 0:g.payMonth,arrear_for:null===g||void 0===g?void 0:g.arrearFor};r(e)}else x(e.errors)})(),isLoading:u})})})]}),a&&(0,o.jsx)("div",{className:"modal-backdrop fade show"})]})},y=e=>{const{installmentData:a,setInstallmentData:l,loanData:t}=e,d=(0,s.useMemo)((()=>({amount:(e,s)=>(0,o.jsx)("span",{children:(0,o.jsx)(c.pd,{type:"number",className:"form-control border border-black text-center",id:"instl_amt",placeholder:"Installment Amount",onChange:e=>((e,s)=>{let n,d=a;d[s].amount=parseFloat(e).toFixed(2);let i=0;d.forEach(((e,a)=>(i+=parseFloat(e.amount),a===s?(n=parseFloat(null===t||void 0===t?void 0:t.amount)-i>=0?parseFloat(null===t||void 0===t?void 0:t.amount)-i:0,n/=(d.length-1-s).toFixed(2)):a>s&&(e.amount=JSON.stringify(n)),e))),l(d)})(e.target.value,s),value:parseFloat(null===e||void 0===e?void 0:e.amount)})})})),[a]);return(0,o.jsx)(s.Fragment,{children:(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(n.Ak,{data:a,fields:[{key:"installment",label:"Installment"},{key:"date",label:"Date"},{key:"amount",label:"Amount"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none",marginTop:"0px !important"},scopedSlots:d})})})},h=[{emp_id:"qd2654",name:"Mohd Sarfaraz",email:"sarfaraz1@qdegrees.com",department:"IT",loan_type:"Personal Loan",amount:"100",emi_duration:"3",effective_date:"2024-11-21",end_date:"2025-01-21"},{emp_id:"qd2281",name:"Chandan Kumar",email:"Candan@qdegrees.com",department:"IT",loan_type:"Car Loan",amount:"10000",emi_duration:"10",effective_date:"2024-12-01",end_date:"2025-08-30"}],x=[{installment:1,date:"2024-11-21",amount:"33.33"},{installment:2,date:"2024-12-21",amount:"33.33"},{installment:3,date:"2025-01-21",amount:"33.33"}],j=e=>{const{toggleAddLoanModal:a}=e,[l,d]=(0,s.useState)(x),i=(0,s.useMemo)((()=>({sn:(e,a)=>(0,o.jsx)("span",{children:a+1}),action:e=>(0,o.jsxs)("div",{className:"btn-group actionDrp",children:[(0,o.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,o.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,o.jsx)("ul",{className:"dropdown-menu",children:(0,o.jsx)("li",{children:(0,o.jsx)("span",{className:"dropdown-item",onClick:()=>a(null===e||void 0===e?void 0:e._id,"edit"),children:"View  Details"})})})]})})),[]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,o.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Loans"}),(0,o.jsx)(t.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>a(),text:"Add Loan"})]}),(0,o.jsx)(n.Ak,{data:h,fields:[{key:"sn",label:"S.N"},{key:"name",label:"Employee Name"},{key:"emp_id",label:"Employee ID"},{key:"department",label:"Department"},{key:"loan_type",label:"Loan Type"},{key:"loan_amount",label:"Loan Amount"},{key:"emi_duration",label:"EMI Duration"},{key:"effective_date",label:"Effective Date"},{key:"end_date",label:"End Date"},{key:"action",label:"Action"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:i})]})};var b=l(86178),g=l.n(b);const f=[{label:"3 Months",value:3},{label:"4 Months",value:4},{label:"5 Months",value:5},{label:"6 Months",value:6},{label:"7 Months",value:7},{label:"8 Months",value:8},{label:"1 Year",value:12},{label:"2 Years",value:24},{label:"3 Years",value:36}],N=e=>{const{t:a}=(0,d.K)(),{toggleOpenClose:l,isOpen:n}=e,[i,r]=(0,s.useState)({employee:null,loanType:null,amount:"",emiDuration:null,effectiveDate:"",endDate:""}),[p,v]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),x=(e,a)=>{var l;const s=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:t,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};"effectiveDate"===s&&j(n),"emiDuration"===s&&(r((e=>({...e,effectiveDate:"",endDate:""}))),h([])),"amount"===s&&(r((e=>({...e,emiDuration:null,effectiveDate:"",endDate:""}))),h([])),r((e=>({...e,[s]:"checkbox"===t?d:n}))),v((e=>({...e,[s]:void 0})))},j=e=>{var a,l=g()(e).add((null===i||void 0===i||null===(a=i.emiDuration)||void 0===a?void 0:a.value)-1,"M").format("YYYY-MM-DD");l=g()(l).format("YYYY-MM-DD"),r((e=>({...e,endDate:l}))),b(e)},b=e=>{var a;let l=parseInt(null===i||void 0===i||null===(a=i.emiDuration)||void 0===a?void 0:a.value),s=parseFloat((null===i||void 0===i?void 0:i.amount)/l).toFixed(2),n=[],t=g()(e).format("YYYY-MM-DD");for(let d=1;d<=l;d++){n.push({installment:d,date:t,amount:s});n.length;t=g()(t).add(1,"month").format("YYYY-MM-DD")}console.log(n,"temporary Installment ................................"),h(n)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(n?"show":""),tabIndex:-1,style:{visibility:n?"visible":"hidden",width:"800px"},children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:" Add Loans "}),(0,o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,o.jsx)("div",{className:"offcanvas-body",children:(0,o.jsx)("div",{className:"formPanel",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-md-6",children:[(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:a("labels.employee"),required:!0}),(0,o.jsx)(m.A,{data:[],placeholder:a("placeholders.employee"),value:(null===i||void 0===i?void 0:i.employee)||"",handleChange:e=>x(e,"employee"),name:"employee"})]}),(null===p||void 0===p?void 0:p.employee)&&(0,o.jsx)(t.eo,{text:p.employee})]}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:a("labels.loanType")}),(0,o.jsx)(m.A,{data:[],placeholder:a("placeholders.loanType"),value:(null===i||void 0===i?void 0:i.loanType)||"",handleChange:e=>x(e,"loanType"),name:"loanType"})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:a("labels.amount"),required:!0}),(0,o.jsx)(c.pd,{type:"text",placeholder:a("placeholders.amount"),value:null===i||void 0===i?void 0:i.amount,name:"amount",onChange:e=>x(e)}),(null===p||void 0===p?void 0:p.amount)&&(0,o.jsx)(t.eo,{text:p.amount})]})}),(0,o.jsxs)("div",{className:"col-md-6",children:[(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:a("labels.emiDuration"),required:!0}),(0,o.jsx)(m.A,{data:f,placeholder:a("placeholders.emiDuration"),value:(null===i||void 0===i?void 0:i.emiDuration)||"",handleChange:e=>x(e,"emiDuration"),name:"emiDuration"})]}),(null===p||void 0===p?void 0:p.emiDuration)&&(0,o.jsx)(t.eo,{text:p.emiDuration})]}),(0,o.jsxs)("div",{className:"col-md-6",children:[(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:a("labels.effectiveDate"),required:!0}),(0,o.jsx)(c.pd,{type:"date",value:null===i||void 0===i?void 0:i.effectiveDate,isDisabled:null===i||void 0===i||!i.emiDuration,name:"effectiveDate",onChange:e=>x(e)})]}),(null===p||void 0===p?void 0:p.effectiveDate)&&(0,o.jsx)(t.eo,{text:p.effectiveDate})]}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:a("labels.endDate"),required:!0}),(0,o.jsx)(c.pd,{type:"date",value:null===i||void 0===i?void 0:i.endDate,isDisabled:!0,name:"endDate",onChange:e=>x(e)})]})}),(0,o.jsx)("hr",{}),u&&(null===u||void 0===u?void 0:u.length)>0&&(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsxs)("div",{className:"card text-center p-1 m-o",style:{backgroundColor:"#3c82e9",color:"white"},children:[" ",(0,o.jsx)("h6",{children:"Pending Installment "})]}),(0,o.jsx)(y,{installmentData:u,setInstallmentData:h,loanData:i})]})]})})}),(0,o.jsx)("div",{className:"offcanvas-footer",children:(0,o.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,o.jsx)(t.Sv,{text:"Add",classNames:"btn btn-org-gradient"})})})]}),n&&(0,o.jsx)("div",{className:"modal-backdrop fade show"})]})};l(53536);const D=[{salaryForMonth:"May 2024",paymentMonth:"June 2024",paymentDate:"2024-06-07"},{salaryForMonth:"June 2024",paymentMonth:"July 2024",paymentDate:"2024-07-07"},{salaryForMonth:"February 2024",paymentMonth:"March 2024",paymentDate:"2024-03-07"},{salaryForMonth:"March 2024",paymentMonth:"April 2024",paymentDate:"2024-04-07"},{salaryForMonth:"April 2024",paymentMonth:"May 2024",paymentDate:"2024-05-07"},{salaryForMonth:"September 2024",paymentMonth:"October 2024",paymentDate:"2024-10-07"}],k=()=>{const e=(0,s.useMemo)((()=>({sn:(e,a)=>(0,o.jsx)("span",{children:a+1}),action:e=>(0,o.jsxs)("div",{className:"btn-group actionDrp",children:[(0,o.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,o.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,o.jsx)("ul",{className:"dropdown-menu",children:(0,o.jsx)("li",{children:(0,o.jsx)("span",{className:"dropdown-item",children:"View  Details"})})})]})})),[]);return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,o.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Payroll History"})}),(0,o.jsx)(n.Ak,{data:D,fields:[{key:"salaryForMonth",label:"Salary For Month"},{key:"paymentMonth",label:"Payment Month"},{key:"paymentDate",label:"Payment Date"},{key:"action",label:"Action"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:e})]})};var A=l(35475);const _=e=>{const{toggleCreatePayRunModal:a}=e;return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("div",{className:" d-flex justify-content-between align-items-center mb-2",children:(0,o.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Run Attendance"})}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("div",{className:" payroll-card-body-css  p-3 border-left border-dark",children:[(0,o.jsxs)("div",{className:"payruns-cards d-flex align-items-center justify-content-around",children:[(0,o.jsxs)("div",{className:"col",children:[(0,o.jsx)("small",{className:"text-secondary",children:"PAYMENT DATE"}),(0,o.jsx)("h5",{className:"py-3",children:"08-09-2024"})]}),(0,o.jsx)("div",{className:"col",children:(0,o.jsx)("button",{className:"btn btn-primary",children:"Add Pay Run"})}),(0,o.jsxs)("div",{className:"col",children:[(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>a(),children:"Create Pay Run"}),"\xa0\xa0",(0,o.jsx)(A.N_,{to:"/regular-payroll",children:(0,o.jsx)("button",{className:"btn btn-primary",children:"View Details"})})]})]}),(0,o.jsx)("i",{class:"bi bi-info-circle"}),(0,o.jsx)("span",{children:(0,o.jsxs)("small",{className:"text-secondary",children:["Please approve this payroll before"," ","08-09-2024 | 04:00 PM"]})})]})})]})};var S=l(49985),w=l(22166),M=l(94174);const E=e=>{const a=(0,w.wA)(),{currentPage:l,setCurrentPage:t,getAllEmployeeDetailsByPayDays:d,monthYear:i}=e,{getEmployeeDetailsByPayDaysPending:r}=(0,w.d4)((e=>e.payroll)),c=(0,s.useMemo)((()=>({sn:(e,a)=>(0,o.jsx)("span",{children:a+1}),account_status:e=>(0,o.jsx)("span",{className:`badge ${(0,S.XN)(e.account_status)}`,children:e.account_status}),action:e=>(0,o.jsxs)("div",{className:"btn-group actionDrp",children:[(0,o.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,o.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,o.jsx)("ul",{className:"dropdown-menu",children:(0,o.jsx)("li",{children:(0,o.jsx)(A.N_,{className:"dropdown-item",to:`employee-attendance-tracking/${null===e||void 0===e?void 0:e._id}/${i}`,onClick:()=>{return l=e,void a(M.Vg.selectedEmployeeData(l));var l},children:"View Details"})})})]})})),[d,l]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.Ak,{data:null===d||void 0===d?void 0:d.data,fields:[{key:"sn",label:"S.N"},{key:"emp_id",label:"Emp Id"},{key:"name",label:"Full Name"},{key:"present_days",label:"Present Days"},{key:"absent_days",label:"Absent Days"},{key:"present_days",label:"Pay Days"},{key:"account_status",label:"Account Status"},{key:"action",label:"Action"}],isLoading:r,pagination:!0,currentPage:l,setCurrentPage:t,totalPages:null===d||void 0===d?void 0:d.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:c})})},C=e=>{const{allEmployeeList:a,allDepartments:l,allDesignations:n,handleDepartmentByDesignation:i,getEmployeeDetailsByPayDays:r,setMonthYear:p}=e,{t:v}=(0,d.K)(),[u,y]=(0,s.useState)({department:null,designation:null,employees:"",month_year:g()().format("YYYY-MM")}),h=(e,a)=>{var l;const s=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:n,type:t,checked:d}=null!==e&&void 0!==e&&e.target?e.target:{value:e};"department"===s&&(n&&(null===n||void 0===n?void 0:n.value)&&i(null===n||void 0===n?void 0:n.value),y((e=>({...e,designation:null})))),"month_year"===s&&p(n),y((e=>({...e,[s]:"checkbox"===t?d:n})))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"formPanel cardBox",children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:v("labels.department")}),(0,o.jsx)(m.A,{data:l,placeholder:v("placeholders.selectDepartment"),value:(null===u||void 0===u?void 0:u.department)||"",handleChange:e=>h(e,"department"),name:"department"})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:v("labels.designation")}),(0,o.jsx)(m.A,{data:n,placeholder:v("placeholders.selectDesignation"),value:(null===u||void 0===u?void 0:u.designation)||"",handleChange:e=>h(e,"designation"),name:"designation",isDisabled:null===u||void 0===u||!u.department})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:v("labels.employees")}),(0,o.jsx)(m.A,{data:a,placeholder:v("placeholders.employees"),value:(null===u||void 0===u?void 0:u.employees)||"",handleChange:e=>h(e,"employees"),name:"employees",isMulti:!0,selectAllText:v("labels.selectAll")})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group mb-2",children:[(0,o.jsx)(c.JU,{text:v("labels.monthYear")}),(0,o.jsx)(c.pd,{type:"month",value:(null===u||void 0===u?void 0:u.month_year)||"",onChange:e=>h(e),name:"month_year"})]})})]}),(0,o.jsx)("div",{className:"d-flex justify-content-end",children:(0,o.jsx)(t.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>(()=>{var e,a,l,s,n;const t={};null!==u&&void 0!==u&&null!==(e=u.department)&&void 0!==e&&e.value&&(t.department_id=null===u||void 0===u||null===(a=u.department)||void 0===a?void 0:a.value),null!==u&&void 0!==u&&null!==(l=u.designation)&&void 0!==l&&l.value&&(t.designation_id=null===u||void 0===u||null===(s=u.designation)||void 0===s?void 0:s.value),(null===u||void 0===u||null===(n=u.employees)||void 0===n?void 0:n.length)>0&&(t.employee_ids=(0,S.RM)(null===u||void 0===u?void 0:u.employees)),t.month_year=null===u||void 0===u?void 0:u.month_year,r(t)})(),text:v("btns.filter"),icon:(0,o.jsx)(c.In,{className:"fa fa-search"})})})]})})},P=e=>{const{allEmployeeList:a,allDepartments:l,allDesignations:n,handleDepartmentByDesignation:t,getAllEmployeeDetailsByPayDays:d,getEmployeeDetailsByPayDays:i}=e,[r,c]=(0,s.useState)(1),[m,p]=(0,s.useState)(g()().format("YYYY-MM"));return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,o.jsx)("h3",{className:"underlineHead ",style:{fontSize:"18px"},children:" Attendance Tracking"})}),(0,o.jsx)(C,{allEmployeeList:a,allDepartments:l,allDesignations:n,handleDepartmentByDesignation:t,getEmployeeDetailsByPayDays:i,setMonthYear:p}),(0,o.jsx)(E,{setCurrentPage:c,currentPage:r,allEmployeeData:a,getAllEmployeeDetailsByPayDays:d,monthYear:m})]})},F=[{emp_id:"qd2654",name:"Mohd Sarfaraz",email:"sarfaraz1@qdegrees.com",department:"IT",designation:"Junior Software Development"},{emp_id:"qd2281",name:"chandan kumar",email:"chandan@qdegrees.com",department:"IT",designation:"Junior Software Development"}],Y=e=>{const{isOpen:a,toggleOpenClose:l}=e,{t:i}=(0,d.K)(),[r,p]=(0,s.useState)(""),v=(0,s.useMemo)((()=>({sn:(e,a)=>(0,o.jsx)("span",{children:a+1}),hold_salary:(e,a)=>(0,o.jsx)("span",{children:(0,o.jsx)(c.P_,{id:"hold_salary",name:"hold_salary"},"hold_salary")}),create_salary:(e,a)=>(0,o.jsx)("span",{children:(0,o.jsx)(c.P_,{id:"create_salary",name:"create_salary"},"create_salary")})})),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(a?"show":""),tabIndex:-1,style:{visibility:a?"visible":"hidden",width:"800px"},children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:" Create Pay Run "}),(0,o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,o.jsxs)("div",{className:"offcanvas-body",children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-2",children:(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(c.JU,{text:"Department",className:"text-primary"})})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("div",{className:"form-group mb-3",children:(0,o.jsx)(m.A,{data:[],placeholder:"Select Department",value:r||"",handleChange:e=>p(e),name:"department"})})})]}),(0,o.jsx)("div",{className:"row",children:(0,o.jsx)(c.P_,{id:"hold_salary",name:"hold_salary",label:"Create Salary For All"},"hold_salary")}),(0,o.jsx)(n.Ak,{data:F,fields:[{key:"sn",label:"S.N"},{key:"hold_salary",label:"Hold Salary"},{key:"create_salary",label:"Create Salary"},{key:"emp_id",label:"Emp ID"},{key:"name",label:"Emp Name"},{key:"email",label:"Email"},{key:"department",label:"Department  "},{key:"designation",label:"Designation"}],pagination:!0,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:v})]}),(0,o.jsx)("div",{className:"offcanvas-footer",children:(0,o.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,o.jsx)(t.Sv,{text:"Add",classNames:"btn btn-org-gradient"})})})]}),a&&(0,o.jsx)("div",{className:"modal-backdrop fade show"})]})};l(52027),l(44978);const R=()=>{const e=(0,w.wA)(),{t:a}=(0,d.K)(),{getDepartmentListRes:l,getDepartmentListError:t,getDepartmentListPending:i}=(0,w.d4)((e=>e.department)),{getDesignationsByDepartmentRes:c,getDesignationsByDepartmentPending:m,getDesignationsByDepartmentError:p}=(0,w.d4)((e=>e.designation)),{getAllEmployeePending:v,getAllEmployeeRes:y,getAllEmployeeError:h}=(0,w.d4)((e=>e.employee)),{getEmployeeDetailsByPayDaysPending:x,getEmployeeDetailsByPayDaysRes:b,getEmployeeDetailsByPayDaysError:g,addArrearsPending:f,addArrearsRes:D,addArrearsError:A}=(0,w.d4)((e=>e.payroll)),[S,E]=(0,s.useState)(!1),[C,F]=(0,s.useState)(!1),[R,B]=(0,s.useState)(""),[L,T]=(0,s.useState)(!1),[q,H]=(0,s.useState)(""),[J,I]=(0,s.useState)(""),[O,U]=(0,s.useState)(""),[V,z]=(0,s.useState)([]),[K,$]=(0,s.useState)([]),[Q,X]=(0,s.useState)(1),G=[{name:"Run Attendance",onClickFun:e=>W(e),id:"runAttendance"},{name:"Attendance Tracking",onClickFun:e=>W(e),id:"attendanceTracking"},{name:"Add Arrears",onClickFun:e=>W(e),id:"addArrears"},{name:"Loans",onClickFun:e=>W(e),id:"loans"},{name:"Payroll History",onClickFun:e=>W(e),id:"payRollHistory"}],W=e=>{"attendanceTracking"===e&&ne()},Z=()=>{E(!S)},ee=(e,a)=>{a&&B(a),F(!C)},ae=()=>{T(!L)};(0,s.useEffect)((()=>{se(),le()}),[]);const le=()=>{e(M.mM.getAllEmployeeRequest())};(0,s.useEffect)((()=>{if(!v){if(h)return;y&&200===(null===y||void 0===y?void 0:y.code)&&H(null===y||void 0===y?void 0:y.data)}}),[y,h,v]);const se=()=>{var a;null!==l&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&a.length?I(null===l||void 0===l?void 0:l.data):e(M.vd.getDepartmentListRequest())};(0,s.useEffect)((()=>{if(!i){if(t)return;if(l&&200===(null===l||void 0===l?void 0:l.code)){const e=null===l||void 0===l?void 0:l.data;I(e)}}}),[l,t,i]);(0,s.useEffect)((()=>{if(!m){if(p)return;if(c&&200===(null===c||void 0===c?void 0:c.code)){const e=(null===c||void 0===c?void 0:c.data)||[];U(e)}}}),[c,p,m]);const ne=a=>{e(M.Vg.getEmployeeDetailsByPayDaysRequest())};(0,s.useEffect)((()=>{if(!x){if(g)return;if(b&&200===(null===b||void 0===b?void 0:b.code)){const e=null===b||void 0===b?void 0:b.data;z(e)}}}),[b,g,x]);return(0,s.useEffect)((()=>{if(!f){if(A)return void e(null===M.Vg||void 0===M.Vg?void 0:M.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_ARREARS_STORE"));D&&200===(null===D||void 0===D?void 0:D.code)&&e(null===M.Vg||void 0===M.Vg?void 0:M.Vg.handleClearPayrollStore("HANDLE_CLEAR_ADD_ARREARS_STORE"))}}),[D,A,f]),(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("div",{className:"tab-pane fade show active",id:"receivedFeedback",children:(0,o.jsxs)("div",{className:"cardBox myRequest mb-3",children:[(0,o.jsxs)("div",{className:"cardHead d-flex justify-content-between",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("img",{src:"images/kpi-guidline.svg",alt:"",width:40,className:"me-2 fw-bold"}),(0,o.jsx)("div",{className:"",children:(0,o.jsx)("h3",{children:" Pay Runs"})})]}),(0,o.jsx)("div",{className:"searchB me-0 ",children:(0,o.jsx)("input",{type:"text",className:"form-control w-100 fs-7",placeholder:"Search"})})]}),(0,o.jsx)(n.QE,{tabs:G,type:"rayRuns"}),(0,o.jsxs)("div",{className:"tab-content mykpiMain",children:[(0,o.jsx)("div",{className:"tab-pane fade active show",id:"runAttendance",children:(0,o.jsx)(_,{toggleCreatePayRunModal:ae})}),(0,o.jsx)("div",{className:"tab-pane fade",id:"attendanceTracking",children:(0,o.jsx)(P,{allEmployeeList:q,allDepartments:J,allDesignations:O,handleDepartmentByDesignation:a=>{const l={department_id:a};e(M.EU.getDesignationsByDepartmentRequest(l))},getAllEmployeeDetailsByPayDays:V,getEmployeeDetailsByPayDays:ne,attendanceStatusData:K})}),(0,o.jsx)("div",{className:"tab-pane fade",id:"addArrears",children:(0,o.jsx)(r,{toggleAddArrearsModal:Z})}),(0,o.jsx)("div",{className:"tab-pane fade",id:"loans",children:(0,o.jsx)(j,{toggleAddLoanModal:ee})}),(0,o.jsx)("div",{className:"tab-pane fade",id:"payRollHistory",children:(0,o.jsx)(k,{})})]})]})}),S&&(0,o.jsx)(u,{isOpen:S,toggleOpenClose:Z,allEmployeeList:q,handleAddArrears:a=>{e(M.Vg.addArrearsRequest(a))}}),C&&(0,o.jsx)(N,{isOpen:C,toggleOpenClose:ee,openLoanTypeModal:R}),L&&(0,o.jsx)(Y,{isOpen:L,toggleOpenClose:ae})]})}}}]);
//# sourceMappingURL=3872.85f13cb0.chunk.js.map