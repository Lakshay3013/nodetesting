"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[7646],{17646:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var s=t(65043),n=t(49985),l=t(70579);const i=[{label:"Department",value:"department",totalCount:2,imgUrl:"networking.png",permissionId:"department"},{label:"Functions",value:"functions",totalCount:2,imgUrl:"settings.png",permissionId:"functions"},{label:"Projects",value:"projects",totalCount:1,imgUrl:"projectIcon.png",permissionId:"project"},{label:"Designation",value:"designation",totalCount:1,imgUrl:"designation.png",permissionId:"designation"},{label:"Skills",value:"skills",totalCount:1,imgUrl:"skills.png",permissionId:"skills"}],d=e=>{let{setIsActiveTab:a,isActiveTab:t}=e;return(0,l.jsx)("div",{className:"row px-md-1 mb-3",children:null===i||void 0===i?void 0:i.map(((e,s)=>(0,n.Yo)(null===e||void 0===e?void 0:e.permissionId)&&(0,l.jsx)("div",{className:"col-2 px-md-2 mb-3",children:(0,l.jsxs)("div",{className:"cardBox h-100 daysBox ",style:{minHeight:"80px",background:"#D8E8F7",...(null===e||void 0===e?void 0:e.value)==t&&{border:"1px solid #60848d"}},onClick:()=>a(null===e||void 0===e?void 0:e.value),children:[(0,l.jsx)("figure",{children:(0,l.jsx)("img",{width:30,src:`images/${null===e||void 0===e?void 0:e.imgUrl}`,alt:""})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"d-block ",style:{fontSize:"16px"},children:null===e||void 0===e?void 0:e.label}),(0,l.jsx)("strong",{className:"d-block ",style:{float:"inline-end"},children:null===e||void 0===e?void 0:e.totalCount})]})]})})))})};var o=t(85831),r=t(22166),c=t(94174),m=t(52027),v=t(35685),u=t(90607),p=t(56462),h=t(50586),x=t(26181),g=t(80728);const _=e=>{const{addFunctionPending:a,updateFunctionPending:t}=(0,r.d4)((e=>null===e||void 0===e?void 0:e.position)),{t:i}=(0,u.K)(),{selectedFunctionData:d,openModel:c,handleOpenClose:m,allDepartments:v,allEmployeeList:_,handleCreateUpdateFunction:j}=e,[f,N]=(0,s.useState)({}),[b,E]=(0,s.useState)({department:null,functional_head:null,name:"",short_name:"",is_active:!0}),D=(e,a)=>{var t;const s=a||(null===(t=e.target)||void 0===t?void 0:t.name),{value:l,type:i,checked:d}=e.target?e.target:{value:e};E((e=>{const a={...e,[s]:"checkbox"===i?d:l};return"name"===s&&(a.short_name=(0,n.aF)(l)),a})),N((e=>({...e,[s]:void 0})))};(0,s.useEffect)((()=>()=>{S()}),[c]),(0,s.useEffect)((()=>{d&&E({department:{value:null===d||void 0===d?void 0:d.department_id,label:null===d||void 0===d?void 0:d.department_name},functional_head:{value:null===d||void 0===d?void 0:d.function_head_id,label:null===d||void 0===d?void 0:d.function_head_name},name:null===d||void 0===d?void 0:d.name,short_name:null===d||void 0===d?void 0:d.short_name,is_active:null===d||void 0===d?void 0:d.is_active})}),[d]);const S=()=>{E({department:null,name:"",short_name:"",functional_head:null,is_active:!0}),N({})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"offcanvas offcanvas-end  "+(c?"show":""),tabIndex:-1,style:{visibility:c?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,l.jsxs)("div",{className:"offcanvas-header",children:[(0,l.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:i(d?"headings.updateFunction":"headings.createFunction")}),(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>m()})]}),(0,l.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,l.jsxs)("div",{className:"formPanel",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.selectDepartment"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(p.A,{data:v,placeholder:i("placeholders.selectDepartment"),value:(null===b||void 0===b?void 0:b.department)||"",handleChange:e=>D(e,"department"),name:"department"}),(null===f||void 0===f?void 0:f.department)&&(0,l.jsx)(o.eo,{text:f.department})]})}),(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.functionName"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:i("placeholders.functionName"),value:null===b||void 0===b?void 0:b.name,name:"name",onChange:e=>D(e)}),(null===f||void 0===f?void 0:f.name)&&(0,l.jsx)(o.eo,{text:f.name})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.shortName"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:i("placeholders.shortName"),value:null===b||void 0===b?void 0:b.short_name,name:"short_name",onChange:e=>D(e)}),(null===f||void 0===f?void 0:f.short_name)&&(0,l.jsx)(o.eo,{text:f.short_name})]})}),(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.selectFunctionalHead"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(p.A,{data:_,placeholder:i("placeholders.selectDesignation"),value:(null===b||void 0===b?void 0:b.functional_head)||"",handleChange:e=>D(e,"functional_head"),name:"functional_head"}),(null===f||void 0===f?void 0:f.functional_head)&&(0,l.jsx)(o.eo,{text:f.functional_head})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.isActive")})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.P_,{id:"is_active",checked:null===b||void 0===b?void 0:b.is_active,handleChange:e=>D(e),name:"is_active"},"is_active")})})]})]})}),(0,l.jsx)("div",{className:"offcanvas-footer",children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,l.jsx)(o.Sv,{text:i(d?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,x.i6)(g.uF,b);if(e.isValid){const{department:e,name:a,short_name:t,is_active:s,functional_head:n}=b,l={name:a,short_name:t,is_active:s,department_id:null===e||void 0===e?void 0:e.value,function_head_id:null===n||void 0===n?void 0:n.value};N({}),j(l)}else N(e.errors)})(),isLoading:d?t:a})})})]}),c&&(0,l.jsx)("div",{className:"modal-backdrop fade show"})]})};var j=t(29829);const f=e=>{const{allDepartments:a,allEmployeeList:t}=e,i=(0,r.wA)(),{t:d}=(0,u.K)(),{createSubDepartmentPending:p,createSubDepartmentRes:x,createSubDepartmentError:g,getSubDepartmentPending:f,getSubDepartmentRes:N,getSubDepartmentError:b,updateSubDepartmentPending:E,updateSubDepartmentRes:D,updateSubDepartmentError:S,deleteFunctionPending:A,deleteFunctionRes:C,deleteFunctionError:R}=(0,r.d4)((e=>e.department)),[y,L]=(0,s.useState)(!1),[T,P]=(0,s.useState)(""),[k,w]=(0,s.useState)(1),[U,I]=(0,s.useState)({}),[O,H]=(0,s.useState)(!1),[q,M]=(0,s.useState)(""),F=(0,n.Yo)("delete_sub_department"),B=(0,n.Yo)("update_sub_department"),J=e=>{P(e||""),L(!y)};(0,s.useEffect)((()=>{if(!p){if(g)return void i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_SUB_DEPARTMENT_STORE"));x&&200===(null===x||void 0===x?void 0:x.code)&&(i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_SUB_DEPARTMENT_STORE")),i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_SUB_DEPARTMENT_STORE")),i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_ALL_SUB_DEPARTMENT_LIST_STORE")),$(),J())}}),[x,g,p]),(0,s.useEffect)((()=>{if(!E){if(S)return void i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_SUB_DEPARTMENT_STORE"));D&&200===(null===D||void 0===D?void 0:D.code)&&(i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_SUB_DEPARTMENT_STORE")),i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_SUB_DEPARTMENT_STORE")),i(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_ALL_SUB_DEPARTMENT_LIST_STORE")),$(),J())}}),[D,S,E]),(0,s.useEffect)((()=>{$()}),[k]);const $=()=>{const e={page:k,limit:m.X$.limit};i(c.vd.getSubDepartmentRequest(e))};(0,s.useEffect)((()=>{if(!f){if(b)return;if(N&&200===(null===N||void 0===N?void 0:N.code)){const e=null===N||void 0===N?void 0:N.data;I(e)}}}),[N,b,f]);const G=e=>{e&&M(e),H(!O)};(0,s.useEffect)((()=>{if(!A){if(R)return;var e;if(C)if(200===(null===C||void 0===C?void 0:C.code))G(),k>1&&1===(null===U||void 0===U||null===(e=U.data)||void 0===e?void 0:e.length)?w((e=>e-1)):$()}}),[C,R,A]);const K=(0,s.useMemo)((()=>({sn:(e,a)=>(0,l.jsx)("span",{children:a+1}),is_active:e=>(0,l.jsx)("span",{className:`badge ${(0,n.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>(0,n.N_)(e.created_at),action:e=>(0,l.jsxs)("div",{className:"btn-group actionDrp",children:[(0,l.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,l.jsx)("ul",{className:"dropdown-menu",children:B&&(0,l.jsx)("li",{children:(0,l.jsxs)("span",{className:"dropdown-item",onClick:()=>J(e),children:[(0,l.jsx)(h.In,{className:"bi bi-pencil-square me-1"}),"Update"]})})})]})})),[J]),Y=[{key:"sn",label:"S.N"},{key:"department_name",label:"Departments"},{key:"name",label:"Function Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},(B||F)&&{key:"action",label:"Action"}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,l.jsxs)("div",{className:"cardHead d-flex",children:[(0,l.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,l.jsx)("h4",{className:"ms-2 ",children:"Functions"})]}),(0,l.jsx)("div",{children:(0,l.jsx)(o.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>J(),text:d("btns.createNewFunction"),icon:(0,l.jsx)(h.In,{className:"fa fa-plus"}),slug:"create_sub_department"})})]}),(0,l.jsx)(j.Ak,{data:null===U||void 0===U?void 0:U.data,fields:Y,isLoading:f,pagination:!0,currentPage:k,setCurrentPage:w,totalPages:null===U||void 0===U?void 0:U.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:K})]}),(0,l.jsx)(_,{openModel:y,handleOpenClose:J,handleCreateUpdateFunction:e=>{T?(e._id=(null===T||void 0===T?void 0:T._id)||(null===T||void 0===T?void 0:T.id),i(c.vd.updateSubDepartmentRequest(e))):i(c.vd.createSubDepartmentRequest(e))},selectedFunctionData:T,allDepartments:a,allEmployeeList:t}),O&&(0,l.jsx)(v.A,{onApproveReject:e=>{if(e){}else G()},isShow:O,desc:d("alerts.deletePopup.desc").replace("$1","Function"),btnRightLoading:A,btnTextRight:d("btns.delete"),btnTextLeft:d("btns.cancel")})]})},N=e=>{const{createProjectPending:a,updateProjectPending:t}=(0,r.d4)((e=>null===e||void 0===e?void 0:e.department)),{t:i}=(0,u.K)(),{selectedProjectData:d,openModel:c,handleOpenClose:m,allDepartments:v,allEmployeeList:_,getSubDepartmentByDepartment:j,subDepartmentByDepartmentData:f,handleCreateUpdateProject:N}=e,[b,E]=(0,s.useState)({}),[D,S]=(0,s.useState)({department:null,sub_department:null,project_manager:null,function_head:null,name:"",short_name:"",is_active:!0}),A=(e,a)=>{var t;const s=a||(null===(t=e.target)||void 0===t?void 0:t.name),{value:l,type:i,checked:d}=e.target?e.target:{value:e};"department"===s&&j(null===l||void 0===l?void 0:l.value),S((e=>{const a={...e,[s]:"checkbox"===i?d:l};return"name"===s&&(a.short_name=(0,n.aF)(l)),a})),E((e=>({...e,[s]:void 0})))};(0,s.useEffect)((()=>()=>{C()}),[c]),(0,s.useEffect)((()=>{d&&S({department:{value:null===d||void 0===d?void 0:d.department_id,label:null===d||void 0===d?void 0:d.department_name},function_head:{value:null===d||void 0===d?void 0:d.function_head_id,label:null===d||void 0===d?void 0:d.function_head_name},name:null===d||void 0===d?void 0:d.name,short_name:null===d||void 0===d?void 0:d.short_name,is_active:null===d||void 0===d?void 0:d.is_active,sub_department:{value:null===d||void 0===d?void 0:d.function_id,label:null===d||void 0===d?void 0:d.function_name},project_manager:{value:null===d||void 0===d?void 0:d.project_manager_id,label:null===d||void 0===d?void 0:d.project_manager_name}})}),[d]);const C=()=>{S({department:null,sub_department:null,project_manager:null,function_head:null,name:"",short_name:"",is_active:!0}),E({})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"offcanvas offcanvas-end  "+(c?"show":""),tabIndex:-1,style:{visibility:c?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,l.jsxs)("div",{className:"offcanvas-header",children:[(0,l.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:i(d?"headings.updateProject":"headings.createProject")}),(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>m()})]}),(0,l.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,l.jsxs)("div",{className:"formPanel",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsx)(h.JU,{text:i("labels.selectDepartment"),required:!0}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(p.A,{data:v,placeholder:i("placeholders.selectDepartment"),value:(null===D||void 0===D?void 0:D.department)||"",handleChange:e=>A(e,"department"),name:"department"}),(null===b||void 0===b?void 0:b.department)&&(0,l.jsx)(o.eo,{text:b.department})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsx)(h.JU,{text:i("labels.selectFunction"),required:!0}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(p.A,{data:f,placeholder:i("placeholders.selectFunction"),value:(null===D||void 0===D?void 0:D.sub_department)||"",handleChange:e=>A(e,"sub_department"),name:"sub_department"}),(null===b||void 0===b?void 0:b.sub_department)&&(0,l.jsx)(o.eo,{text:b.sub_department})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsx)(h.JU,{text:i("labels.projectName"),required:!0}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:i("placeholders.projectName"),value:null===D||void 0===D?void 0:D.name,name:"name",onChange:e=>A(e)}),(null===b||void 0===b?void 0:b.name)&&(0,l.jsx)(o.eo,{text:b.name})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsx)(h.JU,{text:i("labels.shortName"),required:!0}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:i("placeholders.shortName"),value:null===D||void 0===D?void 0:D.short_name,name:"short_name",onChange:e=>A(e)}),(null===b||void 0===b?void 0:b.short_name)&&(0,l.jsx)(o.eo,{text:b.short_name})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsx)(h.JU,{text:i("labels.projectManager"),required:!0}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(p.A,{data:_,placeholder:i("placeholders.projectManager"),value:(null===D||void 0===D?void 0:D.project_manager)||"",handleChange:e=>A(e,"project_manager"),name:"project_manager"}),(null===b||void 0===b?void 0:b.project_manager)&&(0,l.jsx)(o.eo,{text:b.project_manager})]})]}),(0,l.jsxs)("div",{className:"col-md-6",children:[(0,l.jsx)(h.JU,{text:i("labels.functionalManager"),required:!0}),(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(p.A,{data:_,placeholder:i("placeholders.functionalManager"),value:(null===D||void 0===D?void 0:D.function_head)||"",handleChange:e=>A(e,"function_head"),name:"function_head"}),(null===b||void 0===b?void 0:b.function_head)&&(0,l.jsx)(o.eo,{text:b.function_head})]})]})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.isActive")})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.P_,{id:"is_active",checked:null===D||void 0===D?void 0:D.is_active,handleChange:e=>A(e),name:"is_active"},"is_active")})})]})]})}),(0,l.jsx)("div",{className:"offcanvas-footer",children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,l.jsx)(o.Sv,{text:i(d?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,x.i6)(g.vz,D);if(e.isValid){const{department:e,name:a,short_name:t,is_active:s,sub_department:n,project_manager:l,function_head:i}=D,d={name:a,short_name:t,department_id:null===e||void 0===e?void 0:e.value,sub_department_id:null===n||void 0===n?void 0:n.value,project_manager_id:null===l||void 0===l?void 0:l.value,function_head_id:null===i||void 0===i?void 0:i.value,is_active:s};E({}),N(d)}else E(e.errors)})(),isLoading:d?t:a})})})]}),c&&(0,l.jsx)("div",{className:"modal-backdrop fade show"})]})},b=e=>{const{allDepartments:a,allEmployeeList:t,getSubDepartmentByDepartment:i,subDepartmentByDepartmentData:d}=e,p=(0,r.wA)(),{t:x}=(0,u.K)(),{createProjectPending:g,createProjectRes:_,createProjectError:f,addProjectPending:b,getProjectRes:E,getProjectError:D,updateProjectPending:S,updateProjectRes:A,updateProjectError:C,deleteProjectPending:R,deleteProjectRes:y,deleteProjectError:L}=(0,r.d4)((e=>e.department)),[T,P]=(0,s.useState)(!1),[k,w]=(0,s.useState)(""),[U,I]=(0,s.useState)(1),[O,H]=(0,s.useState)({}),[q,M]=(0,s.useState)(!1),[F,B]=(0,s.useState)(""),J=(0,n.Yo)("update_project"),$=(0,n.Yo)("delete_project"),G=e=>{w(e||""),P(!T)};(0,s.useEffect)((()=>{if(!g){if(f)return void p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_PROJECT_STORE"));_&&200===(null===_||void 0===_?void 0:_.code)&&(p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_PROJECT_STORE")),p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_ALL_PROJECT_LIST_STORE")),p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_PROJECT_STORE")),G(),K())}}),[_,f,g]),(0,s.useEffect)((()=>{if(!S){if(C)return void p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_PROJECT_STORE"));A&&200===(null===A||void 0===A?void 0:A.code)&&(p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_PROJECT_STORE")),p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_PROJECT_STORE")),p(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_PROJECT_STORE")),K(),G())}}),[A,C,S]),(0,s.useEffect)((()=>{K()}),[U]);const K=()=>{const e={page:U,limit:m.X$.limit};p(c.vd.getProjectRequest(e))};(0,s.useEffect)((()=>{if(!b){if(D)return;if(E&&200===(null===E||void 0===E?void 0:E.code)){const e=null===E||void 0===E?void 0:E.data;H(e)}}}),[E,D,b]);const Y=e=>{e&&B(e),M(!q)};(0,s.useEffect)((()=>{if(!R){if(L)return;var e;if(y)if(200===(null===y||void 0===y?void 0:y.code))Y(),U>1&&1===(null===O||void 0===O||null===(e=O.data)||void 0===e?void 0:e.length)?I((e=>e-1)):K()}}),[y,L,R]);const X=(0,s.useMemo)((()=>({sn:(e,a)=>(0,l.jsx)("span",{children:a+1}),is_active:e=>(0,l.jsx)("span",{className:`badge ${(0,n.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>(0,n.N_)(e.created_at),action:e=>(0===(null===e||void 0===e?void 0:e.emp_count)||J)&&(0,l.jsxs)("div",{className:"btn-group actionDrp",children:[(0,l.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,l.jsxs)("ul",{className:"dropdown-menu",children:[J&&(0,l.jsx)("li",{children:(0,l.jsxs)("span",{className:"dropdown-item",onClick:()=>G(e),children:[(0,l.jsx)(h.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),0===(null===e||void 0===e?void 0:e.emp_count)&&$&&(0,l.jsx)("li",{children:(0,l.jsxs)("span",{className:"dropdown-item",onClick:()=>Y(e._id),children:[(0,l.jsx)(h.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[G]),V=[{key:"sn",label:"S.N"},{key:"department_name",label:"Departments"},{key:"name",label:"Project Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},(J||$)&&{key:"action",label:"Action"}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,l.jsxs)("div",{className:"cardHead d-flex",children:[(0,l.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,l.jsx)("h4",{className:"ms-2 ",children:"Projects"})]}),(0,l.jsx)("div",{children:(0,l.jsx)(o.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>G(),text:x("btns.createNewProject"),icon:(0,l.jsx)(h.In,{className:"fa fa-plus"}),slug:"create_project"})})]}),(0,l.jsx)(j.Ak,{data:null===O||void 0===O?void 0:O.data,fields:V,isLoading:b,pagination:!0,currentPage:U,setCurrentPage:I,totalPages:null===O||void 0===O?void 0:O.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:X})]}),(0,l.jsx)(N,{openModel:T,handleOpenClose:G,handleCreateUpdateProject:e=>{k?(e._id=(null===k||void 0===k?void 0:k._id)||(null===k||void 0===k?void 0:k.id),p(c.vd.updateProjectRequest(e))):p(c.vd.createProjectRequest(e))},selectedProjectData:k,allDepartments:a,allEmployeeList:t,getSubDepartmentByDepartment:i,subDepartmentByDepartmentData:d}),q&&(0,l.jsx)(v.A,{onApproveReject:e=>{if(e){}else Y()},isShow:q,desc:x("alerts.deletePopup.desc").replace("$1","Project"),btnRightLoading:R,btnTextRight:x("btns.delete"),btnTextLeft:x("btns.cancel")})]})},E=e=>{const{createSkillPending:a,updateSkillPending:t}=(0,r.d4)((e=>null===e||void 0===e?void 0:e.department)),{t:i}=(0,u.K)(),{selectedSkillData:d,openModel:c,handleOpenClose:m,handleCreateUpdateSkill:v}=e,[p,_]=(0,s.useState)({}),[j,f]=(0,s.useState)({name:"",short_name:"",is_active:!0}),N=(e,a)=>{var t;const s=a||(null===(t=e.target)||void 0===t?void 0:t.name),{value:l,type:i,checked:d}=e.target?e.target:{value:e};f((e=>{const a={...e,[s]:"checkbox"===i?d:l};return"name"===s&&(a.short_name=(0,n.aF)(l)),a})),_((e=>({...e,[s]:void 0})))};(0,s.useEffect)((()=>()=>{b()}),[c]),(0,s.useEffect)((()=>{d&&f({name:null===d||void 0===d?void 0:d.name,short_name:null===d||void 0===d?void 0:d.short_name,is_active:null===d||void 0===d?void 0:d.is_active})}),[d]);const b=()=>{f({name:"",short_name:"",is_active:!0}),_({})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"offcanvas offcanvas-end  "+(c?"show":""),tabIndex:-1,style:{visibility:c?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,l.jsxs)("div",{className:"offcanvas-header",children:[(0,l.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:i(d?"headings.updateSkill":"headings.createSkill")}),(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>m()})]}),(0,l.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,l.jsxs)("div",{className:"formPanel",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.skillName"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:i("placeholders.skillName"),value:null===j||void 0===j?void 0:j.name,name:"name",onChange:e=>N(e)}),(null===p||void 0===p?void 0:p.name)&&(0,l.jsx)(o.eo,{text:p.name})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.shortName"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:i("placeholders.shortName"),value:null===j||void 0===j?void 0:j.short_name,name:"short_name",onChange:e=>N(e)}),(null===p||void 0===p?void 0:p.short_name)&&(0,l.jsx)(o.eo,{text:p.short_name})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:i("labels.isActive")})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.P_,{id:"is_active",checked:null===j||void 0===j?void 0:j.is_active,handleChange:e=>N(e),name:"is_active"},"is_active")})})]})]})}),(0,l.jsx)("div",{className:"offcanvas-footer",children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,l.jsx)(o.Sv,{text:i(d?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,x.i6)(g.Tb,j);if(e.isValid){const{name:e,short_name:a,is_active:t}=j,s={name:e,short_name:a,is_active:t};_({}),v(s)}else _(e.errors)})(),isLoading:d?t:a})})})]}),c&&(0,l.jsx)("div",{className:"modal-backdrop fade show"})]})},D=e=>{const{allDepartments:a}=e,t=(0,r.wA)(),{t:i}=(0,u.K)(),{createSkillPending:d,createSkillRes:p,createSkillError:x,getSkillPending:g,getSkillRes:_,getSkillError:f,updateSkillPending:N,updateSkillRes:b,updateSkillError:D,deleteSkillPending:S,deleteSkillRes:A,deleteSkillError:C}=(0,r.d4)((e=>e.department)),[R,y]=(0,s.useState)(!1),[L,T]=(0,s.useState)(""),[P,k]=(0,s.useState)(1),[w,U]=(0,s.useState)({}),[I,O]=(0,s.useState)(!1),[H,q]=(0,s.useState)(""),M=(0,n.Yo)("update_skill"),F=e=>{T(e||""),y(!R)};(0,s.useEffect)((()=>{if(!d){if(x)return void t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_SKILL_STORE"));p&&200===(null===p||void 0===p?void 0:p.code)&&(t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_CREATE_SKILL_STORE")),t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_SKILL_STORE")),t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_ALL_SKILL_LIST_STORE")),F(),B())}}),[d,p,x]),(0,s.useEffect)((()=>{if(!N){if(D)return void t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_SKILL_STORE"));b&&200===(null===b||void 0===b?void 0:b.code)&&(t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_SKILL_STORE")),t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_SKILL_STORE")),t(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_ALL_SKILL_LIST_STORE")),B(),F())}}),[b,D,N]),(0,s.useEffect)((()=>{B()}),[P]);const B=()=>{const e={page:P,limit:m.X$.limit};t(c.vd.getSkillRequest(e))};(0,s.useEffect)((()=>{if(!g){if(f)return;if(_&&200===(null===_||void 0===_?void 0:_.code)){const e=null===_||void 0===_?void 0:_.data;U(e)}}}),[g,_,f]);const J=e=>{e&&q(e),O(!I)};(0,s.useEffect)((()=>{if(!S){if(C)return;A&&200===(null===A||void 0===A?void 0:A.code)&&J()}}),[A,C,S]);const $=(0,s.useMemo)((()=>({sn:(e,a)=>(0,l.jsx)("span",{children:a+1}),is_active:e=>(0,l.jsx)("span",{className:`badge ${(0,n.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>(0,n.N_)(e.created_at),action:e=>(0,l.jsxs)("div",{className:"btn-group actionDrp",children:[(0,l.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,l.jsx)("ul",{className:"dropdown-menu",children:M&&(0,l.jsx)("li",{children:(0,l.jsxs)("span",{className:"dropdown-item",onClick:()=>F(e),children:[(0,l.jsx)(h.In,{className:"bi bi-pencil-square me-1"}),"Update"]})})})]})})),[F]),G=[{key:"sn",label:"S.N"},{key:"name",label:"Skill Name"},{key:"short_name",label:"Short Name"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},M&&{key:"action",label:"Action"}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,l.jsxs)("div",{className:"cardHead d-flex",children:[(0,l.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,l.jsx)("h4",{className:"ms-2 ",children:"Skills"})]}),(0,l.jsx)("div",{children:(0,l.jsx)(o.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>F(),text:i("btns.createNewSkill"),icon:(0,l.jsx)(h.In,{className:"fa fa-plus"}),slug:"create_skill"})})]}),(0,l.jsx)(j.Ak,{data:null===w||void 0===w?void 0:w.data,fields:G,isLoading:g,pagination:!0,currentPage:P,setCurrentPage:e=>k(e),totalPages:null===w||void 0===w?void 0:w.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:$})]}),R&&(0,l.jsx)(E,{openModel:R,handleOpenClose:F,handleCreateUpdateSkill:e=>{L?(e._id=(null===L||void 0===L?void 0:L._id)||(null===L||void 0===L?void 0:L.id),t(c.vd.updateSkillRequest(e))):t(c.vd.createSkillRequest(e))},selectedSkillData:L,allDepartments:a}),I&&(0,l.jsx)(v.A,{onApproveReject:e=>{if(e){}else J()},isShow:I,desc:i("alerts.deletePopup.desc").replace("$1","Skill"),btnRightLoading:S,btnTextRight:i("btns.delete"),btnTextLeft:i("btns.cancel")})]})};var S=t(34348),A=t.n(S),C=t(82149);const R=e=>{const{t:a}=(0,u.K)(),{departmentList:t,isLoading:i,setSelectedDepartmentData:d,toggleDepartmentModal:o,toggleDeleteModal:r,currentPage:c,setCurrentPage:m}=e,[v,p]=(0,s.useState)(t),x=(0,n.Yo)("update_department"),g=(0,n.Yo)("delete_department");(0,s.useEffect)((()=>{p(t)}),[t]);const _=(0,s.useMemo)((()=>({sn:(e,a)=>(0,l.jsx)("span",{children:a+1}),is_active:e=>(0,l.jsx)("span",{className:`badge ${(0,n.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>A()(e.created_at).format("DD-MM-YYYY"),action:e=>(0===(null===e||void 0===e?void 0:e.emp_count)||x)&&(0,l.jsxs)("div",{className:"btn-group actionDrp",children:[(0,l.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,l.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,l.jsxs)("ul",{className:"dropdown-menu",children:[x&&(0,l.jsx)("li",{children:(0,l.jsxs)("span",{className:"dropdown-item",onClick:()=>{o(e)},children:[(0,l.jsx)(h.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),g&&0===(null===e||void 0===e?void 0:e.emp_count)&&(0,l.jsx)("li",{children:(0,l.jsxs)("span",{className:"dropdown-item",onClick:()=>r(e._id),children:[(0,l.jsx)(h.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[d,o,r]),j=[{key:"sn",label:"S.N"},{key:"name",label:"Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},(g||x)&&{key:"action",label:"Action"}];return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(C.A,{data:null===v||void 0===v?void 0:v.data,fields:j,isLoading:i,pagination:!0,currentPage:c,setCurrentPage:m,totalPages:null===v||void 0===v?void 0:v.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:_})})};var y=t(33474);const L=e=>{const{t:a}=(0,u.K)(),{openCreateUpdateDepModal:t,toggleDepartmentModal:n,selectedDepartmentData:i,handleCreateUpdateDepartment:d}=e,[c,m]=(0,s.useState)({}),{addDepartmentPending:v,updateDepartmentPending:p}=(0,r.d4)((e=>e.department)),[_,j]=(0,s.useState)(!0),[f,N]=(0,s.useState)({depName:"",shortName:""}),b=e=>{c&&m({});const{name:a,value:t}=e.target;N({...f,[a]:t})};(0,s.useEffect)((()=>{i&&(N({depName:(null===i||void 0===i?void 0:i.name)||"",shortName:(null===i||void 0===i?void 0:i.short_name)||""}),j(null===i||void 0===i?void 0:i.is_active))}),[i]),(0,s.useEffect)((()=>()=>{E()}),[t]);const E=()=>{N({depName:"",shortName:""}),m({})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(t?"show":""),tabIndex:-1,style:{visibility:t?"visible":"hidden",width:"800px"},children:[(0,l.jsxs)("div",{className:"offcanvas-header",children:[(0,l.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[" ",i?"Update":"Create New"," Department"]}),(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>n()})]}),(0,l.jsx)("div",{className:"offcanvas-body",children:(0,l.jsxs)("div",{className:"formPanel",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:a("labels.name"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:a("placeholders.departmentName"),value:(null===f||void 0===f?void 0:f.depName)||"",name:"depName",onChange:e=>b(e)}),(null===c||void 0===c?void 0:c.depName)&&(0,l.jsx)(y.A,{text:c.depName})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)(h.JU,{text:a("labels.shortName"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:a("placeholders.shortName"),value:null===f||void 0===f?void 0:f.shortName,name:"shortName",onChange:e=>b(e)}),(null===c||void 0===c?void 0:c.shortName)&&(0,l.jsx)(y.A,{text:c.shortName})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:a("labels.isActive")})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.P_,{id:"is_active",checked:_,handleChange:e=>j(!_),name:"is_active"},"is_active")})})]})]})}),(0,l.jsx)("div",{className:"offcanvas-footer",children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,l.jsx)(o.Sv,{text:a(i?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,x.i6)(g.JU,f);if(e.isValid){m({});const e={name:(null===f||void 0===f?void 0:f.depName)||"",short_name:(null===f||void 0===f?void 0:f.shortName)||"",is_active:!!_};d(e)}else m(e.errors)})(),isLoading:i?p:v})})})]}),t&&(0,l.jsx)("div",{className:"modal-backdrop fade show"})]})},T=()=>{const{t:e}=(0,u.K)(),a=(0,r.wA)(),{getAllDepartmentRes:t,getAllDepartmentError:n,getAllDepartmentPending:i,deleteDepartmentPending:d,deleteDepartmentRes:p,deleteDepartmentError:h,addDepartmentPending:x,addDepartmentRes:g,addDepartmentError:_,updateDepartmentPending:j,updateDepartmentRes:f,updateDepartmentError:N}=(0,r.d4)((e=>e.department)),[b,E]=(0,s.useState)(""),[D,S]=(0,s.useState)(""),[A,C]=(0,s.useState)(!1),[y,T]=(0,s.useState)(),[P,k]=(0,s.useState)(!1),[w,U]=(0,s.useState)(1),I=e=>{S(e||""),C(!A)};(0,s.useEffect)((()=>{if(!x){if(_)return void a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_ADD_DEPARTMENT_STORE"));g&&200==(null===g||void 0===g?void 0:g.code)&&(a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_ADD_DEPARTMENT_STORE")),a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE")),I(),O())}}),[x,g,_]),(0,s.useEffect)((()=>{if(!j){if(N)return void a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_DEPARTMENT_STORE"));f&&200==(null===f||void 0===f?void 0:f.code)&&(a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_DEPARTMENT_STORE")),a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE")),O(),I())}}),[j,f,N]),(0,s.useEffect)((()=>{O()}),[w]);const O=()=>{const e={page:w,limit:m.X$.limit};a(c.vd.getAllDepartmentRequest(e))};(0,s.useEffect)((()=>{if(!i){if(n)return;t&&200===(null===t||void 0===t?void 0:t.code)&&E(null===t||void 0===t?void 0:t.data)}}),[t,n,i]);const H=e=>{e&&T(e),k(!P)};return(0,s.useEffect)((()=>{if(!d){if(h)return void a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_DELETE_DEPARTMENT_STORE"));var e;if(p)if(200==(null===p||void 0===p?void 0:p.code))a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_DELETE_DEPARTMENT_STORE")),a(c.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE")),H(),w>1&&1===(null===b||void 0===b||null===(e=b.data)||void 0===e?void 0:e.length)?U((e=>e-1)):O()}}),[p,h,d]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,l.jsxs)("div",{className:"cardHead d-flex",children:[(0,l.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,l.jsx)("h4",{className:"ms-2 ",children:"Department"})]}),(0,l.jsx)("div",{className:"d-flex gap-2",children:(0,l.jsx)(o.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>I(),text:e("btns.createDepartment"),slug:"create_department"})})]}),(0,l.jsx)(R,{isLoading:i,toggleDepartmentModal:I,setSelectedDepartmentData:S,toggleDeleteModal:H,currentPage:w,setCurrentPage:U,departmentList:b})]}),A&&(0,l.jsx)(L,{getAllDepartments:O,openCreateUpdateDepModal:A,toggleDepartmentModal:I,selectedDepartmentData:D,handleCreateUpdateDepartment:e=>{D?(e._id=null===D||void 0===D?void 0:D._id,a(c.vd.updateDepartmentRequest(e))):a(c.vd.addDepartmentRequest(e))}}),P&&(0,l.jsx)(v.A,{onApproveReject:e=>{if(e){const e={_id:y};a(null===c.vd||void 0===c.vd?void 0:c.vd.deleteDepartmentRequest(e))}else H()},isShow:P,desc:e("alerts.deletePopup.desc").replace("$1","Department"),btnRightLoading:d,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")})]})};var P=t(43123);const k=e=>{const{t:a}=(0,u.K)(),{getAllDesignation:t,setSelectedDesignation:i,isOpen:d,toggleDesignation:m,selectedDesignation:v}=e,[p,_]=(0,s.useState)({}),j=(0,r.wA)(),{addDesignationPending:f,addDesignationRes:N,addDesignationError:b}=(0,r.d4)((e=>e.designation)),{getDepartmentListPending:E,getDepartmentListRes:D,getDepartmentListError:S}=(0,r.d4)((e=>e.department)),{updateDesignationPending:A,updateDesignationRes:C,updateDesignationError:R}=(0,r.d4)((e=>e.designation)),[y,L]=(0,s.useState)([]),[T,P]=(0,s.useState)(!0),[k,w]=(0,s.useState)(""),[U,I]=(0,s.useState)({departmentId:"",designationName:"",shortName:""});(0,s.useEffect)((()=>{O()}),[]);const O=()=>{j(c.vd.getDepartmentListRequest())};(0,s.useEffect)((()=>{if(!E){if(S)return;if(D&&200===(null===D||void 0===D?void 0:D.code)){const e=null===D||void 0===D?void 0:D.data;L(e)}}}),[D,S,E]);(0,s.useEffect)((()=>{if(!f){if(b)return void j(c.EU.handleClearDesignationStore("HANDLE_CLEAR_ADD_DESIGNATION_STORE"));N&&200==(null===N||void 0===N?void 0:N.code)&&(j(c.EU.handleClearDesignationStore("HANDLE_CLEAR_ADD_DESIGNATION_STORE")),m(),t())}}),[f,N,b]);const H=e=>{p&&_({});const{name:a,value:t}=e.target;I((e=>{const s={...e,[a]:t};return"designationName"===a&&(s.shortName=(0,n.aF)(t)),s}))};return(0,s.useEffect)((()=>{I({departmentId:null===v||void 0===v?void 0:v.department_id,designationName:(null===v||void 0===v?void 0:v.name)||"",shortName:(null===v||void 0===v?void 0:v.short_name)||""}),P(null===v||void 0===v?void 0:v.is_active),w(null===v||void 0===v?void 0:v._id)}),[v]),(0,s.useEffect)((()=>{if(!A){if(R)return void j(c.EU.handleClearDesignationStore("HANDLE_CLEAR_UPDATE_DESIGNATION_STORE"));C&&200==(null===C||void 0===C?void 0:C.code)&&(j(c.EU.handleClearDesignationStore("HANDLE_CLEAR_UPDATE_DESIGNATION_STORE")),m(),t())}}),[A,C,R]),(0,s.useEffect)((()=>{0==d&&(I({departmentId:"",designationName:"",shortName:""}),i(""),_({}))}),[d]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(d?"show":""),tabIndex:-1,style:{visibility:d?"visible":"hidden"},children:[(0,l.jsxs)("div",{className:"offcanvas-header",children:[(0,l.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[v?"Update":"Create New"," Designation"]}),(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>m()})]}),(0,l.jsx)("div",{className:"offcanvas-body",children:(0,l.jsxs)("div",{className:"formPanel",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:a("labels.selectDepartment"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsxs)("select",{className:"form-select",name:"departmentId",value:null===U||void 0===U?void 0:U.departmentId,onChange:e=>H(e),disabled:"",children:[(0,l.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Department..."}),y&&(null===y||void 0===y?void 0:y.length)>0&&(null===y||void 0===y?void 0:y.map(((e,a)=>(0,l.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))))]}),(null===p||void 0===p?void 0:p.departmentId)&&(0,l.jsx)(o.eo,{text:p.departmentId})]})}),(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:a("labels.name"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:a("placeholders.designationName"),value:(null===U||void 0===U?void 0:U.designationName)||"",name:"designationName",onChange:e=>H(e)}),(null===p||void 0===p?void 0:p.designationName)&&(0,l.jsx)(o.eo,{text:p.designationName})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:a("labels.shortName"),required:!0})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsxs)("div",{className:"form-group mb-3",children:[(0,l.jsx)(h.pd,{type:"text",placeholder:a("placeholders.shortName"),value:null===U||void 0===U?void 0:U.shortName,name:"shortName",onChange:e=>H(e)}),(null===p||void 0===p?void 0:p.shortName)&&(0,l.jsx)(o.eo,{text:p.shortName})]})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.JU,{text:a("labels.isActive")})})}),(0,l.jsx)("div",{className:"col-md-9",children:(0,l.jsx)("div",{className:"form-group mb-3",children:(0,l.jsx)(h.P_,{id:"is_active",checked:T,handleChange:e=>P(!T),name:"is_active"},"is_active")})})]})]})}),(0,l.jsx)("div",{className:"offcanvas-footer",children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,l.jsx)(o.Sv,{text:a(v?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,x.i6)(g.Mv,U);if(e.isValid){_({});let e={department_id:null===U||void 0===U?void 0:U.departmentId,name:(null===U||void 0===U?void 0:U.designationName)||"",short_name:(null===U||void 0===U?void 0:U.shortName)||"",is_active:T};v?(e._id=k,j(c.EU.updateDesignationRequest(e))):j(c.EU.addDesignationRequest(e))}else _(e.errors)})(),isLoading:v?A:f})})})]})})},w=()=>{const{t:e}=(0,u.K)(),a=(0,r.wA)(),{getAllDesignationRes:t,getAllDesignationError:n,getAllDesignationPending:i,deleteDesignationPending:d,deleteDesignationRes:p,deleteDesignationError:h}=(0,r.d4)((e=>e.designation)),[x,g]=(0,s.useState)(""),[_,j]=(0,s.useState)(""),[f,N]=(0,s.useState)(!1),[b,E]=(0,s.useState)(!1),[D,S]=(0,s.useState)(),[A,C]=(0,s.useState)(null===m.X$||void 0===m.X$?void 0:m.X$.page);(0,s.useEffect)((()=>{y()}),[A]);const R=()=>{N(!f)},y=()=>{const e={page:A,limit:null===m.X$||void 0===m.X$?void 0:m.X$.limit};a(c.EU.getAllDesignationRequest(e))};(0,s.useEffect)((()=>{if(!i){if(n)return;t&&200==(null===t||void 0===t?void 0:t.code)&&g(null===t||void 0===t?void 0:t.data)}}),[t,n,i]);return(0,s.useEffect)((()=>{if(!d){if(h)return void a(c.EU.handleClearDesignationStore("HANDLE_CLEAR_DELETE_DESIGNATION_STORE"));var e;if(p)if(200==(null===p||void 0===p?void 0:p.code))a(c.EU.handleClearDesignationStore("HANDLE_CLEAR_DELETE_DESIGNATION_STORE")),A>1&&1===(null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.length)?C((e=>e-1)):y()}}),[p,h,d]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,l.jsxs)("div",{className:"cardHead d-flex",children:[(0,l.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,l.jsx)("h4",{className:"ms-2 ",children:"Designation"})]}),(0,l.jsx)("div",{className:"d-flex gap-2",children:(0,l.jsx)(o.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>R(),text:e("btns.createDesignation"),slug:"create_designation"})})]}),(0,l.jsx)(P.A,{designationList:x,isLoading:i,setSelectedDesignation:j,toggleDesignation:R,onHandleDeleteModal:e=>{E(!b),S(e)},currentPage:A,setCurrentPage:C})]}),f&&(0,l.jsx)(k,{getAllDesignation:y,setSelectedDesignation:j,isOpen:f,toggleDesignation:R,selectedDesignation:_}),b&&(0,l.jsx)(v.A,{onApproveReject:(e,t)=>{if(e){let e={_id:D};a(null===c.EU||void 0===c.EU?void 0:c.EU.deleteDesignationRequest(e))}E(!b)},isShow:b,desc:e("alerts.deletePopup.desc").replace("$1","Designation"),btnRightLoading:d})]})},U=()=>{const e=(0,r.wA)(),[a,t]=(0,s.useState)("department"),[n,i]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[v,u]=(0,s.useState)([]),[p,h]=(0,s.useState)({departmentCount:0,designationCount:0,projectCount:0,functionCount:0}),{getDepartmentListRes:x,getDepartmentListError:g,getDepartmentListPending:_,getSubDepartmentByDepartmentRes:j,getSubDepartmentByDepartmentError:N,getSubDepartmentByDepartmentPending:E}=(0,r.d4)((e=>e.department)),{getAllEmployeeRes:S,getAllEmployeeError:A,getAllEmployeePending:C}=(0,r.d4)((e=>e.employee));(0,s.useEffect)((()=>{R(),y()}),[]);const R=()=>{const a=null===x||void 0===x?void 0:x.data;null!==a&&void 0!==a&&a.length?i(a):e(c.vd.getDepartmentListRequest())};(0,s.useEffect)((()=>{if(!_){if(g)return;if(x&&200===(null===x||void 0===x?void 0:x.code)){const e=null===x||void 0===x?void 0:x.data;i(e)}}}),[x,g,_]);const y=()=>{e(c.mM.getAllEmployeeRequest())};(0,s.useEffect)((()=>{if(!C){if(A)return;S&&200===(null===S||void 0===S?void 0:S.code)&&(u(null===S||void 0===S?void 0:S.data),h((e=>({...e,departmentCount:null===S||void 0===S?void 0:S.data}))))}}),[S,A,C]);return(0,s.useEffect)((()=>{if(!E){if(N)return;j&&200===(null===j||void 0===j?void 0:j.code)&&m(null===j||void 0===j?void 0:j.data)}}),[j,N,E]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{isActiveTab:a,setIsActiveTab:t}),"department"===a&&(0,l.jsx)(T,{}),"functions"===a&&(0,l.jsx)(f,{allDepartments:n,allEmployeeList:v}),"projects"===a&&(0,l.jsx)(b,{allDepartments:n,allEmployeeList:v,getSubDepartmentByDepartment:a=>{const t={department_id:a};e(c.vd.getSubDepartmentByDepartmentRequest(t))},subDepartmentByDepartmentData:o}),"designation"===a&&(0,l.jsx)(w,{allDepartments:n}),"skills"===a&&(0,l.jsx)(D,{})]})}},43123:(e,a,t)=>{t.d(a,{A:()=>m});var s=t(65043),n=(t(85831),t(34348)),l=t.n(n),i=t(49985),d=t(29829),o=t(90607),r=t(50586),c=t(70579);const m=e=>{const{t:a}=(0,o.K)(),{designationList:t,isLoading:n,setSelectedDesignation:m,toggleDesignation:v,onHandleDeleteModal:u,setCurrentPage:p,currentPage:h}=e,[x,g]=(0,s.useState)(),_=(0,i.Yo)("update_designation"),j=(0,i.Yo)("delete_designation");(0,s.useEffect)((()=>{g(t)}),[t]);const f=(0,s.useMemo)((()=>({sn:(e,a)=>(0,c.jsx)("span",{children:a+1}),is_active:e=>(0,c.jsx)("span",{className:`badge ${(0,i.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>l()(e.created_at).format("DD-MM-YYYY"),action:e=>(0===(null===e||void 0===e?void 0:e.emp_count)||_)&&(0,c.jsxs)("div",{className:"btn-group actionDrp",children:[(0,c.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,c.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,c.jsxs)("ul",{className:"dropdown-menu",children:[_&&(0,c.jsx)("li",{children:(0,c.jsxs)("span",{className:"dropdown-item",onClick:()=>(m(e),void v()),children:[(0,c.jsx)(r.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),0===(null===e||void 0===e?void 0:e.emp_count)&&j&&(0,c.jsx)("li",{children:(0,c.jsxs)("span",{className:"dropdown-item",onClick:()=>u(e._id),children:[(0,c.jsx)(r.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[m,v,u]),N=[{key:"sn",label:"S.N"},{key:"department_name",label:"Department Name"},{key:"name",label:"Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},(_||j)&&{key:"action",label:"Action"}];return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Ak,{data:null===x||void 0===x?void 0:x.data,fields:N,isLoading:n,pagination:!0,currentPage:h,setCurrentPage:p,totalPages:null===x||void 0===x?void 0:x.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:f})})}}}]);
//# sourceMappingURL=7646.275b88da.chunk.js.map