"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[3862],{33862:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(65043),d=a(22166),l=a(94174),n=a(92250),r=a(80728),i=a(26181),o=a(33474),c=a(45531),m=a(90607),p=a(70579);const v=e=>{const{t:t}=(0,m.K)(),{openCreateUpdateDepModal:a,toggleDepartmentModal:l,selectedDepartmentData:v,handleCreateUpdateDepartment:u}=e,[h,D]=(0,s.useState)({}),{addDepartmentPending:N,updateDepartmentPending:x}=(0,d.d4)((e=>e.department)),[E,g]=(0,s.useState)(!0),[f,_]=(0,s.useState)({depName:"",shortName:""}),j=e=>{h&&D({});const{name:t,value:a}=e.target;_({...f,[t]:a})};(0,s.useEffect)((()=>{v&&(_({depName:(null===v||void 0===v?void 0:v.name)||"",shortName:(null===v||void 0===v?void 0:v.short_name)||""}),g(null===v||void 0===v?void 0:v.is_active))}),[v]),(0,s.useEffect)((()=>()=>{b()}),[a]);const b=()=>{_({depName:"",shortName:""}),D({})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(a?"show":""),tabIndex:-1,style:{visibility:a?"visible":"hidden",width:"800px"},children:[(0,p.jsxs)("div",{className:"offcanvas-header",children:[(0,p.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[" ",v?"Update":"Create New"," Department"]}),(0,p.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>l()})]}),(0,p.jsx)("div",{className:"offcanvas-body",children:(0,p.jsxs)("div",{className:"formPanel",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-3",children:(0,p.jsx)("div",{className:"form-group mb-3",children:(0,p.jsx)(c.JU,{text:t("labels.name"),required:!0})})}),(0,p.jsx)("div",{className:"col-md-9",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)(c.pd,{type:"text",placeholder:t("placeholders.departmentName"),value:(null===f||void 0===f?void 0:f.depName)||"",name:"depName",onChange:e=>j(e)}),(null===h||void 0===h?void 0:h.depName)&&(0,p.jsx)(o.A,{text:h.depName})]})})]}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-3",children:(0,p.jsx)("div",{className:"form-group",children:(0,p.jsx)(c.JU,{text:t("labels.shortName"),required:!0})})}),(0,p.jsx)("div",{className:"col-md-9",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)(c.pd,{type:"text",placeholder:t("placeholders.shortName"),value:null===f||void 0===f?void 0:f.shortName,name:"shortName",onChange:e=>j(e)}),(null===h||void 0===h?void 0:h.shortName)&&(0,p.jsx)(o.A,{text:h.shortName})]})})]}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-3",children:(0,p.jsx)("div",{className:"form-group mb-3",children:(0,p.jsx)(c.JU,{text:t("labels.isActive")})})}),(0,p.jsx)("div",{className:"col-md-9",children:(0,p.jsx)("div",{className:"form-group mb-3",children:(0,p.jsx)(c.P_,{id:"is_active",checked:E,handleChange:e=>g(!E),name:"is_active"},"is_active")})})]})]})}),(0,p.jsx)("div",{className:"offcanvas-footer",children:(0,p.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,p.jsx)(n.Sv,{text:t(v?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,i.i6)(r.JU,f);if(e.isValid){D({});const e={name:(null===f||void 0===f?void 0:f.depName)||"",short_name:(null===f||void 0===f?void 0:f.shortName)||"",is_active:!!E};u(e)}else D(e.errors)})(),isLoading:v?x:N})})})]}),a&&(0,p.jsx)("div",{className:"modal-backdrop fade show"})]})};var u=a(52027),h=a(35685),D=a(34348),N=a.n(D),x=a(82149),E=a(49985);const g=e=>{const{t:t}=(0,m.K)(),{departmentList:a,isLoading:d,setSelectedDepartmentData:l,toggleDepartmentModal:n,toggleDeleteModal:r,currentPage:i,setCurrentPage:o}=e,[v,u]=(0,s.useState)(a);(0,s.useEffect)((()=>{u(a)}),[a]);const h=(0,s.useMemo)((()=>({sn:(e,t)=>(0,p.jsx)("span",{children:t+1}),is_active:e=>(0,p.jsx)("span",{className:`badge ${(0,E.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>N()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,p.jsxs)("div",{className:"btn-group actionDrp",children:[(0,p.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,p.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,p.jsxs)("ul",{className:"dropdown-menu",children:[(0,p.jsx)("li",{children:(0,p.jsxs)("span",{className:"dropdown-item",onClick:()=>{n(e)},children:[(0,p.jsx)(c.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),0===(null===e||void 0===e?void 0:e.emp_count)&&(0,p.jsx)("li",{children:(0,p.jsxs)("span",{className:"dropdown-item",onClick:()=>r(e._id),children:[(0,p.jsx)(c.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[l,n,r]);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(x.A,{data:null===v||void 0===v?void 0:v.data,fields:[{key:"sn",label:"S.N"},{key:"name",label:"Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},{key:"action",label:"Action"}],isLoading:d,pagination:!0,currentPage:i,setCurrentPage:o,totalPages:null===v||void 0===v?void 0:v.totalPages,tableName:"Department",scopedSlots:h})})},f=()=>{const{t:e}=(0,m.K)(),t=(0,d.wA)(),{getAllDepartmentRes:a,getAllDepartmentError:r,getAllDepartmentPending:i,deleteDepartmentPending:o,deleteDepartmentRes:c,deleteDepartmentError:D,addDepartmentPending:N,addDepartmentRes:x,addDepartmentError:E,updateDepartmentPending:f,updateDepartmentRes:_,updateDepartmentError:j}=(0,d.d4)((e=>e.department)),[b,A]=(0,s.useState)(""),[T,S]=(0,s.useState)(""),[C,R]=(0,s.useState)(!1),[L,P]=(0,s.useState)(),[y,M]=(0,s.useState)(!1),[k,w]=(0,s.useState)(1),U=e=>{S(e||""),R(!C)};(0,s.useEffect)((()=>{if(!N){if(E)return void t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_ADD_DEPARTMENT_STORE"));x&&200==(null===x||void 0===x?void 0:x.code)&&(t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_ADD_DEPARTMENT_STORE")),t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE")),U(),O())}}),[N,x,E]),(0,s.useEffect)((()=>{if(!f){if(j)return void t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_DEPARTMENT_STORE"));_&&200==(null===_||void 0===_?void 0:_.code)&&(t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_UPDATE_DEPARTMENT_STORE")),t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE")),O(),U())}}),[f,_,j]),(0,s.useEffect)((()=>{O()}),[k]);const O=()=>{const e={page:k,limit:u.X$.limit};t(l.vd.getAllDepartmentRequest(e))};(0,s.useEffect)((()=>{if(!i){if(r)return;a&&200===(null===a||void 0===a?void 0:a.code)&&A(null===a||void 0===a?void 0:a.data)}}),[a,r,i]);const H=e=>{e&&P(e),M(!y)};return(0,s.useEffect)((()=>{if(!o){if(D)return void t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_DELETE_DEPARTMENT_STORE"));var e;if(c)if(200==(null===c||void 0===c?void 0:c.code))t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_DELETE_DEPARTMENT_STORE")),t(l.vd.handleClearDepartmentStore("HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE")),H(),k>1&&1===(null===b||void 0===b||null===(e=b.data)||void 0===e?void 0:e.length)?w((e=>e-1)):O()}}),[c,D,o]),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"d-flex  justify-content-end ",children:(0,p.jsx)(n.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>U(),text:e("btns.createDepartment")})}),(0,p.jsx)(g,{isLoading:i,toggleDepartmentModal:U,setSelectedDepartmentData:S,toggleDeleteModal:H,currentPage:k,setCurrentPage:w,departmentList:b}),(0,p.jsx)(v,{getAllDepartments:O,openCreateUpdateDepModal:C,toggleDepartmentModal:U,selectedDepartmentData:T,handleCreateUpdateDepartment:e=>{T?(e._id=null===T||void 0===T?void 0:T._id,t(l.vd.updateDepartmentRequest(e))):t(l.vd.addDepartmentRequest(e))}}),y&&(0,p.jsx)(h.A,{onApproveReject:e=>{if(e){const e={_id:L};t(null===l.vd||void 0===l.vd?void 0:l.vd.deleteDepartmentRequest(e))}else H()},isShow:y,desc:e("alerts.deletePopup.desc").replace("$1","Department"),btnRightLoading:o,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")})]})}}}]);
//# sourceMappingURL=3862.555f08b6.chunk.js.map