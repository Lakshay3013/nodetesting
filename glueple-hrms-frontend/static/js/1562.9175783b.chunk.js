"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[1562],{11562:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var s=i(65043),a=i(85831),n=i(22166),o=i(94174),l=i(29829),d=i(49985),r=i(86178),c=i.n(r),m=i(90607),v=i(50586),u=i(70579);const p=e=>{const{t:t}=(0,m.K)(),{allPositions:i,isLoading:a,toggleCreateUpdatePositionModal:n,handlePositionDeleteModal:o,currentPage:r,setCurrentPage:p}=e,[h,g]=(0,s.useState)(i),x=(0,d.Yo)("update_position"),f=(0,d.Yo)("delete_position");(0,s.useEffect)((()=>{g(i)}),[i]);const _=(0,s.useMemo)((()=>({sn:(e,t)=>(0,u.jsx)("span",{children:t+1}),is_active:e=>(0,u.jsx)("span",{className:`badge ${(0,d.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>c()(e.created_at).format("DD-MM-YYYY"),action:e=>(0===(null===e||void 0===e?void 0:e.emp_count)||x)&&(0,u.jsxs)("div",{className:"btn-group actionDrp",children:[(0,u.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,u.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,u.jsxs)("ul",{className:"dropdown-menu",children:[x&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>{n(e)},children:[(0,u.jsx)(v.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),0===(null===e||void 0===e?void 0:e.emp_count)&&f&&(0,u.jsx)("li",{children:(0,u.jsxs)("span",{className:"dropdown-item",onClick:()=>o(e._id),children:[(0,u.jsx)(v.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[n]),j=[{key:"sn",label:"S.N"},{key:"department_name",label:"Departments"},{key:"designation_name",label:"Designations"},{key:"name",label:"Position Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},(x||f)&&{key:"action",label:"Action"}];return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(l.Ak,{data:null===h||void 0===h?void 0:h.data,fields:j,isLoading:a,pagination:!0,currentPage:r,setCurrentPage:p,totalPages:null===h||void 0===h?void 0:h.totalPages,tableName:"Position",scopedSlots:_})})};var h=i(52027),g=i(35685),x=i(56462),f=i(26181),_=i(80728);const j=e=>{const{addPositionPending:t,updatePositionPending:i}=(0,n.d4)((e=>null===e||void 0===e?void 0:e.position)),{t:o}=(0,m.K)(),{selectedPositionData:l,openModel:r,handleOpenClose:c,allDepartments:p,handleDesignationByDepartment:h,allDesignations:g,handleCreateUpdatePosition:j}=e,[P,b]=(0,s.useState)({}),[N,D]=(0,s.useState)({department:null,designation:null,name:"",short_name:"",is_active:!0}),E=(e,t)=>{var i;const s=t||(null===(i=e.target)||void 0===i?void 0:i.name),{value:a,type:n,checked:o}=e.target?e.target:{value:e};"department"===t&&(h(null===a||void 0===a?void 0:a.value),D((e=>({...e,designation:null})))),D((e=>{const t={...e,[s]:"checkbox"===n?o:a};return"name"===s&&(t.short_name=(0,d.aF)(a)),t})),b((e=>({...e,[s]:void 0})))};(0,s.useEffect)((()=>()=>{S()}),[r]),(0,s.useEffect)((()=>{l&&D({department:{value:null===l||void 0===l?void 0:l.department_id,label:null===l||void 0===l?void 0:l.department_name},designation:{value:null===l||void 0===l?void 0:l.designation_id,label:null===l||void 0===l?void 0:l.designation_name},name:null===l||void 0===l?void 0:l.name,short_name:null===l||void 0===l?void 0:l.short_name,is_active:null===l||void 0===l?void 0:l.is_active})}),[l]);const S=()=>{D({department:null,designation:null,name:"",short_name:"",is_active:!0}),b({})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas offcanvas-end  "+(r?"show":""),tabIndex:-1,style:{visibility:r?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,u.jsxs)("div",{className:"offcanvas-header",children:[(0,u.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:o(l?"headings.updatePosition":"headings.createPosition")}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>c()})]}),(0,u.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,u.jsxs)("div",{className:"formPanel",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(v.JU,{text:o("labels.selectDepartment"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(x.A,{data:p,placeholder:o("placeholders.selectDepartment"),value:(null===N||void 0===N?void 0:N.department)||"",handleChange:e=>E(e,"department"),name:"department"}),(null===P||void 0===P?void 0:P.department)&&(0,u.jsx)(a.eo,{text:P.department})]})}),(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(v.JU,{text:o("labels.selectDesignation"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(x.A,{data:g,placeholder:o("placeholders.selectDesignation"),value:(null===N||void 0===N?void 0:N.designation)||"",handleChange:e=>E(e,"designation"),name:"designation"}),(null===P||void 0===P?void 0:P.designation)&&(0,u.jsx)(a.eo,{text:P.designation})]})}),(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(v.JU,{text:o("labels.positionName"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(v.pd,{type:"text",placeholder:o("placeholders.positionName"),value:null===N||void 0===N?void 0:N.name,name:"name",onChange:e=>E(e)}),(null===P||void 0===P?void 0:P.name)&&(0,u.jsx)(a.eo,{text:P.name})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(v.JU,{text:o("labels.shortName"),required:!0})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsxs)("div",{className:"form-group mb-3",children:[(0,u.jsx)(v.pd,{type:"text",placeholder:o("placeholders.shortName"),value:null===N||void 0===N?void 0:N.short_name,name:"short_name",onChange:e=>E(e)}),(null===P||void 0===P?void 0:P.short_name)&&(0,u.jsx)(a.eo,{text:P.short_name})]})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(v.JU,{text:o("labels.isActive")})})}),(0,u.jsx)("div",{className:"col-md-9",children:(0,u.jsx)("div",{className:"form-group mb-3",children:(0,u.jsx)(v.P_,{id:"is_active",checked:null===N||void 0===N?void 0:N.is_active,handleChange:e=>E(e),name:"is_active"},"is_active")})})]})]})}),(0,u.jsx)("div",{className:"offcanvas-footer",children:(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,u.jsx)(a.Sv,{text:o(l?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,f.i6)(_.Td,N);if(e.isValid){const{department:e,designation:t,name:i,short_name:s,is_active:a}=N,n={name:i,short_name:s,is_active:a,department_id:null===e||void 0===e?void 0:e.value,designation_id:null===t||void 0===t?void 0:t.value};b({}),j(n)}else b(e.errors)})(),isLoading:l?i:t})})})]}),r&&(0,u.jsx)("div",{className:"modal-backdrop fade show"})]})},P=()=>{const e=(0,n.wA)(),{t:t}=(0,m.K)(),{addPositionPending:i,addPositionRes:l,addPositionError:d,getAllPositionPending:r,getAllPositionRes:c,getAllPositionError:v,updatePositionPending:x,updatePositionRes:f,updatePositionError:_,deletePositionPending:P,deletePositionRes:b,deletePositionError:N}=(0,n.d4)((e=>e.position)),{getDepartmentListRes:D,getDepartmentListError:E,getDepartmentListPending:S}=(0,n.d4)((e=>e.department)),{getDesignationsByDepartmentRes:C,getDesignationsByDepartmentPending:A,getDesignationsByDepartmentError:y}=(0,n.d4)((e=>e.designation)),[R,L]=(0,s.useState)(!1),[k,O]=(0,s.useState)(""),[T,w]=(0,s.useState)([]),[I,U]=(0,s.useState)([]),[q,M]=(0,s.useState)(1),[B,H]=(0,s.useState)({}),[Y,J]=(0,s.useState)(!1),[F,K]=(0,s.useState)("");(0,s.useEffect)((()=>{X()}),[]);const $=e=>{O(e||""),L(!R)};(0,s.useEffect)((()=>{if(!i){if(d)return void e(o.lu.handleClearPositionStore("HANDLE_CLEAR_ADD_POSITION_STORE"));l&&200===(null===l||void 0===l?void 0:l.code)&&(e(o.lu.handleClearPositionStore("HANDLE_CLEAR_ADD_POSITION_STORE")),V(),L(!R))}}),[l,d,i]),(0,s.useEffect)((()=>{if(!x){if(_)return void e(o.lu.handleClearPositionStore("HANDLE_CLEAR_UPDATE_POSITION_STORE"));f&&200===(null===f||void 0===f?void 0:f.code)&&(e(o.lu.handleClearPositionStore("HANDLE_CLEAR_UPDATE_POSITION_STORE")),V(),L(!R))}}),[f,_,x]);const X=()=>{const t=null===D||void 0===D?void 0:D.data;null!==t&&void 0!==t&&t.length?w(t):e(o.vd.getDepartmentListRequest())};(0,s.useEffect)((()=>{if(!S){if(E)return;if(D&&200===(null===D||void 0===D?void 0:D.code)){const e=null===D||void 0===D?void 0:D.data;w(e)}}}),[D,E,S]);(0,s.useEffect)((()=>{if(!A){if(y)return;if(C&&200===(null===C||void 0===C?void 0:C.code)){const e=null===C||void 0===C?void 0:C.data;U(e)}}}),[C,y,A]),(0,s.useEffect)((()=>{V()}),[q]);const V=()=>{const t={page:q,limit:h.X$.limit};e(o.lu.getAllPositionRequest(t))};(0,s.useEffect)((()=>{if(!r){if(v)return;if(c&&200===(null===c||void 0===c?void 0:c.code)){const e=null===c||void 0===c?void 0:c.data;H(e)}}}),[c,v,r]);const z=e=>{e&&K(e),J(!Y)};return(0,s.useEffect)((()=>{if(!P){if(N)return void e(o.lu.handleClearPositionStore("HANDLE_CLEAR_DELETE_POSITION_STORE"));var t;if(b)if(200===(null===b||void 0===b?void 0:b.code))z(),q>1&&1===(null===B||void 0===B||null===(t=B.data)||void 0===t?void 0:t.length)?M((e=>e-1)):V(),e(o.lu.handleClearPositionStore("HANDLE_CLEAR_DELETE_POSITION_STORE"))}}),[b,N,P]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"d-flex  justify-content-end ",children:(0,u.jsx)(a.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>$(),text:t("btns.createNewPosition"),slug:"create_position"})}),(0,u.jsx)(j,{openModel:R,handleOpenClose:$,handleCreateUpdatePosition:t=>{k?(t._id=(null===k||void 0===k?void 0:k._id)||(null===k||void 0===k?void 0:k.id),e(o.lu.updatePositionRequest(t))):e(o.lu.addPositionRequest(t))},selectedPositionData:k,allDepartments:T,handleDesignationByDepartment:t=>{const i={department_id:t};e(o.EU.getDesignationsByDepartmentRequest(i))},allDesignations:I}),(0,u.jsx)(p,{toggleCreateUpdatePositionModal:$,currentPage:q,setCurrentPage:M,allPositions:B,handlePositionDeleteModal:z,isLoading:r}),Y&&(0,u.jsx)(g.A,{onApproveReject:t=>{if(t){const t={_id:F};e(null===o.lu||void 0===o.lu?void 0:o.lu.deletePositionRequest(t))}else z()},isShow:Y,desc:t("alerts.deletePopup.desc").replace("$1","Position"),btnRightLoading:P,btnTextRight:t("btns.delete"),btnTextLeft:t("btns.cancel")})]})}}}]);
//# sourceMappingURL=1562.9175783b.chunk.js.map