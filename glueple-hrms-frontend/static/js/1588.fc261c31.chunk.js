"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[1588],{31588:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var t=s(65043),l=s(85831),i=s(22166),d=s(94174),o=s(52027),n=s(35685),r=s(90607),c=s(29829),u=s(50586),v=s(49985),m=s(56462),p=s(26181),x=s(80728),h=s(70579);const j=e=>{const{t:a}=(0,r.K)(),{selectedTaskData:s,openModel:i,handleOpenClose:d,allDepartments:o,allEmployeeList:n,allProjectListData:v,subDepartmentByDepartmentData:j,handleCreateUpdateTask:g,filteredDropdownData:k}=e,[f,b]=(0,t.useState)({}),[_,T]=(0,t.useState)(""),[y,N]=(0,t.useState)({project:null,taskType:null,status:null,title:"",priority:null,assignee:null,watchers:null,taskDate:"",dueDate:"",originalEstimate:""}),[D,E]=(0,t.useState)(""),S=(0,t.useRef)(null),w=(e,a)=>{var s;const t=a||(null===(s=e.target)||void 0===s?void 0:s.name),{value:l,type:i,checked:d}=e.target?e.target:{value:e};N((e=>({...e,[t]:"checkbox"===i?d:l}))),b((e=>({...e,[t]:void 0})))};(0,t.useEffect)((()=>()=>{A()}),[i]),(0,t.useEffect)((()=>{s&&N({project:{value:null===s||void 0===s?void 0:s.project_id,label:null===s||void 0===s?void 0:s.project_name},priority:{value:null===s||void 0===s?void 0:s.priority_id,label:null===s||void 0===s?void 0:s.priority_name},title:null===s||void 0===s?void 0:s.title,taskType:{value:null===s||void 0===s?void 0:s.task_type_id,label:null===s||void 0===s?void 0:s.task_type_name},status:{value:null===s||void 0===s?void 0:s.task_manager_id,label:null===s||void 0===s?void 0:s.task_manager_name},assignee:null,watchers:null===s||void 0===s?void 0:s.watchers,taskDate:null===s||void 0===s?void 0:s.task_date,dueDate:null===s||void 0===s?void 0:s.due_date})}),[s]);const A=()=>{N({project:null,taskType:null,status:null,priority:null,title:"",assignee:null,watchers:null,taskDate:"",dueDate:""}),b({})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"offcanvas offcanvas-end  "+(i?"show":""),tabIndex:-1,style:{visibility:i?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,h.jsxs)("div",{className:"offcanvas-header",children:[(0,h.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:a(s?"headings.updateTask":"headings.createTask")}),(0,h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>d()})]}),(0,h.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,h.jsx)("div",{className:"formPanel",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.selectProject"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(m.A,{data:v,placeholder:a("placeholders.selectProject"),value:(null===y||void 0===y?void 0:y.project)||"",handleChange:e=>w(e,"project")}),(null===f||void 0===f?void 0:f.project)&&(0,h.jsx)(l.eo,{text:f.project})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.title"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(u.pd,{type:"text",placeholder:a("placeholders.title"),value:null===y||void 0===y?void 0:y.title,name:"title",onChange:e=>w(e)}),(null===f||void 0===f?void 0:f.title)&&(0,h.jsx)(l.eo,{text:f.title})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.taskType"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(m.A,{data:j,placeholder:a("placeholders.taskType"),value:(null===y||void 0===y?void 0:y.taskType)||"",handleChange:e=>w(e,"taskType"),name:"taskType"}),(null===f||void 0===f?void 0:f.taskType)&&(0,h.jsx)(l.eo,{text:f.taskType})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.status"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(m.A,{data:null===k||void 0===k?void 0:k.task_status,placeholder:a("placeholders.status"),value:(null===y||void 0===y?void 0:y.status)||"",handleChange:e=>w(e,"status"),name:"status"}),(null===f||void 0===f?void 0:f.status)&&(0,h.jsx)(l.eo,{text:f.status})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.priority"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(m.A,{data:null===k||void 0===k?void 0:k.priority,placeholder:a("placeholders.priority"),value:(null===y||void 0===y?void 0:y.priority)||"",handleChange:e=>w(e,"priority"),name:"priority"}),(null===f||void 0===f?void 0:f.priority)&&(0,h.jsx)(l.eo,{text:f.priority})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.assignee"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(m.A,{data:n,placeholder:a("placeholders.assignee"),value:(null===y||void 0===y?void 0:y.assignee)||"",handleChange:e=>w(e,"assignee"),name:"assignee"}),(null===f||void 0===f?void 0:f.assignee)&&(0,h.jsx)(l.eo,{text:f.assignee})]})]}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)(u.JU,{text:a("labels.watchers"),required:!0}),(0,h.jsx)(u.tR,{optionsData:n,placeholder:"Select Watchers",values:y.watchers,onChange:e=>w(e,"watchers")}),(null===f||void 0===f?void 0:f.watchers)&&(0,h.jsx)(l.eo,{text:f.watchers})]})}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.taskDate"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(u.pd,{type:"date",placeholder:a("placeholders.taskDate"),value:null===y||void 0===y?void 0:y.taskDate,name:"taskDate",onChange:e=>w(e)}),(null===f||void 0===f?void 0:f.taskDate)&&(0,h.jsx)(l.eo,{text:f.taskDate})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.dueDate"),required:!0}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(u.pd,{type:"date",placeholder:a("placeholders.dueDate"),value:null===y||void 0===y?void 0:y.dueDate,name:"dueDate",onChange:e=>w(e)}),(null===f||void 0===f?void 0:f.dueDate)&&(0,h.jsx)(l.eo,{text:f.dueDate})]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(u.JU,{text:a("labels.originalEstimate")}),(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(u.pd,{type:"text",placeholder:a("placeholders.originalEstimate"),value:null===y||void 0===y?void 0:y.originalEstimate,name:"originalEstimate",onChange:e=>w(e)}),(null===f||void 0===f?void 0:f.originalEstimate)&&(0,h.jsx)(l.eo,{text:f.originalEstimate})]})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)(u.JU,{text:a("labels.description")}),(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(c.HG,{editorData:_,setEditorData:T,bodyData:"",editorSize:"sm"})})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)(u.JU,{text:a("labels.selectFile")}),(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)("input",{type:"file",id:"taskFile",name:"poster",className:"form-control ",onChange:e=>{const a=e.target.files[0];E(a)},accept:".png, .jpeg, .doc, .docx, .pdf",ref:S})})]})]})})}),(0,h.jsx)("div",{className:"offcanvas-footer",children:(0,h.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,h.jsx)(l.Sv,{text:a(s?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,p.i6)(x.Vr,y);if(e.isValid){const{project:e,title:a,taskType:s,status:t,priority:l,assignee:i,watchers:d,taskDate:o,dueDate:n,originalEstimate:r}=y,c={project_id:null===e||void 0===e?void 0:e.value,title:a,sub_department_id:null===s||void 0===s?void 0:s.value,task_manager_id:null===t||void 0===t?void 0:t.value,function_head_id:null===l||void 0===l?void 0:l.value,assignee:[],watchers:d,taskDate:o,dueDate:n,original_estimate:r};b({}),g(c)}else b(e.errors)})()})})})]}),i&&(0,h.jsx)("div",{className:"modal-backdrop fade show"})]})},g=()=>{const e=[{count:12,name:"Total"},{count:1,name:"Open"},{count:2,name:"Reopened"},{count:3,name:"Close"},{count:6,name:"To Do"},{count:3,name:"InProgress"},{count:1,name:"Rejected"},{count:2,name:"Hold"}];return(0,h.jsx)("div",{className:"ticketScoreSection",children:(0,h.jsx)("div",{className:"cardBox mb-3 leaveAppli",children:(0,h.jsx)("div",{className:"row px-md-1",children:null!==e&&void 0!==e&&e.length?e.map(((e,a)=>(0,h.jsx)("div",{className:"col-md px-md-2 mb-3",children:(0,h.jsxs)("div",{className:"totalBx h-100",style:{border:"1px solid #D8E8F7",background:a%2===0?"#D8E8F7":"#fff"},children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between ",children:[(0,h.jsx)("figure",{className:"mb-0",children:(0,h.jsx)("img",{src:"images/applyleavesIcon.svg",alt:"Task Icon",width:40})}),(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"",children:[(0,h.jsx)("span",{className:"d-flex justify-content-end",children:null===e||void 0===e?void 0:e.count}),(0,h.jsx)("h3",{className:"fw-bolder mb-0 mt-3",children:(0,v.Sn)(null===e||void 0===e?void 0:e.name)})]})})]}),(0,h.jsx)("img",{src:"images/totalattendance.svg",className:"cornerLine",alt:"Corner Design",width:95})]})},a))):null})})})};var k=s(73216);const f=[{sn:"1",name:"testing",task_id:"01",project:"glueple",assignedTo:"sarfaraz",task_type:"bug",no_of_sub_task:"0",task_date:"16-05-2024",due_date:"20-05-2024",is_active:"open"}],b=e=>{const a=(0,i.wA)(),{t:s}=(0,r.K)(),m=(0,k.Zp)(),[p,x]=(0,t.useState)([]),{addTaskPending:b,addTaskRes:_,addTaskError:T,getTaskPending:y,getTaskRes:N,getTaskError:D,updateTaskPending:E,updateTaskRes:S,updateTaskError:w,deleteTaskPending:A,deleteTaskRes:C,deleteTaskError:R}=(0,i.d4)((e=>e.taskManagement)),{getAllEmployeeRes:L,getAllEmployeeError:P,getAllEmployeePending:q}=(0,i.d4)((e=>e.employee)),{getFilteredDropdownDataError:U,getFilteredDropdownDataRes:H,getFilteredDropdownDataPending:I}=(0,i.d4)((e=>e.dropdownMaster)),{getAllProjectListPending:J,getAllProjectListRes:O,getAllProjectListError:F}=(0,i.d4)((e=>e.department)),[K,M]=(0,t.useState)(!1),[B,G]=(0,t.useState)(""),[V,$]=(0,t.useState)(1),[z,X]=(0,t.useState)({}),[Y,W]=(0,t.useState)(!1),[Z,Q]=(0,t.useState)(""),[ee,ae]=(0,t.useState)(""),[se,te]=(0,t.useState)([]),le=((0,v.Yo)("update_task"),(0,v.Yo)("delete_task"),e=>{G(e||""),M(!K)});(0,t.useEffect)((()=>{if(!b){if(T)return void a(d.wS.handleClearTaskStore("HANDLE_CLEAR_CREATE_TASK_STORE"));_&&200===(null===_||void 0===_?void 0:_.code)&&(a(d.wS.handleClearTaskStore("HANDLE_CLEAR_ADD_TASK_STORE")),a(d.wS.handleClearTaskStore("HANDLE_CLEAR_GET_ALL_TASK_LIST_STORE")),a(d.wS.handleClearTaskStore("HANDLE_CLEAR_GET_TASK_STORE")),le(),ie())}}),[_,T,b]),(0,t.useEffect)((()=>{if(!E){if(w)return void a(d.wS.handleClearTaskStore("HANDLE_CLEAR_UPDATE_TASK_STORE"));S&&200===(null===S||void 0===S?void 0:S.code)&&(a(d.wS.handleClearTaskStore("HANDLE_CLEAR_UPDATE_TASK_STORE")),a(d.wS.handleClearTaskStore("HANDLE_CLEAR_CREATE_TASK_STORE")),a(d.wS.handleClearTaskStore("HANDLE_CLEAR_GET_TASK_STORE")),ie(),le())}}),[S,w,E]),(0,t.useEffect)((()=>{ie()}),[V]);const ie=()=>{const e={page:V,limit:o.X$.limit};a(d.wS.getAllTaskRequest(e))};(0,t.useEffect)((()=>{if(!y){if(D)return;if(N&&200===(null===N||void 0===N?void 0:N.code)){const e=null===N||void 0===N?void 0:N.data;X(e)}}}),[N,D,y]);const de=e=>{e&&Q(e),W(!Y)};(0,t.useEffect)((()=>{if(!A){if(R)return;var e;if(C)if(200===(null===C||void 0===C?void 0:C.code))de(),V>1&&1===(null===z||void 0===z||null===(e=z.data)||void 0===e?void 0:e.length)?$((e=>e-1)):ie()}}),[C,R,A]);const oe=(0,t.useMemo)((()=>({sn:(e,a)=>(0,h.jsx)("span",{children:a+1}),is_active:e=>(0,h.jsx)("span",{className:`badge ${(0,v.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>(0,v.N_)(e.created_at),action:e=>(0,h.jsxs)("div",{className:"btn-group actionDrp",children:[(0,h.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,h.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,h.jsxs)("ul",{className:"dropdown-menu",children:[(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>le(e),children:[(0,h.jsx)(u.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>de(e._id),children:[(0,h.jsx)(u.In,{className:"bi bi-trash me-1"}),"Delete"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>ne(e),children:[(0,h.jsx)(u.In,{className:"bi bi-eye me-1"}),"View Detail"]})})]})]})})),[le]);(0,t.useEffect)((()=>{if(!I){if(U)return;if(H&&200===(null===H||void 0===H?void 0:H.code)){var e;const a=(0,v.Ib)(null===H||void 0===H||null===(e=H.data)||void 0===e?void 0:e.data);ae(a)}}}),[H,U,I]);(0,t.useEffect)((()=>{if(!q){if(P)return;L&&200===(null===L||void 0===L?void 0:L.code)&&x(null===L||void 0===L?void 0:L.data)}}),[L,P,q]);(0,t.useEffect)((()=>{if(!J){if(F)return;O&&200==(null===O||void 0===O?void 0:O.code)&&te(null===O||void 0===O?void 0:O.data)}}),[J,O,F]),(0,t.useEffect)((()=>{(()=>{let e={category:["priority","task_status"]};a(d.dk.getFilteredDropdownDataRequest(e))})(),a(d.mM.getAllEmployeeRequest()),a(d.vd.getAllProjectListRequest())}),[]);const ne=e=>{a(d.wS.selectedTaskDetail(e)),m("/view-task-detail")};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g,{}),(0,h.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[(0,h.jsxs)("div",{className:"cardHead d-flex",children:[(0,h.jsx)("img",{src:"images/myrequest-icon.svg",alt:"",width:35}),(0,h.jsx)("h4",{className:"ms-2 ",children:"Tasks"})]}),(0,h.jsx)("div",{children:(0,h.jsx)(l.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>le(),text:s("btns.createNewTask"),slug:"create_task"})})]}),(0,h.jsx)(c.Ak,{data:f,fields:[{key:"sn",label:"S.N"},{key:"name",label:"Task"},{key:"task_id",label:"Task Id"},{key:"project",label:"Project"},{key:"assignedTo",label:"Assigned to"},{key:"task_type",label:"Task Type"},{key:"no_of_sub_task",label:"No of Sub Task"},{key:"task_date",label:"Task Date"},{key:"due_date",label:"Due Date"},{key:"is_active",label:"Status"},{key:"action",label:"Action"}],isLoading:y,pagination:!0,currentPage:V,setCurrentPage:$,totalPages:null===z||void 0===z?void 0:z.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:oe})]}),K&&(0,h.jsx)(j,{openModel:K,handleOpenClose:le,handleCreateUpdateTask:e=>{B?(e._id=(null===B||void 0===B?void 0:B._id)||(null===B||void 0===B?void 0:B.id),a(d.wS.updateTaskRequest(e))):a(d.wS.addTaskRequest(e))},selectedTaskData:B,allProjectListData:se,allEmployeeList:p,filteredDropdownData:ee}),Y&&(0,h.jsx)(n.A,{onApproveReject:e=>{if(e){}else de()},isShow:Y,desc:s("alerts.deletePopup.desc").replace("$1","Task"),btnRightLoading:A,btnTextRight:s("btns.delete"),btnTextLeft:s("btns.cancel")})]})}}}]);
//# sourceMappingURL=1588.fc261c31.chunk.js.map