{"version":3,"file":"static/js/3862.555f08b6.chunk.js","mappings":"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","sources":["components/admin/department/CreateUpdateDepartment.js","components/admin/department/DepartmentTable.js","components/admin/department/Department.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useSelector } from 'react-redux'\r\nimport { CustomButton } from '../../globalComponents';\r\nimport { addDepartmentSchema } from '../../../utils/ValidationSchema';\r\nimport { validateSchema } from '../../../utils/ValidationHelper';\r\nimport CustomError from '../../globalComponents/CustomError';\r\nimport { CustCheckbox, Input, Label } from '../../commanComponent';\r\nimport { useCustomTranslation } from '../../../translation';\r\n\r\nconst CreateUpdateDepartment = (props) => {\r\n    const { t } = useCustomTranslation()\r\n    const {\r\n        openCreateUpdateDepModal,\r\n        toggleDepartmentModal,\r\n        selectedDepartmentData,\r\n        handleCreateUpdateDepartment\r\n    } = props\r\n    const [errors, setErrors] = useState({});\r\n    const {\r\n        addDepartmentPending,\r\n        updateDepartmentPending,\r\n    } = useSelector(state => state.department);\r\n    const [isActive, setIsActive] = useState(true);\r\n    const [depData, setDepData] = useState({\r\n        depName: '',\r\n        shortName: '',\r\n    })\r\n\r\n    const submitCreateUpdateDepartment = async () => {\r\n        const validationResponse = await validateSchema(addDepartmentSchema, depData);\r\n        if (validationResponse.isValid) {\r\n            setErrors({});\r\n            const params = {\r\n                name: depData?.depName || '',\r\n                short_name: depData?.shortName || '',\r\n                is_active: isActive ? true : false\r\n            }\r\n            handleCreateUpdateDepartment(params)\r\n        } else {\r\n            setErrors(validationResponse.errors);\r\n        }\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        errors && setErrors({});\r\n        const { name, value } = event.target\r\n        setDepData({ ...depData, [name]: value })\r\n    }\r\n\r\n    // Update Department \r\n    useEffect(() => {\r\n        if (selectedDepartmentData) {\r\n            setDepData({\r\n                depName: selectedDepartmentData?.name || '',\r\n                shortName: selectedDepartmentData?.short_name || '',\r\n            })\r\n            setIsActive(selectedDepartmentData?.is_active)\r\n        }\r\n    }, [selectedDepartmentData])\r\n\r\n\r\n    useEffect(() => {\r\n        return (() => {\r\n            resetDepartmentData()\r\n        })\r\n    }, [openCreateUpdateDepModal])\r\n\r\n\r\n    const resetDepartmentData = () => {\r\n        setDepData({\r\n            depName: '',\r\n            shortName: '',\r\n        })\r\n        setErrors({});\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={`offcanvas offcanvas-end creatNewTicketOff ${openCreateUpdateDepModal ? 'show' : ''}`} tabIndex={-1}\r\n                style={{ visibility: openCreateUpdateDepModal ? 'visible' : 'hidden' ,\r\n                      width: \"800px\"\r\n                }}\r\n            >\r\n                <div className=\"offcanvas-header\">\r\n                    <h5 className=\"offcanvas-title  fs-5 fw-bold text-primary\"> {selectedDepartmentData ? \"Update\" : \"Create New\"} Department</h5>\r\n                    <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"\r\n                        onClick={() => toggleDepartmentModal()}\r\n                    />\r\n                </div>\r\n                <div className=\"offcanvas-body\">\r\n                    <div className=\"formPanel\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-3\">\r\n                                <div className=\"form-group mb-3\">\r\n                                    <Label text={t(\"labels.name\")} required={true} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-9\">\r\n                                <div className=\"form-group mb-3\">\r\n                                    <Input\r\n                                        type=\"text\"\r\n                                        placeholder={t(\"placeholders.departmentName\")}\r\n                                        value={depData?.depName || ''}\r\n                                        name=\"depName\"\r\n                                        onChange={(e) => handleChange(e)}\r\n                                    />\r\n                                    {errors?.depName && (\r\n                                        <CustomError text={errors.depName} />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-3\">\r\n                                <div className=\"form-group\">\r\n                                    <Label text={t(\"labels.shortName\")} required={true} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-9\">\r\n                                <div className=\"form-group mb-3\">\r\n                                    <Input\r\n                                        type=\"text\"\r\n                                        placeholder={t(\"placeholders.shortName\")}\r\n                                        value={depData?.shortName}\r\n                                        name=\"shortName\"\r\n                                        onChange={(e) => handleChange(e)}\r\n                                    />\r\n\r\n                                    {errors?.shortName && (\r\n                                        <CustomError text={errors.shortName} />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-3\">\r\n                                <div className=\"form-group mb-3\">\r\n                                    <Label text={t(\"labels.isActive\")} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-9\">\r\n                                <div className=\"form-group mb-3\">\r\n                                    <CustCheckbox\r\n                                        key={\"is_active\"}\r\n                                        id={`is_active`}\r\n                                        // label={\"Active\"}\r\n                                        checked={isActive}\r\n                                        handleChange={(e) => setIsActive(!isActive)}\r\n                                        name={\"is_active\"}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n                <div className=\"offcanvas-footer\">\r\n                    <div className=\"d-flex align-items-center justify-content-end gap-3\">\r\n                        <CustomButton\r\n                            text={selectedDepartmentData ? t(\"btns.update\") : t(\"btns.submit\")}\r\n                            classNames={\"btn btn-org-gradient\"}\r\n                            handleClick={() => submitCreateUpdateDepartment()}\r\n                            isLoading={selectedDepartmentData ? updateDepartmentPending : addDepartmentPending}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {openCreateUpdateDepModal && <div className=\"modal-backdrop fade show\"></div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CreateUpdateDepartment\r\n","import React, { useEffect, useMemo, useState } from 'react'\r\nimport { CustomButton } from '../../globalComponents'\r\nimport moment from 'moment-timezone'\r\nimport CustomTable from '../../reuseableComponents/customTable/CustomTable'\r\nimport { getBadgeColor } from '../../../utils/common'\r\nimport { useCustomTranslation } from '../../../translation'\r\nimport { Icon } from '../../commanComponent'\r\nconst DepartmentTable = (props) => {\r\n  const { t } = useCustomTranslation()\r\n  const {\r\n    departmentList,\r\n    isLoading,\r\n    setSelectedDepartmentData,\r\n    toggleDepartmentModal,\r\n    toggleDeleteModal,\r\n    currentPage,\r\n    setCurrentPage,\r\n  } = props\r\n  const [depList, setDepList] = useState(departmentList)\r\n\r\n\r\n  const updateDepartment = (data) => {\r\n    toggleDepartmentModal(data)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setDepList(departmentList)\r\n  }, [departmentList])\r\n\r\n\r\n  const scopedSlots = useMemo(() => ({\r\n    sn: (_, index) => (\r\n      <span>{index + 1}</span>\r\n    ),\r\n    is_active: item => (\r\n      <span\r\n        className={`badge ${getBadgeColor(item.is_active ? \"Active\" : \"Inactive\")}`}\r\n      >\r\n        {item.is_active ? \"Active\" : \"Inactive\"}\r\n      </span>\r\n    ),\r\n    created_at: item => moment(item.created_at).format(\"DD-MM-YYYY\"),\r\n    action: item => (\r\n      <div className=\"btn-group actionDrp\">\r\n        <button type=\"button\" className=\"btn dropdown-toggle-split\"\r\n          data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n          <i className=\"bi bi-three-dots-vertical\"></i>\r\n        </button>\r\n        <ul className=\"dropdown-menu\">\r\n          <li>\r\n            <span className=\"dropdown-item\"\r\n              onClick={() => {\r\n                updateDepartment(item);\r\n              }}\r\n            >\r\n              <Icon className={\"bi bi-pencil-square me-1\"} />Update</span>\r\n          </li>\r\n          {item?.emp_count === 0 && <li>\r\n            <span className=\"dropdown-item\"\r\n              onClick={() => toggleDeleteModal(item._id)}\r\n            >\r\n              <Icon className={\"bi bi-trash me-1\"} />Delete</span>\r\n          </li>}\r\n        </ul>\r\n      </div>\r\n\r\n    )\r\n  }), [setSelectedDepartmentData, toggleDepartmentModal, toggleDeleteModal]);\r\n\r\n\r\n  const fields = [\r\n    { key: 'sn', label: 'S.N' },\r\n    { key: 'name', label: 'Name' },\r\n    { key: 'short_name', label: 'Short Name' },\r\n    { key: 'emp_count', label: 'Total Employees' },\r\n    { key: 'is_active', label: 'Status' },\r\n    { key: 'created_at', label: 'Created At' },\r\n    { key: 'action', label: 'Action' }\r\n  ];\r\n  return (\r\n    <>\r\n      <CustomTable\r\n        data={depList?.data}\r\n        fields={fields}\r\n        isLoading={isLoading}\r\n        pagination={true}\r\n        currentPage={currentPage}\r\n        setCurrentPage={setCurrentPage}\r\n        totalPages={depList?.totalPages}\r\n        tableName={\"Department\"}\r\n        // onSearch={handleSearch}\r\n        scopedSlots={scopedSlots}\r\n      />\r\n\r\n\r\n    </>\r\n\r\n  )\r\n}\r\n\r\nexport default DepartmentTable\r\n","import React, { useEffect, useMemo, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { departmentAction } from '../../../core/resource/actions'\r\nimport CreateUpdateDepartment from './CreateUpdateDepartment'\r\nimport { pagination } from '../../../utils/Constants.config'\r\nimport { CustomButton } from '../../globalComponents'\r\nimport ApproveRejectModal from '../../modal/ApproveRejectModal'\r\nimport DepartmentTable from \"./DepartmentTable\"\r\nimport { useCustomTranslation } from '../../../translation'\r\n\r\nconst Department = () => {\r\n  const { t } = useCustomTranslation()\r\n  const dispatch = useDispatch();\r\n  const {\r\n    getAllDepartmentRes,\r\n    getAllDepartmentError,\r\n    getAllDepartmentPending,\r\n\r\n    deleteDepartmentPending,\r\n    deleteDepartmentRes,\r\n    deleteDepartmentError,\r\n\r\n    addDepartmentPending,\r\n    addDepartmentRes,\r\n    addDepartmentError,\r\n\r\n    updateDepartmentPending,\r\n    updateDepartmentRes,\r\n    updateDepartmentError\r\n  } = useSelector(state => state.department);\r\n\r\n  const [departmentList, setDepartmentList] = useState('')\r\n  const [selectedDepartmentData, setSelectedDepartmentData] = useState('')\r\n  const [openCreateUpdateDepModal, setOpenCreateUpdateDepModal] = useState(false);\r\n  const [deleteDepId, setDeleteDepId] = useState()\r\n  const [isShowDeleteModal, setIsShowDeleteModal] = useState(false)\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n\r\n\r\n  /* Create Update Department */\r\n  const toggleDepartmentModal = (data) => {\r\n    if (!data) {\r\n      setSelectedDepartmentData('')\r\n    } else {\r\n      setSelectedDepartmentData(data)\r\n    }\r\n    setOpenCreateUpdateDepModal(!openCreateUpdateDepModal)\r\n  }\r\n\r\n  const handleCreateUpdateDepartment = (params) => {\r\n    if (selectedDepartmentData) {\r\n      params['_id'] = selectedDepartmentData?._id\r\n      dispatch(departmentAction.updateDepartmentRequest(params));\r\n    }\r\n    else {\r\n      dispatch(departmentAction.addDepartmentRequest(params));\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!addDepartmentPending) {\r\n      if (addDepartmentError) {\r\n        dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_ADD_DEPARTMENT_STORE'))\r\n        return;\r\n      }\r\n      if (addDepartmentRes) {\r\n        if (addDepartmentRes?.code == 200) {\r\n          dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_ADD_DEPARTMENT_STORE'))\r\n          dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE'))\r\n          toggleDepartmentModal()\r\n          getAllDepartments();\r\n\r\n        }\r\n      }\r\n    }\r\n  }, [\r\n    addDepartmentPending,\r\n    addDepartmentRes,\r\n    addDepartmentError,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!updateDepartmentPending) {\r\n      if (updateDepartmentError) {\r\n        dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_UPDATE_DEPARTMENT_STORE'))\r\n        return;\r\n      }\r\n      if (updateDepartmentRes) {\r\n        if (updateDepartmentRes?.code == 200) {\r\n          dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_UPDATE_DEPARTMENT_STORE'))\r\n          dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE'))\r\n          getAllDepartments();\r\n          toggleDepartmentModal();\r\n        }\r\n      }\r\n    }\r\n  }, [\r\n    updateDepartmentPending,\r\n    updateDepartmentRes,\r\n    updateDepartmentError\r\n  ]);\r\n\r\n  /* Get All Departments */\r\n  useEffect(() => {\r\n    getAllDepartments()\r\n  }, [currentPage])\r\n\r\n  const getAllDepartments = () => {\r\n    const params = {\r\n      page: currentPage,\r\n      limit: pagination.limit,\r\n    }\r\n    dispatch(departmentAction.getAllDepartmentRequest(params));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!getAllDepartmentPending) {\r\n      if (getAllDepartmentError) {\r\n        return;\r\n      }\r\n      if (getAllDepartmentRes) {\r\n        if (getAllDepartmentRes?.code === 200) {\r\n          setDepartmentList(getAllDepartmentRes?.data)\r\n        }\r\n      }\r\n    }\r\n  }, [\r\n    getAllDepartmentRes,\r\n    getAllDepartmentError,\r\n    getAllDepartmentPending\r\n  ]);\r\n\r\n  /* Delete Department */\r\n  const onDeleteCancelDepartment = (type) => {\r\n    if (type) {\r\n      const params = {\r\n        _id: deleteDepId\r\n      }\r\n      dispatch(departmentAction?.deleteDepartmentRequest(params))\r\n\r\n    } else {\r\n      toggleDeleteModal()\r\n    }\r\n  }\r\n  const toggleDeleteModal = (id) => {\r\n    if (id) {\r\n      setDeleteDepId(id)\r\n    }\r\n    setIsShowDeleteModal(!isShowDeleteModal)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!deleteDepartmentPending) {\r\n      if (deleteDepartmentError) {\r\n        dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_DELETE_DEPARTMENT_STORE'))\r\n        return;\r\n      }\r\n      if (deleteDepartmentRes) {\r\n        if (deleteDepartmentRes?.code == 200) {\r\n          dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_DELETE_DEPARTMENT_STORE'))\r\n          dispatch(departmentAction.handleClearDepartmentStore('HANDLE_CLEAR_GET_DEPARTMENT_LIST_STORE'))\r\n          toggleDeleteModal()\r\n          if (currentPage > 1 && departmentList?.data?.length === 1) {\r\n            setCurrentPage((pre => pre -= 1))\r\n          } else {\r\n            getAllDepartments()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [\r\n    deleteDepartmentRes,\r\n    deleteDepartmentError,\r\n    deleteDepartmentPending\r\n  ]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex  justify-content-end \">\r\n        <CustomButton\r\n          classNames={\"btn btn-primary gradientBg\"}\r\n          handleClick={() => toggleDepartmentModal()}\r\n          text={t(\"btns.createDepartment\")}\r\n        />\r\n\r\n      </div>\r\n      <DepartmentTable\r\n        isLoading={getAllDepartmentPending}\r\n        toggleDepartmentModal={toggleDepartmentModal}\r\n        setSelectedDepartmentData={setSelectedDepartmentData}\r\n        toggleDeleteModal={toggleDeleteModal}\r\n        currentPage={currentPage}\r\n        setCurrentPage={setCurrentPage}\r\n        departmentList={departmentList}\r\n      />\r\n\r\n      <CreateUpdateDepartment\r\n        getAllDepartments={getAllDepartments}\r\n        openCreateUpdateDepModal={openCreateUpdateDepModal}\r\n        toggleDepartmentModal={toggleDepartmentModal}\r\n        selectedDepartmentData={selectedDepartmentData}\r\n        handleCreateUpdateDepartment={handleCreateUpdateDepartment}\r\n      />\r\n\r\n      {isShowDeleteModal && (\r\n        <ApproveRejectModal\r\n          onApproveReject={onDeleteCancelDepartment}\r\n          isShow={isShowDeleteModal}\r\n          desc={t(\"alerts.deletePopup.desc\").replace('$1',\"Department\")}\r\n          btnRightLoading={deleteDepartmentPending}\r\n          btnTextRight={t(\"btns.delete\")}\r\n          btnTextLeft={t(\"btns.cancel\")}\r\n        />)\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Department\r\n"],"names":["props","t","useCustomTranslation","openCreateUpdateDepModal","toggleDepartmentModal","selectedDepartmentData","handleCreateUpdateDepartment","errors","setErrors","useState","addDepartmentPending","updateDepartmentPending","useSelector","state","department","isActive","setIsActive","depData","setDepData","depName","shortName","handleChange","event","name","value","target","useEffect","short_name","is_active","resetDepartmentData","_jsxs","_Fragment","children","className","tabIndex","style","visibility","width","_jsx","type","onClick","Label","text","required","Input","placeholder","onChange","e","CustomError","CustCheckbox","id","checked","CustomButton","classNames","handleClick","async","validationResponse","validateSchema","addDepartmentSchema","isValid","params","submitCreateUpdateDepartment","isLoading","departmentList","setSelectedDepartmentData","toggleDeleteModal","currentPage","setCurrentPage","depList","setDepList","scopedSlots","useMemo","sn","_","index","item","getBadgeColor","created_at","moment","format","action","Icon","emp_count","_id","CustomTable","data","fields","key","label","pagination","totalPages","tableName","Department","dispatch","useDispatch","getAllDepartmentRes","getAllDepartmentError","getAllDepartmentPending","deleteDepartmentPending","deleteDepartmentRes","deleteDepartmentError","addDepartmentRes","addDepartmentError","updateDepartmentRes","updateDepartmentError","setDepartmentList","setOpenCreateUpdateDepModal","deleteDepId","setDeleteDepId","isShowDeleteModal","setIsShowDeleteModal","departmentAction","handleClearDepartmentStore","code","getAllDepartments","page","limit","getAllDepartmentRequest","_departmentList$data","length","pre","DepartmentTable","CreateUpdateDepartment","updateDepartmentRequest","addDepartmentRequest","ApproveRejectModal","onApproveReject","deleteDepartmentRequest","isShow","desc","replace","btnRightLoading","btnTextRight","btnTextLeft"],"sourceRoot":""}