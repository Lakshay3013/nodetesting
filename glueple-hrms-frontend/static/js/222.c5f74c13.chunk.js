"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[222],{90222:(e,a,l)=>{l.r(a),l.d(a,{default:()=>x});var s=l(65043),t=l(22166),o=l(35685),d=l(90607),i=l(29829),n=l(85831),r=l(94174),c=l(52027),v=l(50586),m=l(49985),u=l(26181),N=l(80728),h=l(70579);const R=e=>{const{t:a}=(0,d.K)(),{openCreateUpdateRoleModal:l,toggleRoleModal:o,selectedRoleData:i,handleCreateUpdateRole:r}=e,[c,R]=(0,s.useState)({}),{addRolePending:x,updateRolePending:p}=(0,t.d4)((e=>e.roles)),[_,f]=(0,s.useState)(!0),[E,g]=(0,s.useState)({roleName:"",shortName:"",isActive:!0}),j=(e,a)=>{var l;const s=a||(null===(l=e.target)||void 0===l?void 0:l.name),{value:t,type:o,checked:d}=e.target?e.target:{value:e};g((e=>{const a={...e,[s]:"checkbox"===o?d:t};return"roleName"===s&&(a.shortName=(0,m.aF)(t)),a})),R((e=>({...e,[s]:void 0})))};(0,s.useEffect)((()=>{i&&g({roleName:(null===i||void 0===i?void 0:i.name)||"",shortName:(null===i||void 0===i?void 0:i.short_name)||"",isActive:null===i||void 0===i?void 0:i.is_active})}),[i]),(0,s.useEffect)((()=>()=>{b()}),[l]);const b=()=>{g({roleName:"",shortName:""}),R({})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden",width:"800px"},children:[(0,h.jsxs)("div",{className:"offcanvas-header",children:[(0,h.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[" ",i?"Update":"Create New"," Role"]}),(0,h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>o()})]}),(0,h.jsx)("div",{className:"offcanvas-body",children:(0,h.jsxs)("div",{className:"formPanel",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(v.JU,{text:a("labels.name"),required:!0})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(v.pd,{type:"text",placeholder:a("placeholders.roleName"),value:(null===E||void 0===E?void 0:E.roleName)||"",name:"roleName",onChange:e=>j(e)}),(null===c||void 0===c?void 0:c.roleName)&&(0,h.jsx)(n.eo,{text:c.roleName})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group",children:(0,h.jsx)(v.JU,{text:a("labels.shortName"),required:!0})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(v.pd,{type:"text",placeholder:a("placeholders.shortName"),value:null===E||void 0===E?void 0:E.shortName,name:"shortName",onChange:e=>j(e)}),(null===c||void 0===c?void 0:c.shortName)&&(0,h.jsx)(n.eo,{text:c.shortName})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(v.JU,{text:a("labels.isActive")})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(v.P_,{id:"is_active",checked:null===E||void 0===E?void 0:E.isActive,handleChange:e=>j(e),name:"isActive"},"is_active")})})]})]})}),(0,h.jsx)("div",{className:"offcanvas-footer",children:(0,h.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,h.jsx)(n.Sv,{text:a(i?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,u.i6)(N.av,E);if(e.isValid){R({});const e={name:(null===E||void 0===E?void 0:E.roleName)||"",short_name:(null===E||void 0===E?void 0:E.shortName)||"",is_active:null===E||void 0===E?void 0:E.isActive};r(e)}else R(e.errors)})(),isLoading:i?p:x})})})]}),l&&(0,h.jsx)("div",{className:"modal-backdrop fade show"})]})},x=()=>{const{t:e}=(0,d.K)(),a=(0,t.wA)(),{getAllRolesDataRes:l,getAllRolesDataError:u,getAllRolesDataPending:N,deleteRolePending:x,deleteRoleRes:p,deleteRoleError:_,addRolePending:f,addRoleRes:E,addRoleError:g,updateRolePending:j,updateRoleRes:b,updateRoleError:A}=(0,t.d4)((e=>e.roles)),[S,C]=(0,s.useState)(""),[L,D]=(0,s.useState)(""),[T,k]=(0,s.useState)(!1),[w,y]=(0,s.useState)(),[O,P]=(0,s.useState)(!1),[U,H]=(0,s.useState)(1),I=(0,m.Yo)("update_role"),q=(0,m.Yo)("delete_role"),M=e=>{D(e||""),k(!T)};(0,s.useEffect)((()=>{if(!f){if(g)return void a(r.N8.handleClearRolesStore("HANDLE_CLEAR_ADD_ROLE_STORE"));E&&200==(null===E||void 0===E?void 0:E.code)&&(a(r.N8.handleClearRolesStore("HANDLE_CLEAR_ADD_ROLE_STORE")),a(r.N8.handleClearRolesStore("HANDLE_CLEAR_GET_ROLE_LIST_STORE")),M(),G())}}),[f,E,g]),(0,s.useEffect)((()=>{if(!j){if(A)return void a(r.N8.handleClearRolesStore("HANDLE_CLEAR_UPDATE_ROLE_STORE"));b&&200==(null===b||void 0===b?void 0:b.code)&&(a(r.N8.handleClearRolesStore("HANDLE_CLEAR_UPDATE_ROLE_STORE")),a(r.N8.handleClearRolesStore("HANDLE_CLEAR_GET_ROLE_LIST_STORE")),G(),M())}}),[j,b,A]),(0,s.useEffect)((()=>{G()}),[U]);const G=()=>{const e={page:U,limit:c.X$.limit};a(r.N8.getAllRolesDataRequest(e))};(0,s.useEffect)((()=>{if(!N){if(u)return;l&&200===(null===l||void 0===l?void 0:l.code)&&C(null===l||void 0===l?void 0:l.data)}}),[l,u,N]);const J=e=>{e&&y(e),P(!O)};(0,s.useEffect)((()=>{if(!x){if(_)return void a(r.N8.handleClearRolesStore("HANDLE_CLEAR_DELETE_ROLE_STORE"));var e;if(p)if(200==(null===p||void 0===p?void 0:p.code))a(r.N8.handleClearRolesStore("HANDLE_CLEAR_DELETE_ROLE_STORE")),a(r.N8.handleClearRolesStore("HANDLE_CLEAR_GET_ROLE_LIST_STORE")),J(),U>1&&1===(null===S||void 0===S||null===(e=S.data)||void 0===e?void 0:e.length)?H((e=>e-1)):G()}}),[p,_,x]);const $=(0,s.useMemo)((()=>({sn:(e,a)=>(0,h.jsx)("span",{children:a+1}),is_active:e=>(0,h.jsx)("span",{className:`badge ${(0,m.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>(0,m.N_)(e.created_at),action:e=>(0,h.jsxs)("div",{className:"btn-group actionDrp",children:[(0,h.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,h.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,h.jsxs)("ul",{className:"dropdown-menu",children:[I&&(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>{M(e)},children:[(0,h.jsx)(v.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),q&&(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>J(e._id),children:[(0,h.jsx)(v.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[D,M,J]),F=[{key:"sn",label:"S.N"},{key:"name",label:"Name"},{key:"short_name",label:"Short Name"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},(q||I)&&{key:"action",label:"Action"}];return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"d-flex  justify-content-end ",children:(0,h.jsx)(n.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>M(),text:e("btns.createRole"),slug:"create_role"})}),(0,h.jsx)(i.Ak,{data:null===S||void 0===S?void 0:S.data,fields:F,isLoading:N,pagination:!0,currentPage:U,setCurrentPage:H,totalPages:null===S||void 0===S?void 0:S.totalPages,tableName:"Role",scopedSlots:$}),T&&(0,h.jsx)(R,{getAllRoles:G,openCreateUpdateRoleModal:T,toggleRoleModal:M,selectedRoleData:L,handleCreateUpdateRole:e=>{L?(e._id=null===L||void 0===L?void 0:L._id,a(r.N8.updateRoleRequest(e))):a(r.N8.addRoleRequest(e))}}),O&&(0,h.jsx)(o.A,{onApproveReject:e=>{if(e){const e={_id:w};a(null===r.N8||void 0===r.N8?void 0:r.N8.deleteRoleRequest(e))}else J()},isShow:O,desc:e("alerts.deletePopup.desc").replace("$1","Role"),btnRightLoading:x,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")})]})}}}]);
//# sourceMappingURL=222.c5f74c13.chunk.js.map