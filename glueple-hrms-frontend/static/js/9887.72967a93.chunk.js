"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[9887],{96816:(e,s,a)=>{a.d(s,{A:()=>i});a(65043);var l=a(70579);const i=()=>(0,l.jsx)("div",{children:(0,l.jsxs)("svg",{version:"1.1",id:"Layer_1",x:0,y:0,viewBox:"0 0 512 512",xmlSpace:"preserve",className:"icon icon-xlg me-2",style:{height:"23px",width:"23px",cursor:"pointer"},children:[(0,l.jsx)("circle",{id:"Oval-3",opacity:".1",fill:"#2B76D2",cx:256,cy:256,r:256}),(0,l.jsx)("path",{fill:"#2B76D2",d:"M277.3 362.7c-5.3 0-10.6-2-14.7-5.9l-85.3-81.5c-4.1-3.9-6.5-9.3-6.6-15-.1-5.7 2-11.1 5.9-15.2l85.3-89.1c8.1-8.5 21.7-8.8 30.2-.7 8.5 8.1 8.8 21.6.7 30.2l-70.6 73.7 69.9 66.8c8.5 8.1 8.8 21.6.7 30.1-4.2 4.4-9.8 6.6-15.5 6.6z"})]})})},69887:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var l=a(65043),i=a(22166),d=a(29829),t=a(45531),n=a(94174),o=a(92250),r=a(35475),c=a(96816),u=a(49985),v=a(25515),m=a(35685),p=a(90607),h=a(70579);const g=()=>{const{t:e}=(0,p.K)(),s=(0,i.wA)(),{getEmployeeByKraPending:a,getEmployeeByKraRes:g,getEmployeeByKraError:x,assignKraPending:A,assignKraRes:_,assignKraError:j,updateAssignKraPending:S,updateAssignKraRes:b,updateAssignKraError:E,getAllKraDetailsDataPending:N,getAllKraDetailsDataRes:K,getAllKraDetailsDataError:f,deleteAssignKraPending:y,deleteAssignKraRes:R,deleteAssignKraError:D,selectedKraDetailData:k}=(0,i.d4)((e=>e.pms)),{employeeDetailsData:C}=(0,i.d4)((e=>e.employee)),[L,P]=(0,l.useState)(""),[w,T]=(0,l.useState)([]),[B,M]=(0,l.useState)(!1),[O,I]=(0,l.useState)(""),[q,G]=(0,l.useState)(""),[H,$]=(0,l.useState)("");(0,l.useEffect)((()=>{U(),Q()}),[]);const U=()=>{const e={reported_to:null===C||void 0===C?void 0:C.id};s(n.u7.getEmployeeByKraRequest(e))};(0,l.useEffect)((()=>{if(!a){if(x)return;if(g&&200===(null===g||void 0===g?void 0:g.code)){const e=null===g||void 0===g?void 0:g.data;T(e)}}}),[g,x,a]);const z=(0,l.useMemo)((()=>({sn:(e,s)=>(0,h.jsx)("span",{className:"srNum",children:s+1}),account_status:e=>(0,h.jsx)("span",{className:`${(0,u.OG)(null===e||void 0===e?void 0:e.account_status)} text-capitalize`,children:null===e||void 0===e?void 0:e.account_status}),kra_name:e=>(0,h.jsx)("span",{className:"text-success",children:null!==(null===e||void 0===e?void 0:e.kra_name)?` ${null===e||void 0===e?void 0:e.kra_name}`:"-"}),select:(e,s)=>(0,h.jsx)("span",{children:(0,h.jsx)(t.P_,{id:`select_${s}`,checked:!(null===e||void 0===e||!e.kra_name)||L.includes(e),handleChange:s=>((e,s)=>{P((a=>e.target.checked?[...a,s]:a.filter((e=>e!==s))))})(s,e),name:`select_${s}`,isDisable:null===e||void 0===e?void 0:e.kra_name},`select_${s}`)}),action:e=>(0,h.jsx)(h.Fragment,{children:(null===e||void 0===e?void 0:e.kra_name)&&(0,h.jsxs)("div",{className:"btn-group actionDrp",children:[(0,h.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,h.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,h.jsxs)("ul",{className:"dropdown-menu",children:[(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>V(e),children:[(0,h.jsx)(t.In,{className:"bi bi-pencil-square"})," Edit"]})}),(0,h.jsx)("li",{children:(0,h.jsxs)("span",{className:"dropdown-item",onClick:()=>W(e),children:[(0,h.jsx)(t.In,{className:"bi bi-trash"})," Delete"]})})]})]})})})),[w,L]),F=e=>{const s=[];return null===e||void 0===e||e.map((e=>{s.push(null===e||void 0===e?void 0:e._id)})),s},J=e=>{O?(e.employee_id=null===O||void 0===O?void 0:O._id,e._id=null===O||void 0===O?void 0:O.assign_id,s(n.u7.updateAssignKraRequest(e))):s(n.u7.assignKraRequest(e))};(0,l.useEffect)((()=>{if(!A){if(j)return void s(n.u7.handleClearPMSStore("HANDLE_CLEAR_ASSIGN_KRA_STORE"));_&&200===(null===_||void 0===_?void 0:_.code)&&(s(n.u7.handleClearPMSStore("HANDLE_CLEAR_ASSIGN_KRA_STORE")),P(""),U())}}),[A,_,j]),(0,l.useEffect)((()=>{if(!S){if(E)return void s(n.u7.handleClearPMSStore("HANDLE_CLEAR_UPDATE_ASSIGN_KRA_STORE"));b&&200===(null===b||void 0===b?void 0:b.code)&&(s(n.u7.handleClearPMSStore("HANDLE_CLEAR_UPDATE_ASSIGN_KRA_STORE")),U(),I(""),V())}}),[S,b,E]);const V=e=>{e&&I(e),M(!B)},Q=e=>{s(n.u7.getAllKraDetailsDataRequest(e))};(0,l.useEffect)((()=>{if(!N){if(f)return;K&&200===(null===K||void 0===K?void 0:K.code)&&G(null===K||void 0===K?void 0:K.data)}}),[N,K,f]);const W=e=>{I(e||""),$(!H)};return(0,l.useEffect)((()=>{if(!y){if(D)return void s(n.u7.handleClearPMSStore("HANDLE_CLEAR_DELETE_ASSIGN_KRA_STORE"));R&&200===(null===R||void 0===R?void 0:R.code)&&(s(n.u7.handleClearPMSStore("HANDLE_CLEAR_DELETE_ASSIGN_KRA_STORE")),W(),U())}}),[y,R,D]),(0,h.jsxs)("div",{className:"cardBox",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)(r.N_,{to:"/create-kra",children:(0,h.jsx)(c.A,{})}),(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("h5",{children:" Assign KRA"})})]}),(0,h.jsx)("div",{className:"table-responsive tableDiv",style:{height:"500px"},children:(0,h.jsx)(d.Ak,{data:w||[],fields:[{key:"sn",label:"S.N"},{key:"select",label:"Select"},{key:"emp_id",label:"Emp Code"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"account_status",label:"Account Status"},{key:"kra_name",label:"Assigned KRA"},{key:"action",label:"Action"}],isLoading:a,pagination:!0,totalPages:null===w||void 0===w?void 0:w.totalPages,isHeader:!1,tableStyle:{padding:"0px",boxShadow:"none"},scopedSlots:z})}),L&&(null===L||void 0===L?void 0:L.length)>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("hr",{}),(0,h.jsx)("div",{className:" mb-4",children:(0,h.jsx)(o.Sv,{text:`Assign (${null===L||void 0===L?void 0:L.length})`,classNames:"btn btn-primary gradientBg",handleClick:()=>(()=>{const e=F(L),s={kra_id:null===k||void 0===k?void 0:k._id,employee_ids:e};J(s)})()})})]}),B&&(0,h.jsx)(v.A,{openModel:B,handleOpenClose:V,selectedEmployee:O,allKraDetailsData:q,handleAssignKra:J}),H&&(0,h.jsx)(m.A,{onApproveReject:e=>{if(e){const e={_id:null===O||void 0===O?void 0:O.assign_id};s(null===n.u7||void 0===n.u7?void 0:n.u7.deleteAssignKraRequest(e))}else W()},isShow:H,desc:e("alerts.deletePopup.desc").replace("$1","Assign KRA"),btnRightLoading:y,btnTextRight:e("btns.delete"),btnTextLeft:e("btns.cancel")})]})}},25515:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(65043),i=a(45531),d=a(56462),t=a(90607),n=a(92250),o=a(70579);const r=e=>{const{t:s}=(0,t.K)(),{openModel:a,handleOpenClose:r,allKraDetailsData:c,handleAssignKra:u}=e,[v,m]=(0,l.useState)(null);return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"modal fade attendanceViewodal",id:"assignKra",style:{display:a?"unset !important":"none !important",opacity:a?"unset":"0"},children:(0,o.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,o.jsxs)("div",{className:"modal-content rounded-0 border-0",children:[(0,o.jsxs)("div",{className:"modal-header border-0",children:[(0,o.jsx)("h1",{className:"modal-title fs-5 fw-bold text-primary",children:"Assign KRA"}),(0,o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>r()})]}),(0,o.jsxs)("div",{className:"modal-body ",children:[(0,o.jsxs)("div",{className:"approveSlct mb-3",children:[(0,o.jsx)(i.JU,{text:"Assign To",required:!0}),(0,o.jsx)(d.A,{data:c||[],placeholder:"Select KRA",value:v,handleChange:e=>m(e),name:"id"})]}),(0,o.jsx)("div",{className:"py-2",children:(0,o.jsx)(n.Sv,{classNames:"btn btn-primary gradientBg mt-2",text:"Assign KRA",handleClick:()=>(()=>{let e={kra_id:null===v||void 0===v?void 0:v.value};u(e)})()})})]})]})})}),a&&(0,o.jsx)("div",{className:"modal-backdrop fade show"})]})}}}]);
//# sourceMappingURL=9887.72967a93.chunk.js.map