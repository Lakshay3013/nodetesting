"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[8960],{96816:(e,i,a)=>{a.d(i,{A:()=>n});a(65043);var l=a(70579);const n=()=>(0,l.jsx)("div",{children:(0,l.jsxs)("svg",{version:"1.1",id:"Layer_1",x:0,y:0,viewBox:"0 0 512 512",xmlSpace:"preserve",className:"icon icon-xlg me-2",style:{height:"23px",width:"23px",cursor:"pointer"},children:[(0,l.jsx)("circle",{id:"Oval-3",opacity:".1",fill:"#2B76D2",cx:256,cy:256,r:256}),(0,l.jsx)("path",{fill:"#2B76D2",d:"M277.3 362.7c-5.3 0-10.6-2-14.7-5.9l-85.3-81.5c-4.1-3.9-6.5-9.3-6.6-15-.1-5.7 2-11.1 5.9-15.2l85.3-89.1c8.1-8.5 21.7-8.8 30.2-.7 8.5 8.1 8.8 21.6.7 30.2l-70.6 73.7 69.9 66.8c8.5 8.1 8.8 21.6.7 30.1-4.2 4.4-9.8 6.6-15.5 6.6z"})]})})},98960:(e,i,a)=>{a.r(i),a.d(i,{default:()=>_});var l=a(65043),n=a(90607),d=a(85831),s=a(96816),r=a(73216),t=a(35475),o=a(22166),c=a(94174),v=a(50586),u=a(94140),m=a(56462),h=(a(86178),a(49985)),g=a(70579);const _=e=>{const i=(0,o.wA)(),a=(0,r.Zp)(),{getKraDetailsByEmployeePending:_,getKraDetailsByEmployeeRes:x,getKraDetailsByEmployeeError:p,giveRatingPending:j,giveRatingRes:f,giveRatingError:k,getGivenRatingPending:b,getGivenRatingRes:N,getGivenRatingError:y}=(0,o.d4)((e=>e.pms)),{getFinancialYearWiseMonthPending:R,getFinancialYearWiseMonthRes:E,getFinancialYearWiseMonthError:w}=(0,o.d4)((e=>e.financialYear)),{t:S}=(0,n.K)(),{selectedEmployeeData:C}=(0,o.d4)((e=>e.employee)),[A,D]=(0,l.useState)(""),[F,P]=(0,l.useState)(""),[G,I]=(0,l.useState)(""),[K,L]=(0,l.useState)(null);(0,l.useEffect)((()=>{C&&(M(C),B({financial_id:null===C||void 0===C?void 0:C.financial_id}))}),[C]),(0,l.useEffect)((()=>{C&&K&&(W(),P(""))}),[C,K]);const M=e=>{null===e||void 0===e||e._id,null===e||void 0===e||e.financial_id,null===e||void 0===e||e.kra_id},B=e=>{i(c.Cm.getFinancialYearWiseMonthRequest(e))};(0,l.useEffect)((()=>{if(!R){if(w)return;if(E&&200===(null===E||void 0===E?void 0:E.code)){let e=(0,h.TX)(null===E||void 0===E?void 0:E.data);L(e),I(null===E||void 0===E?void 0:E.data)}}}),[E,w,R]);const T=(e,i,a,l)=>{var n,d;const s=l||(null===(n=e.target)||void 0===n?void 0:n.name),r=null===(d=e.target)||void 0===d?void 0:d.value;D((e=>{const l=[...e],n={...l[i]},d=[...n.kra_sub_parameter_details],t={...d[a],[s]:r};return d[a]=t,n.kra_sub_parameter_details=d,l[i]=n,l}))},Y=()=>{let e=[],i={kra_id:null===C||void 0===C?void 0:C.kra_id,kra_rating_type:null===C||void 0===C?void 0:C.kra_rating_type};return null===A||void 0===A||A.map(((a,l)=>{var n;i.parameter_id=null===a||void 0===a?void 0:a._id,null===a||void 0===a||null===(n=a.kra_sub_parameter_details)||void 0===n||n.map((a=>{i={...i,parameter_id:(null===a||void 0===a?void 0:a.parameter_id)||"",sub_parameter_id:(null===a||void 0===a?void 0:a._id)||"",rating_remark:(null===a||void 0===a?void 0:a.rating_remark)||"",key_performance_indicator:(null===a||void 0===a?void 0:a.key_performance_indicator)||"",kpi_weightage:(null===a||void 0===a?void 0:a.kpi_weightage)||"",measurement_criteria:(null===a||void 0===a?void 0:a.measurement_criteria)||""},null===e||void 0===e||e.push(i)}))})),e};(0,l.useEffect)((()=>{if(!j){if(k)return void i(c.u7.handleClearPMSStore("HANDLE_CLEAR_GIVE_RATING_STORE"));f&&200===(null===f||void 0===f?void 0:f.code)&&(i(c.u7.handleClearPMSStore("HANDLE_CLEAR_GIVE_RATING_STORE")),L(null),a("/my-team"))}}),[f,k,j]);const W=()=>{const e={financial_id:null===C||void 0===C?void 0:C.financial_id,employee_id:null===C||void 0===C?void 0:C._id,rating_month:null===K||void 0===K?void 0:K.value};i(c.u7.getGivenRatingRequest(e))};return(0,l.useEffect)((()=>{if(!b){if(y)return;var e,i,a,l;if(N)if(200===(null===N||void 0===N?void 0:N.code))D(null===N||void 0===N?void 0:N.data),P(null===N||void 0===N||null===(e=N.data)||void 0===e||null===(i=e[0])||void 0===i||null===(a=i.kra_sub_parameter_details)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.feedback)}}),[N,y,b]),(0,g.jsxs)("div",{className:"cardBox",children:[(0,g.jsxs)("div",{className:"d-flex mb-3",children:[(0,g.jsx)("div",{children:(0,g.jsx)(t.N_,{to:"/my-team",children:(0,g.jsx)(s.A,{})})}),(0,g.jsx)("div",{children:(0,g.jsx)("h5",{children:"Give Rating"})})]}),(0,g.jsxs)("div",{className:"row typerating mb-3",children:[(0,g.jsx)("div",{className:"col-md-3",children:(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("span",{children:["Emp ID ",(0,g.jsx)("strong",{children:null===C||void 0===C?void 0:C.emp_id})]})})}),(0,g.jsx)("div",{className:"col-md-3",children:(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("span",{children:["Name ",(0,g.jsx)("strong",{children:null===C||void 0===C?void 0:C.name})]})})}),(0,g.jsx)("div",{className:"col-md-3",children:(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("span",{children:["Email ",(0,g.jsx)("strong",{children:null===C||void 0===C?void 0:C.email})]})})}),(0,g.jsx)("div",{className:"col-md-3",children:(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("span",{children:["KRA Name ",(0,g.jsx)("strong",{children:null===C||void 0===C?void 0:C.kra_name})]})})})]}),(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,g.jsx)("span",{className:"fw-bold",children:"KPI List"}),(0,g.jsx)("div",{className:" w-25",children:(0,g.jsx)(m.A,{data:G,placeholder:"Select Month",value:K||"",handleChange:e=>L(e),name:"financialYear"})})]}),(0,g.jsx)("div",{className:"kpiList",children:b?(0,g.jsxs)("span",{children:[(0,g.jsx)(d.L,{isShow:b,size:"xl"})," "]}):(0,g.jsxs)(g.Fragment,{children:[(null===A||void 0===A?void 0:A.length)>0?null===A||void 0===A?void 0:A.map(((e,i)=>{var a;return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"updation d-flex justify-content-between",children:[" ",(0,g.jsx)("span",{children:null===e||void 0===e?void 0:e.parameter_name})," ",(0,g.jsxs)("span",{children:[null===e||void 0===e?void 0:e.parameter_weightage,"%"]})]}),(0,g.jsx)("ul",{className:"SubcatagoryUl",children:null===e||void 0===e||null===(a=e.kra_sub_parameter_details)||void 0===a?void 0:a.map(((e,a)=>(0,g.jsx)("li",{children:(0,g.jsxs)("div",{children:[(0,g.jsx)("strong",{children:"Sub Category"}),(0,g.jsx)("p",{children:null===e||void 0===e?void 0:e.measurement_criteria}),(0,g.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,g.jsxs)("span",{children:["KPI Description ",(0,g.jsx)("b",{children:null===e||void 0===e?void 0:e.key_performance_indicator})]}),(0,g.jsxs)("span",{className:"d-flex gap-4",children:[(0,g.jsxs)("span",{children:["Weightage ",(0,g.jsx)("b",{children:null===e||void 0===e?void 0:e.kpi_weightage})]}),"target_achivement"===(null===C||void 0===C?void 0:C.kra_rating_type)&&(0,g.jsxs)("span",{children:["KPI Target ",(0,g.jsx)("b",{children:null===e||void 0===e?void 0:e.kpi_target})]})]})]}),"target_achivement"===(null===C||void 0===C?void 0:C.kra_rating_type)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:" mb-2",children:"Achivement (Remark)"}),(0,g.jsx)("div",{className:"col-3",children:(0,g.jsx)(v.pd,{type:"number",placeholder:"Enter hare...",value:e.rating_remark,name:"rating_remark",onChange:e=>T(e,i,a)})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:" mb-2",children:"Select Rating(Remark)"}),(0,g.jsx)("ul",{className:"typeCheckList",children:[1,2,3,4,5].map((l=>{const n=`rating-${i}-${a}-${l}`;return(0,g.jsx)("li",{children:(0,g.jsxs)("div",{className:"typeCheck",children:[(0,g.jsx)("input",{type:"radio",id:n,name:`rating_remark_${i}_${a}`,className:"d-none",value:l,checked:e.rating_remark==l,onChange:e=>T(e,i,a,"rating_remark")}),(0,g.jsxs)("label",{htmlFor:n,children:[l," ",(0,g.jsx)("i",{className:"bi bi-check-lg"})]})]})},l)}))})]})]})},a)))})]},i)})):!b&&(0,g.jsx)("span",{className:"d-flex justify-content-center",children:(0,g.jsx)(u.A,{text:"KPI Data Not Found!"})}),(0,g.jsxs)("div",{className:"form-group mb-3",children:[(0,g.jsxs)("label",{htmlFor:"",className:"text-primary fw-semibold mb-2",children:["Feedback"," "]}),(0,g.jsx)(v.TM,{placeholder:"Enter Feedback",onChange:e=>P(e.target.value),name:"reason",value:F})]})]})}),(0,g.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,g.jsx)(d.Sv,{text:S("btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(()=>{const e=Y(),a={employee_id:(null===C||void 0===C?void 0:C._id)||"",financial_id:(null===C||void 0===C?void 0:C.financial_id)||"",rating_month:(null===K||void 0===K?void 0:K.value)||"",feedback:F||"",rating_remark:e||[]};i(c.u7.giveRatingRequest(a))})(),isDisabled:!(A&&(null===A||void 0===A?void 0:A.length)>0&&(null===A||void 0===A?void 0:A.every((e=>{var i;return null===e||void 0===e||null===(i=e.kra_sub_parameter_details)||void 0===i?void 0:i.every((e=>""!==(null===e||void 0===e?void 0:e.rating_remark)&&null!==(null===e||void 0===e?void 0:e.rating_remark)&&void 0!==(null===e||void 0===e?void 0:e.rating_remark)))}))))})})]})}}}]);
//# sourceMappingURL=8960.fc65b289.chunk.js.map