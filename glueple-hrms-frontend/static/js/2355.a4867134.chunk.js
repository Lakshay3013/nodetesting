"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[2355],{92355:(e,i,t)=>{t.r(i),t.d(i,{default:()=>p});var a=t(65043),s=t(91900),n=t(22166),d=t(94174),l=t(35685),o=t(52027),r=t(90607),c=t(92250),m=t(80728),v=t(26181),g=t(45531),u=t(49985),h=t(70579);const N=e=>{const{t:i}=(0,r.K)(),{getAllDesignation:t,setSelectedDesignation:s,isOpen:l,toggleDesignation:o,selectedDesignation:N}=e,[p,x]=(0,a.useState)({}),f=(0,n.wA)(),{addDesignationPending:D,addDesignationRes:j,addDesignationError:E}=(0,n.d4)((e=>e.designation)),{getDepartmentListPending:b,getDepartmentListRes:_,getDepartmentListError:S}=(0,n.d4)((e=>e.department)),{updateDesignationPending:A,updateDesignationRes:C,updateDesignationError:I}=(0,n.d4)((e=>e.designation)),[L,R]=(0,a.useState)([]),[y,k]=(0,a.useState)(!0),[U,w]=(0,a.useState)(""),[P,T]=(0,a.useState)({departmentId:"",designationName:"",shortName:""});(0,a.useEffect)((()=>{O()}),[]);const O=()=>{f(d.vd.getDepartmentListRequest())};(0,a.useEffect)((()=>{if(!b){if(S)return;if(_&&200===(null===_||void 0===_?void 0:_.code)){const e=null===_||void 0===_?void 0:_.data;R(e)}}}),[_,S,b]);(0,a.useEffect)((()=>{if(!D){if(E)return void f(d.EU.handleClearDesignationStore("HANDLE_CLEAR_ADD_DESIGNATION_STORE"));j&&200==(null===j||void 0===j?void 0:j.code)&&(f(d.EU.handleClearDesignationStore("HANDLE_CLEAR_ADD_DESIGNATION_STORE")),o(),t())}}),[D,j,E]);const q=e=>{p&&x({});const{name:i,value:t}=e.target;T((e=>{const a={...e,[i]:t};return"designationName"===i&&(a.shortName=(0,u.aF)(t)),a}))};return(0,a.useEffect)((()=>{T({departmentId:null===N||void 0===N?void 0:N.department_id,designationName:(null===N||void 0===N?void 0:N.name)||"",shortName:(null===N||void 0===N?void 0:N.short_name)||""}),k(null===N||void 0===N?void 0:N.is_active),w(null===N||void 0===N?void 0:N._id)}),[N]),(0,a.useEffect)((()=>{if(!A){if(I)return void f(d.EU.handleClearDesignationStore("HANDLE_CLEAR_UPDATE_DESIGNATION_STORE"));C&&200==(null===C||void 0===C?void 0:C.code)&&(f(d.EU.handleClearDesignationStore("HANDLE_CLEAR_UPDATE_DESIGNATION_STORE")),o(),t())}}),[A,C,I]),(0,a.useEffect)((()=>{0==l&&(T({departmentId:"",designationName:"",shortName:""}),s(""),x({}))}),[l]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"offcanvas offcanvas-end creatNewTicketOff "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden"},children:[(0,h.jsxs)("div",{className:"offcanvas-header",children:[(0,h.jsxs)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:[N?"Update":"Create New"," Designation"]}),(0,h.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>o()})]}),(0,h.jsx)("div",{className:"offcanvas-body",children:(0,h.jsxs)("div",{className:"formPanel",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(g.JU,{text:i("labels.selectDepartment"),required:!0})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsxs)("select",{className:"form-select",name:"departmentId",value:null===P||void 0===P?void 0:P.departmentId,onChange:e=>q(e),disabled:"",children:[(0,h.jsx)("option",{value:"",hidden:!0,selected:!0,children:"Select Department..."}),L&&(null===L||void 0===L?void 0:L.length)>0&&(null===L||void 0===L?void 0:L.map(((e,i)=>(0,h.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))))]}),(null===p||void 0===p?void 0:p.departmentId)&&(0,h.jsx)(c.eo,{text:p.departmentId})]})}),(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(g.JU,{text:i("labels.name"),required:!0})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(g.pd,{type:"text",placeholder:i("placeholders.designationName"),value:(null===P||void 0===P?void 0:P.designationName)||"",name:"designationName",onChange:e=>q(e)}),(null===p||void 0===p?void 0:p.designationName)&&(0,h.jsx)(c.eo,{text:p.designationName})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(g.JU,{text:i("labels.shortName"),required:!0})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)(g.pd,{type:"text",placeholder:i("placeholders.shortName"),value:null===P||void 0===P?void 0:P.shortName,name:"shortName",onChange:e=>q(e)}),(null===p||void 0===p?void 0:p.shortName)&&(0,h.jsx)(c.eo,{text:p.shortName})]})})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(g.JU,{text:i("labels.isActive")})})}),(0,h.jsx)("div",{className:"col-md-9",children:(0,h.jsx)("div",{className:"form-group mb-3",children:(0,h.jsx)(g.P_,{id:"is_active",checked:y,handleChange:e=>k(!y),name:"is_active"},"is_active")})})]})]})}),(0,h.jsx)("div",{className:"offcanvas-footer",children:(0,h.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,h.jsx)(c.Sv,{text:i(N?"btns.update":"btns.submit"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,v.i6)(m.Mv,P);if(e.isValid){x({});let e={department_id:null===P||void 0===P?void 0:P.departmentId,name:(null===P||void 0===P?void 0:P.designationName)||"",short_name:(null===P||void 0===P?void 0:P.shortName)||"",is_active:y};N?(e._id=U,f(d.EU.updateDesignationRequest(e))):f(d.EU.addDesignationRequest(e))}else x(e.errors)})(),isLoading:N?A:D})})})]})})},p=()=>{const{t:e}=(0,r.K)(),i=(0,n.wA)(),{getAllDesignationRes:t,getAllDesignationError:m,getAllDesignationPending:v,deleteDesignationPending:g,deleteDesignationRes:u,deleteDesignationError:p}=(0,n.d4)((e=>e.designation)),[x,f]=(0,a.useState)(""),[D,j]=(0,a.useState)(""),[E,b]=(0,a.useState)(!1),[_,S]=(0,a.useState)(!1),[A,C]=(0,a.useState)(),[I,L]=(0,a.useState)(null===o.X$||void 0===o.X$?void 0:o.X$.page);(0,a.useEffect)((()=>{y()}),[I]);const R=()=>{b(!E)},y=()=>{const e={page:I,limit:null===o.X$||void 0===o.X$?void 0:o.X$.limit};i(d.EU.getAllDesignationRequest(e))};(0,a.useEffect)((()=>{if(!v){if(m)return;t&&200==(null===t||void 0===t?void 0:t.code)&&f(null===t||void 0===t?void 0:t.data)}}),[t,m,v]);return(0,a.useEffect)((()=>{if(!g){if(p)return void i(d.EU.handleClearDesignationStore("HANDLE_CLEAR_DELETE_DESIGNATION_STORE"));var e;if(u)if(200==(null===u||void 0===u?void 0:u.code))i(d.EU.handleClearDesignationStore("HANDLE_CLEAR_DELETE_DESIGNATION_STORE")),I>1&&1===(null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.length)?L((e=>e-1)):y()}}),[u,p,g]),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:" d-flex  justify-content-end ",children:(0,h.jsx)(c.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>R(),text:e("btns.createDesignation")})}),(0,h.jsx)(s.A,{designationList:x,isLoading:v,setSelectedDesignation:j,toggleDesignation:R,onHandleDeleteModal:e=>{S(!_),C(e)},currentPage:I,setCurrentPage:L}),(0,h.jsx)(N,{getAllDesignation:y,setSelectedDesignation:j,isOpen:E,toggleDesignation:R,selectedDesignation:D}),_&&(0,h.jsx)(l.A,{onApproveReject:(e,t)=>{if(e){let e={_id:A};i(null===d.EU||void 0===d.EU?void 0:d.EU.deleteDesignationRequest(e))}S(!_)},isShow:_,desc:e("alerts.deletePopup.desc").replace("$1","Designation"),btnRightLoading:g})]})}},91900:(e,i,t)=>{t.d(i,{A:()=>m});var a=t(65043),s=(t(92250),t(34348)),n=t.n(s),d=t(49985),l=t(29829),o=t(90607),r=t(45531),c=t(70579);const m=e=>{const{t:i}=(0,o.K)(),{designationList:t,isLoading:s,setSelectedDesignation:m,toggleDesignation:v,onHandleDeleteModal:g,setCurrentPage:u,currentPage:h}=e,[N,p]=(0,a.useState)();(0,a.useEffect)((()=>{p(t)}),[t]);const x=(0,a.useMemo)((()=>({sn:(e,i)=>(0,c.jsx)("span",{children:i+1}),is_active:e=>(0,c.jsx)("span",{className:`badge ${(0,d.XN)(e.is_active?"Active":"Inactive")}`,children:e.is_active?"Active":"Inactive"}),created_at:e=>n()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,c.jsxs)("div",{className:"btn-group actionDrp",children:[(0,c.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,c.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,c.jsxs)("ul",{className:"dropdown-menu",children:[(0,c.jsx)("li",{children:(0,c.jsxs)("span",{className:"dropdown-item",onClick:()=>(m(e),void v()),children:[(0,c.jsx)(r.In,{className:"bi bi-pencil-square me-1"}),"Update"]})}),0===(null===e||void 0===e?void 0:e.emp_count)&&(0,c.jsx)("li",{children:(0,c.jsxs)("span",{className:"dropdown-item",onClick:()=>g(e._id),children:[(0,c.jsx)(r.In,{className:"bi bi-trash me-1"}),"Delete"]})})]})]})})),[m,v,g]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.Ak,{data:null===N||void 0===N?void 0:N.data,fields:[{key:"sn",label:"S.N"},{key:"department_name",label:"Department Name"},{key:"name",label:"Name"},{key:"short_name",label:"Short Name"},{key:"emp_count",label:"Total Employees"},{key:"is_active",label:"Status"},{key:"created_at",label:"Created At"},{key:"action",label:"Action"}],isLoading:s,pagination:!0,currentPage:h,setCurrentPage:u,totalPages:null===N||void 0===N?void 0:N.totalPages,tableName:"Designation",scopedSlots:x})})}}}]);
//# sourceMappingURL=2355.a4867134.chunk.js.map