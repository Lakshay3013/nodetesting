"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[1715],{54096:(e,i,n)=>{n.r(i),n.d(i,{default:()=>g});var a=n(65043),s=n(29829),l=n(56462),t=(n(53536),n(22166)),d=n(94140),r=n(85831),c=n(70579);const o=e=>{const{getGivenRatingPending:i}=(0,t.d4)((e=>e.pms)),{financialYearMonthData:n,selectedFinancialYearMonth:s,setSelectedFinancialYearMonth:o,giveRatingData:v}=e,[u,h]=(0,a.useState)("");return(0,a.useEffect)((()=>{var e,i,n;v&&h(null===v||void 0===v||null===(e=v[0])||void 0===e||null===(i=e.kra_sub_parameter_details)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.feedback)}),[v]),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"d-flex justify-content-end ",children:(0,c.jsx)("div",{style:{width:"240px"},children:(0,c.jsx)(l.A,{data:n,placeholder:"Select Month",value:s||"",handleChange:e=>o(e),name:"financialYear"})})}),i?(0,c.jsxs)("span",{children:[(0,c.jsx)(r.L,{isShow:i,size:"xl"})," "]}):(0,c.jsxs)(c.Fragment,{children:[v&&(null===v||void 0===v?void 0:v.length)>0?null===v||void 0===v?void 0:v.map(((e,i)=>{var n,a;return(0,c.jsxs)("div",{className:"listMain",children:[(0,c.jsxs)("div",{className:"headingList d-flex mb-5",children:[(0,c.jsxs)("strong",{children:[i+1,"."]}),(0,c.jsxs)("div",{className:"d-flex align-items-center ps-4",children:[(0,c.jsxs)("span",{children:["Parameter Name ",(0,c.jsx)("b",{children:null===e||void 0===e?void 0:e.parameter_name})]}),(0,c.jsxs)("span",{children:["Parameter weightage ",(0,c.jsx)("b",{children:null===e||void 0===e?void 0:e.parameter_weightage})]})]})]}),(0,c.jsx)("ul",{className:"subCategoryUl",children:(null===e||void 0===e||null===(n=e.kra_sub_parameter_details)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(a=e.kra_sub_parameter_details)||void 0===a?void 0:a.map(((e,i)=>{var n;return(0,c.jsx)("li",{children:(0,c.jsx)("div",{className:"subCategry",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-md-9 border-end",children:[(0,c.jsx)("span",{children:"Sub Category"}),(0,c.jsx)("p",{children:null===e||void 0===e?void 0:e.measurement_criteria}),(0,c.jsx)("strong",{children:"KPI Description"}),(0,c.jsx)("p",{children:null===e||void 0===e?void 0:e.key_performance_indicator})]}),"rating"===(null===e||void 0===e||null===(n=e.kra_rating_type)||void 0===n?void 0:n.toLowerCase())&&(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100 ",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("span",{children:"Rating /Total Rating"}),(0,c.jsxs)("b",{children:[null===e||void 0===e?void 0:e.rating_remark,(0,c.jsx)("span",{children:"/ 5"})]})]})})}),"target_achivement"===(null===e||void 0===e?void 0:e.kra_rating_typ)&&(0,c.jsx)("div",{className:"col-md-3",children:(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100 ",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("span",{children:"Target Achivement "}),(0,c.jsx)("b",{children:null===e||void 0===e?void 0:e.rating_remark})]})})})]})})},i)})))})]},i)})):!i&&(0,c.jsx)("span",{className:"d-flex justify-content-center",children:(0,c.jsx)(d.A,{text:"No KPI Assigned !"})}),(null===v||void 0===v?void 0:v.length)>0&&(0,c.jsxs)("div",{className:"feedBackmain",children:[(0,c.jsx)("span",{children:"Feedback"}),(0,c.jsx)("div",{className:"feedbackInner",children:(0,c.jsx)("p",{children:u})})]})]})]})};var v=n(49985),u=n(90607),h=n(94174);const g=()=>{const e=(0,t.wA)(),{t:i}=(0,u.K)(),[n,d]=(0,a.useState)(""),[r,g]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[p,N]=(0,a.useState)(""),_=(0,a.useRef)(!1),{getFinancialYearListRes:b,getFinancialYearListError:k,getFinancialYearListPending:y,getFinancialYearWiseMonthRes:R,getFinancialYearWiseMonthError:Y,getFinancialYearWiseMonthPending:F}=(0,t.d4)((e=>e.financialYear)),{getGivenRatingRes:S,getGivenRatingError:E,getGivenRatingPending:M,getAverageRatingPending:w,getAverageRatingRes:C,getAverageRatingError:P}=(0,t.d4)((e=>e.pms)),{employeeDetailsData:A}=(0,t.d4)((e=>e.employee));(0,a.useEffect)((()=>{K()}),[]);const L=[{name:"KPI List",onClickFun:e=>D(e),id:"kpiList"}],D=()=>{},K=()=>{e(h.Cm.getFinancialYearListRequest())};(0,a.useEffect)((()=>{if(!y){if(k)return;if(b&&200===(null===b||void 0===b?void 0:b.code)){const e=(0,v.O5)(null===b||void 0===b?void 0:b.data);g(e),d(null===b||void 0===b?void 0:b.data)}}}),[b,k,y]),(0,a.useEffect)((()=>{A&&r&&I({financial_id:null===r||void 0===r?void 0:r.value})}),[A,r]),(0,a.useEffect)((()=>{f&&Object.keys(f).length>0&&G()}),[f]);const G=()=>{const i={financial_id:null===r||void 0===r?void 0:r.value,employee_id:null===A||void 0===A?void 0:A.id,rating_month:null===f||void 0===f?void 0:f.value};e(h.u7.getGivenRatingRequest(i))};(0,a.useEffect)((()=>{if(!M){if(E)return;S&&200===(null===S||void 0===S?void 0:S.code)&&N(null===S||void 0===S?void 0:S.data)}}),[S,E,M]);(0,a.useEffect)((()=>{if(!w){if(P)return;C&&(null===C||void 0===C||C.code)}}),[w,C,P]);const I=i=>{e(h.Cm.getFinancialYearWiseMonthRequest(i))};return(0,a.useEffect)((()=>{if(!F){if(Y)return;if(R&&200===(null===R||void 0===R?void 0:R.code)){let e=(0,v.TX)(null===R||void 0===R?void 0:R.data);j((i=>JSON.stringify(i)===JSON.stringify(e)?i:e)),x(null===R||void 0===R?void 0:R.data)}}}),[R,Y,F]),(0,a.useEffect)((()=>{f&&Object.keys(f).length>0&&!_.current&&(_.current=!0,G())}),[f]),(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"ticketScoreSection",children:(0,c.jsxs)("div",{className:"cardBox myRequest",children:[(0,c.jsxs)("div",{className:"cardHead d-flex justify-content-between",children:[(0,c.jsxs)("h3",{children:[(0,c.jsx)("img",{src:"images/kpi-guidline.svg",alt:"",width:40,className:"me-2 fw-bold"})," ","My KPI"]}),(0,c.jsx)(l.A,{data:n,placeholder:i("placeholders.financialYear"),value:r||"",handleChange:e=>g(e),name:"financialYear"})]}),(0,c.jsx)(s.QE,{tabs:L,type:"myKRA"}),(0,c.jsx)("div",{className:"tab-content mykpiMain",children:(0,c.jsx)("div",{className:"tab-pane fade active show",id:"kpiList",children:(0,c.jsx)(o,{financialYearMonthData:m,selectedFinancialYearMonth:f,setSelectedFinancialYearMonth:j,giveRatingData:p})})})]})})})}}}]);
//# sourceMappingURL=1715.bfd3ac0a.chunk.js.map