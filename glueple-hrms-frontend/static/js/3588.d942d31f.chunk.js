"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[3588,8408],{44077:(e,s,o)=>{o.r(s),o.d(s,{default:()=>y});var a=o(65043),t=o(22166),n=o(70579);const l=e=>{let{profileImg:s}=e;const o=s||"";return(0,n.jsx)("img",{src:o||"images/profile.png",alt:"profile image"})};var i=o(1880),d=o(94174),r=o(35685),c=o(73216),u=o(78737),m=o(85831),h=o(90607),v=o(45531),g=o(26181),x=o(80728);const w=e=>{let{isShow:s,btnLeftLoading:o=!1,btnRightLoading:t=!1,btnTextLeft:l,btnTextRight:i,toggleResetPasswordModal:d}=e;const{t:r}=(0,h.K)(),[c,u]=(0,a.useState)({}),[w,p]=(0,a.useState)({currentPassword:!1,newPassword:!1,confirmPassword:!1}),[f,j]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),b=e=>{const{value:s,name:o}=e.target;j((e=>({...e,[o]:s}))),u((e=>({...e,[o]:void 0})))},N=e=>{p((s=>({...s,[e]:!s[e]})))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modal fade ",id:"",style:{display:s?"unset !important":"none !important",opacity:s?"unset":"0"},children:(0,n.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,n.jsxs)("div",{class:"modal-content rounded-1 ",children:[(0,n.jsxs)("div",{class:"modal-header ",children:[(0,n.jsx)("h1",{class:"modal-title fs-5 fw-bold text-primary",children:r("headings.changePassword")}),(0,n.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>d()})]}),(0,n.jsx)("div",{class:"modal-body pt-0",children:(0,n.jsxs)("form",{children:[(0,n.jsxs)("div",{class:"form-group password",children:[(0,n.jsx)(v.JU,{htmlFor:"current-password",className:"col-form-label text-primary fw-semibold  d-block fs-8",text:r("labels.currentPassword"),required:!0}),(0,n.jsx)(v.pd,{type:w.currentPassword?"text":"password",id:"current-password",value:null===f||void 0===f?void 0:f.currentPassword,name:"currentPassword",onChange:e=>b(e),placeholder:r("placeholders.currentPassword")}),(null===c||void 0===c?void 0:c.currentPassword)&&(0,n.jsx)(m.eo,{text:c.currentPassword}),(0,n.jsxs)("span",{className:"eyeIcon",children:[" ",(0,n.jsx)("i",{className:" fa-light fa "+(w.currentPassword?"fa-eye-slash":"fa-eye"),"aria-hidden":"true",onClick:()=>N("currentPassword")})]})]}),(0,n.jsxs)("div",{class:"form-group password",children:[(0,n.jsx)(v.JU,{htmlFor:"new-password",className:"col-form-label text-primary fw-semibold  d-block fs-8",text:r("labels.newPassword"),required:!0,autocomplete:"on"}),(0,n.jsx)(v.pd,{type:w.newPassword?"text":"password",id:"new-password",value:null===f||void 0===f?void 0:f.newPassword,name:"newPassword",onChange:e=>b(e),autocomplete:"on",placeholder:r("placeholders.newPassword")}),(null===c||void 0===c?void 0:c.newPassword)&&(0,n.jsx)(m.eo,{text:c.newPassword}),(0,n.jsxs)("span",{className:"eyeIcon",children:[" ",(0,n.jsx)("i",{className:" fa-light fa "+(w.newPassword?"fa-eye-slash":"fa-eye"),"aria-hidden":"true",onClick:()=>N("newPassword")})]})]}),(0,n.jsxs)("div",{class:"form-group password",children:[(0,n.jsx)(v.JU,{htmlFor:"confirm-password",className:"col-form-label text-primary fw-semibold  d-block fs-8",text:"Confirm Password",required:!0}),(0,n.jsx)(v.pd,{type:w.confirmPassword?"text":"password",id:"confirm-password",value:null===f||void 0===f?void 0:f.confirmPassword,name:"confirmPassword",onChange:e=>b(e),autocomplete:"on",placeholder:r("placeholders.confirmPassword")}),(null===c||void 0===c?void 0:c.confirmPassword)&&(0,n.jsx)(m.eo,{text:c.confirmPassword}),(0,n.jsxs)("span",{className:"eyeIcon",children:[" ",(0,n.jsx)("i",{className:" fa-light fa "+(w.confirmPassword?"fa-eye-slash":"fa-eye"),"aria-hidden":"true",onClick:()=>N("confirmPassword")})]})]}),(0,n.jsxs)("div",{class:"my-3 d-flex justify-content-center gap-3",children:[(0,n.jsx)(m.Sv,{classNames:"btn btn-danger",isLoading:o,text:l||r("btns.cancel"),handleClick:()=>d()}),(0,n.jsx)(m.Sv,{classNames:"btn btn-success",isLoading:t,text:i||r("btns.confirm"),handleClick:()=>(async()=>{const e=await(0,g.i6)(x.oW,f);if(e.isValid){const{currentPassword:e,newPassword:s,confirmPassword:o}=f;d({current_password:e,new_password:s,confirm_password:o})}else u(e.errors)})()})]})]})})]})})}),s&&(0,n.jsx)("div",{className:"modal-backdrop fade show"})]})},p=()=>{const e=(0,t.wA)(),s=(0,c.Zp)(),{t:o}=(0,h.K)(),{logoutPending:m,logoutRes:v,logoutError:g,resetPasswordPending:x,resetPasswordRes:p,resetPasswordError:f}=(0,t.d4)((e=>e.auth)),[j,b]=(0,a.useState)(!1),[N,P]=(0,a.useState)(!1),[y,S]=(0,a.useState)("");(0,a.useEffect)((()=>{C()}),[]);const C=async()=>{const e=await(0,u.vj)("user");S(e)};(0,a.useEffect)((()=>{if(!m){if(g)return void e(null===d.I2||void 0===d.I2?void 0:d.I2.handleClearAuthStore("HANDLE_CLEAR_LOGOUT_STORE"));v&&200===(null===v||void 0===v?void 0:v.code)&&(e(null===d.I2||void 0===d.I2?void 0:d.I2.handleClearAuthStore("HANDLE_CLEAR_LOGOUT_STORE")),localStorage.clear(),sessionStorage.clear(),i.A.remove("authtoken"),i.A.remove("authData"),b(!j),s("/login"),window.location.reload())}}),[v,g,m]);const k=s=>{s?e(d.I2.resetPasswordRequest(s)):P(!N)};return(0,a.useEffect)((()=>{if(!x){if(f)return void e(null===d.I2||void 0===d.I2?void 0:d.I2.handleClearAuthStore("HANDLE_CLEAR_RESET_PASSWORD_STORE"));p&&200===(null===p||void 0===p?void 0:p.code)&&(e(null===d.I2||void 0===d.I2?void 0:d.I2.handleClearAuthStore("HANDLE_CLEAR_RESET_PASSWORD_STORE")),k(),s("/login"))}}),[p,f,x]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:"mainHead",children:(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsxs)("div",{className:"d-flex align-items-center flex-wrap justify-content-between",children:[(0,n.jsx)("span",{href:"#",children:(0,n.jsx)("img",{src:"images/logo.png",alt:"",width:110})}),(0,n.jsxs)("div",{className:"topRightInner",children:[(0,n.jsxs)("div",{className:"searchBox",children:[(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"Search here.."}),(0,n.jsxs)("button",{type:"button",className:"searchButton",children:[" ",(0,n.jsx)("img",{src:"images/search-icon.svg",alt:"",width:30})]})]}),(0,n.jsx)("div",{className:"notficationButton",children:(0,n.jsx)("span",{href:"#",children:(0,n.jsx)("img",{src:"images/notification-icon.svg",alt:"",width:35})})}),(0,n.jsxs)("div",{className:"dropdown priofileDropdown",children:[(0,n.jsxs)("button",{className:"dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[y&&(null===y||void 0===y?void 0:y.name),(0,n.jsx)(l,{})," "]}),(0,n.jsxs)("ul",{className:"dropdown-menu",children:[(0,n.jsx)("li",{children:(0,n.jsx)("span",{className:"dropdown-item",href:"#;",children:"My Profile"})}),(0,n.jsx)("li",{children:(0,n.jsx)("span",{className:"dropdown-item",onClick:()=>k(),children:"Change Password"})}),(0,n.jsx)("li",{children:(0,n.jsx)("span",{className:"dropdown-item",onClick:()=>{b(!j)},children:"Log Out"})})]})]})]})]})})}),j&&(0,n.jsx)(r.A,{onApproveReject:s=>{s?e(null===d.I2||void 0===d.I2?void 0:d.I2.logoutRequest()):(b(!j),e(null===d.I2||void 0===d.I2?void 0:d.I2.handleClearAuthStore("HANDLE_CLEAR_LOGOUT_STORE")))},isShow:j,desc:"You want to Logout",btnRightLoading:m,btnTextRight:o("btns.logout"),btnTextLeft:o("btns.cancel")}),N&&(0,n.jsx)(w,{isShow:N,toggleResetPasswordModal:k})]})};var f=o(35475);const j=e=>{let{toggleSideBar:s,handleToggleSideBar:o}=e;const{employeeDetailsData:l}=(0,t.d4)((e=>e.employee)),[i,d]=(0,a.useState)(""),{getMenuRoutesPermissionRes:r}=((0,t.wA)(),(0,t.d4)((e=>e.permission)));(0,a.useEffect)((()=>{null!==r&&void 0!==r&&r.data&&d(null===r||void 0===r?void 0:r.data)}),[r]);return(0,n.jsx)("div",{className:s?"siderBar show":"siderBar",children:(0,n.jsxs)("div",{className:"sideMenu",id:"sideMenuDiv",children:[(0,n.jsxs)("div",{className:"sideHead",children:[(0,n.jsx)("h4",{children:"Menu"}),(0,n.jsx)("button",{type:"button",className:"toggleMenu",style:s?null:{display:"none"},onClick:()=>o(!s),children:(0,n.jsx)("img",{src:"images/menuToggle.svg",width:37})}),(0,n.jsx)("button",{type:"button",className:"menuHideToggle",style:s?{display:"none"}:null,onClick:()=>o(!s),children:(0,n.jsx)("img",{src:"images/navclose.svg",width:37})})]}),(0,n.jsx)("ul",{className:"menuList",children:i&&(null===i||void 0===i?void 0:i.length)>0&&(null===i||void 0===i?void 0:i.map(((e,s)=>{var o,a;return"menu"==(null===e||void 0===e?void 0:e.permission_type)&&((null===e||void 0===e||null===(o=e.submenu)||void 0===o?void 0:o.length)>0?(0,n.jsxs)("li",{children:[(0,n.jsxs)("a",{href:`#drop${null===e||void 0===e?void 0:e._id}`,className:"collapseTgl","data-bs-toggle":"collapse",children:[(0,n.jsx)("img",{src:`/images/${null===e||void 0===e?void 0:e.icon}`,width:19,className:"me-2"})," ",null===e||void 0===e?void 0:e.title]}),(0,n.jsx)("div",{className:"collapse",id:`drop${null===e||void 0===e?void 0:e._id}`,"data-bs-parent":"#sideMenuDiv",children:(0,n.jsx)("ul",{className:"submenuList",children:null===e||void 0===e||null===(a=e.submenu)||void 0===a?void 0:a.map(((e,s)=>(0,n.jsx)("li",{children:(0,n.jsxs)(f.N_,{to:null===e||void 0===e?void 0:e.routes,children:[(0,n.jsx)("img",{src:`/images/${null===e||void 0===e?void 0:e.icon}`,width:15,className:"me-2"}),null===e||void 0===e?void 0:e.title]})})))})})]},s):0==(null===e||void 0===e?void 0:e.submenu_count)?(0,n.jsx)("li",{children:(0,n.jsxs)(f.N_,{to:null===e||void 0===e?void 0:e.routes,children:[(0,n.jsx)("img",{src:`/images/${null===e||void 0===e?void 0:e.icon}`,width:16,className:"me-2"}),null===e||void 0===e?void 0:e.title]})},s):(0,n.jsx)(n.Fragment,{}))})))})]})})};var b=o(71783);const N=()=>{const e=(0,t.wA)(),{getCheckInCheckOutPending:s,getCheckInCheckOutRes:o,getCheckInCheckOutError:l,getCorrectionNotificationPending:i,getCorrectionNotificationRes:r,getCorrectionNotificationError:c}=(0,t.d4)((e=>e.attendanceDashboard)),[m,h]=(0,a.useState)(),[v,g]=(0,a.useState)(),[x,w]=(0,a.useState)("00:00:00"),[p,f]=(0,a.useState)("00:00:00"),[j,N]=(0,a.useState)("00:00:00"),[P,y]=(0,a.useState)(!1),[S,C]=(0,a.useState)([]),[k,R]=(0,a.useState)();(0,a.useEffect)((()=>{r&&null!==r&&void 0!==r&&r.data?R(null===r||void 0===r?void 0:r.data):e(d.Bq.getCorrectionNotificationRequest())}),[]);const E=()=>{e(d.Bq.getCheckInCheckOutRequest())};return(0,a.useEffect)((()=>{if(!s){if(l)return;var e;if(o)if(200===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.code)){var a;const e=null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.data;h(e),g(null===e||void 0===e?void 0:e.attendanceTime),C(null===e||void 0===e?void 0:e.attendanceAllLog);const{firstEntryTime:s,workHours:t,workMinutes:n,workSeconds:l,breakHours:i,breakMinutes:d,breakSeconds:r,totalBreakTime:c,totalWorkingTime:m}=null===e||void 0===e?void 0:e.attendanceTime;if(s){let e=`${t}:${n}:${l}`;f(c),N(m);const s=setInterval((()=>{e=(0,u.vC)(e,"hh:mm:ss",1,"seconds","HH:mm:ss"),w(e)}),1e3);return()=>clearInterval(s)}}}}),[o,l,s]),(0,a.useEffect)((()=>{if(!i){if(c)return;r&&200===(null===r||void 0===r?void 0:r.code)&&R(null===r||void 0===r?void 0:r.data)}}),[o,c,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"alertsSec cardBox mb-3 p-3",children:[(0,n.jsxs)("h3",{className:"fs-6 fw-regular text-orange d-flex align-items-center gap-1 mb-0 me-4",children:[(0,n.jsx)("img",{src:"images/alert.svg",alt:"",width:15}),"Alerts"]}),(0,n.jsx)("div",{className:"alertList dashboardAlrt pt-2",children:(0,n.jsx)("marquee",{dangerouslySetInnerHTML:{__html:null===k||void 0===k?void 0:k.message}})}),(0,n.jsxs)("div",{className:"timerButtonGroup d-flex gap-2",children:[(0,n.jsxs)("button",{type:"button",className:"btn btn-primary d-flex align-items-center justify-content-center gap-2",onClick:()=>(E(),void y(!P)),children:[(0,n.jsx)("img",{src:"images/timer-icon.svg",alt:"",width:"18"})," ",x]}),(0,n.jsxs)("button",{type:"button",className:"btn btn-secondary d-flex align-items-center justify-content-center gap-2",style:{color:"black"},children:[(0,n.jsx)("img",{src:"images/coffee-time.png",alt:"",width:"22"}),p]})]})]}),P&&(0,n.jsx)(b.A,{openLogModel:P,setOpenLogModel:y,attendanceAllLog:S,breakTime:p,totalWorkingHours:x,attendanceTime:v})]})};var P=o(89027);const y=()=>{const[e,s]=(0,a.useState)(!1);let o=window.location.pathname;return(0,n.jsxs)("div",{className:e?"sidebarOpen":null,children:[(0,n.jsx)(p,{}),"/onboarding"!=o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{handleToggleSideBar:()=>{s(!e)},toggleSideBar:e}),(0,n.jsxs)("div",{className:"dashboardMain",children:[(0,n.jsx)(N,{}),(0,n.jsx)(c.sv,{})]})]}):(0,n.jsx)(P.default,{})]})}}}]);
//# sourceMappingURL=3588.d942d31f.chunk.js.map