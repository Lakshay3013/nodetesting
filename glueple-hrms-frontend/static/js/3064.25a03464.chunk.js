"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[3064],{96816:(e,l,i)=>{i.d(l,{A:()=>t});i(65043);var d=i(70579);const t=()=>(0,d.jsx)("div",{children:(0,d.jsxs)("svg",{version:"1.1",id:"Layer_1",x:0,y:0,viewBox:"0 0 512 512",xmlSpace:"preserve",className:"icon icon-xlg me-2",style:{height:"23px",width:"23px",cursor:"pointer"},children:[(0,d.jsx)("circle",{id:"Oval-3",opacity:".1",fill:"#2B76D2",cx:256,cy:256,r:256}),(0,d.jsx)("path",{fill:"#2B76D2",d:"M277.3 362.7c-5.3 0-10.6-2-14.7-5.9l-85.3-81.5c-4.1-3.9-6.5-9.3-6.6-15-.1-5.7 2-11.1 5.9-15.2l85.3-89.1c8.1-8.5 21.7-8.8 30.2-.7 8.5 8.1 8.8 21.6.7 30.2l-70.6 73.7 69.9 66.8c8.5 8.1 8.8 21.6.7 30.1-4.2 4.4-9.8 6.6-15.5 6.6z"})]})})},93064:(e,l,i)=>{i.r(l),i.d(l,{default:()=>x});var d=i(65043),t=i(35475),s=i(96816),n=i(22166),o=i(56462),a=i(94174),r=i(90607),v=i(50586),c=i(85831),u=i(94140),h=i(70579);const m=e=>{let{isShow:l,openCloseModal:i}=e;return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"modal fade correctionAprovel",id:"mrfApproval",style:{display:l?"unset !important":"none !important",opacity:l?"unset":"0"},children:(0,h.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,h.jsxs)("div",{className:"modal-content rounded-0 border-0",children:[(0,h.jsxs)("div",{className:"modal-header border-0",children:[(0,h.jsx)("h1",{className:"modal-title fs-5 fw-bold text-primary",children:"Add Rule"}),(0,h.jsx)(c.Sv,{classNames:"btn-close",handleClick:()=>i("")})]}),(0,h.jsx)("div",{className:"modal-body pt-0",children:(0,h.jsx)("div",{className:"form-group mb-3"})}),(0,h.jsx)("div",{className:"modal-footer justify-content-center",children:(0,h.jsx)("button",{className:"btn btn-org-gradient text-white px-5",children:"Save"})})]})})}),l&&(0,h.jsx)("div",{className:"modal-backdrop fade show"})]})},x=()=>{const e=(0,n.wA)(),{t:l}=(0,r.K)(),{getDepartmentListRes:i,getDepartmentListError:x,getDepartmentListPending:g}=(0,n.d4)((e=>e.department)),{getDesignationsByDepartmentRes:p,getDesignationsByDepartmentPending:f,getDesignationsByDepartmentError:j}=(0,n.d4)((e=>e.designation)),{getAllTravelTypePending:_,getAllTravelTypeRes:R,getAllTravelTypeError:b,getAllTravelAndClaimRulePending:A,getAllTravelAndClaimRuleRes:y,getAllTravelAndClaimRuleError:N,assignRulePending:E,assignRuleRes:S,assignRuleError:D,getAssignRulePending:C,getAssignRuleRes:T,getAssignRuleError:w}=(0,n.d4)((e=>e.travelAndClaim)),[L,k]=(0,d.useState)([]),[B,q]=(0,d.useState)([]),[P,O]=(0,d.useState)(""),[H,U]=(0,d.useState)(""),[M,$]=(0,d.useState)(!1),[z,F]=(0,d.useState)(""),[G,I]=(0,d.useState)([]),[J,K]=(0,d.useState)(""),[Q,V]=(0,d.useState)([{key:"name",label:"Designation Name"}]);(0,d.useEffect)((()=>{if(!A){if(N)return;y&&200===(null===y||void 0===y?void 0:y.code)&&F(null===y||void 0===y?void 0:y.data)}}),[A,y,N]),(0,d.useEffect)((()=>{W(),Y(),e(a.o1.getAllTravelAndClaimRuleRequest()),X(),ie()}),[]);const W=()=>{const l=null===i||void 0===i?void 0:i.data;null!==l&&void 0!==l&&l.length?k(l):e(a.vd.getDepartmentListRequest())};(0,d.useEffect)((()=>{if(!g){if(x)return;if(i&&200===(null===i||void 0===i?void 0:i.code)){const e=null===i||void 0===i?void 0:i.data;k(e)}}}),[i,x,g]),(0,d.useEffect)((()=>{P&&X(null===P||void 0===P?void 0:P._id)}),[P]);const X=l=>{const i={department_id:l};e(a.EU.getDesignationsByDepartmentRequest(l&&i))};(0,d.useEffect)((()=>{if(!f){if(j)return;if(p&&200===(null===p||void 0===p?void 0:p.code)){const e=null===p||void 0===p?void 0:p.data;q(e)}}}),[p,j,f]);const Y=()=>{const l=null===R||void 0===R?void 0:R.data;null!==l&&void 0!==l&&l.length?U(null===R||void 0===R?void 0:R.data):e(a.o1.getAllTravelTypeRequest())};(0,d.useEffect)((()=>{if(!_){if(b)return;R&&200===(null===R||void 0===R?void 0:R.code)&&U(null===R||void 0===R?void 0:R.data)}}),[R,b,_]);const Z=(e,l,i)=>{I((d=>{let t={...d};return t[l]||(t[l]={}),t[l][`${i}`]=e,t}))};(0,d.useEffect)((()=>{J&&null!==z&&void 0!==z&&z.length&&null!==B&&void 0!==B&&B.length&&ee()}),[J,z,B]);const ee=()=>{let e={};null===B||void 0===B||B.forEach((l=>{null===J||void 0===J||J.forEach((i=>{(null===i||void 0===i?void 0:i.designation_id)===(null===l||void 0===l?void 0:l._id)&&(null===z||void 0===z||z.forEach((d=>{var t;if(null!==i&&void 0!==i&&null!==(t=i.travel_rule_ids)&&void 0!==t&&t.includes(null===d||void 0===d?void 0:d._id)){const i=`${null===d||void 0===d?void 0:d.travel_id}`;e[null===l||void 0===l?void 0:l._id]||(e[null===l||void 0===l?void 0:l._id]={}),e[null===l||void 0===l?void 0:l._id][i]||(e[null===l||void 0===l?void 0:l._id][i]=[]),e[null===l||void 0===l?void 0:l._id][i].push(d)}})))}))})),I(e)},le=l=>{e(a.o1.assignRuleRequest(l))};(0,d.useEffect)((()=>{if(!E){if(D)return void e(a.o1.handleClearTravelStore("HANDLE_CLEAR_ASSIGN_RULE_STORE"));S&&200===(null===S||void 0===S?void 0:S.code)&&e(a.o1.handleClearTravelStore("HANDLE_CLEAR_ASSIGN_RULE_STORE"))}}),[E,S,D]);const ie=l=>{e(a.o1.getAssignRuleRequest(l))};return(0,d.useEffect)((()=>{if(!C){if(w)return;T&&200===(null===T||void 0===T?void 0:T.code)&&K(null===T||void 0===T?void 0:T.data)}}),[C,T,w]),(0,h.jsxs)("div",{className:"cardBox myRequest mb-3 employeeHistory",children:[(0,h.jsxs)("div",{className:"cardHead d-flex justify-content-between",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)(t.N_,{to:"/travel-setting",children:(0,h.jsx)(s.A,{})}),(0,h.jsx)("div",{children:(0,h.jsx)("h5",{className:"mt-1",children:" Assign Travel Rules"})})]}),(0,h.jsxs)("div",{className:"d-flex gap-2 w-25 ",children:[(0,h.jsx)(v.JU,{className:"mt-2",text:l("labels.selectDepartment")}),(0,h.jsx)("div",{className:"w-75",children:(0,h.jsx)(o.A,{data:L||[],placeholder:l("placeholders.selectDepartment"),value:P,handleChange:e=>O(e)})})]})]}),(0,h.jsx)("div",{className:"table-responsive tableDiv",style:{height:"437px"},children:(0,h.jsxs)("table",{className:"table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[null===Q||void 0===Q?void 0:Q.map((e=>(0,h.jsx)("th",{children:e.label},e.key))),H&&(null===H||void 0===H?void 0:H.map((e=>(0,h.jsx)("th",{children:null===e||void 0===e?void 0:e.label},(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.label)))))]})}),(0,h.jsx)("tbody",{children:f?(0,h.jsxs)("tr",{children:[" ",(0,h.jsxs)("td",{colSpan:null===Q||void 0===Q?void 0:Q.length,children:[" ",(0,h.jsx)(c.L,{isShow:f,size:"xl"})," "]})]}):B&&B.length>0?(0,h.jsx)(h.Fragment,{children:B.map(((e,l)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("div",{style:{width:"200px"},children:null===e||void 0===e?void 0:e.label})}),H.map(((l,i)=>{var d;return(0,h.jsx)("td",{children:(0,h.jsx)("div",{style:{width:"150px"},children:(0,h.jsx)(v.tR,{optionsData:null===z||void 0===z?void 0:z.filter((e=>(null===e||void 0===e?void 0:e.travel_id)===(null===l||void 0===l?void 0:l._id))),placeholder:"Select...",values:(null===(d=G[null===e||void 0===e?void 0:e._id])||void 0===d?void 0:d[`${null===l||void 0===l?void 0:l._id}`])||[],onChange:i=>Z(i,null===e||void 0===e?void 0:e._id,null===l||void 0===l?void 0:l._id)})})},(null===l||void 0===l?void 0:l.id)||(null===l||void 0===l?void 0:l.label))}))]},(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.label))))}):!f&&(0,h.jsx)(u.A,{totalField:null===Q||void 0===Q?void 0:Q.length})})]})}),(0,h.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,h.jsx)(c.Sv,{text:l("btns.submit"),classNames:"btn btn-primary",handleClick:()=>(()=>{let e=Object.entries(G).map((e=>{let[l,i]=e;return{designation_id:l,department_id:null===P||void 0===P?void 0:P._id,details:Object.values(i).flat().map((e=>null===e||void 0===e?void 0:e._id))}}));le({rule_details:e})})(),isLoading:E})}),M&&(0,h.jsx)(m,{isShow:M,openCloseModal:e=>{$(!M)}})]})}}}]);
//# sourceMappingURL=3064.25a03464.chunk.js.map