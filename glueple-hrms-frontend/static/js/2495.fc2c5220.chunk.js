"use strict";(self.webpackChunkglueple_user=self.webpackChunkglueple_user||[]).push([[2495],{72495:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var n=t(65043),s=t(85831),d=t(22166),c=t(94174),o=t(29829),l=t(49985),i=t(86178),r=t.n(i),u=t(90607),h=t(45531),m=t(70579);const v=e=>{const{t:a}=(0,u.K)(),{allAttendanceLocks:t,isLoading:s,toggleCreateUpdateAttendanceLockModal:d,handleAttendanceLockDeleteModal:c,currentPage:i,setCurrentPage:v}=e,[k,f]=(0,n.useState)(t);(0,n.useEffect)((()=>{f(t)}),[t]);const g=(0,n.useMemo)((()=>({sn:(e,a)=>(0,m.jsx)("span",{children:a+1}),is_lock:e=>(0,m.jsx)("span",{className:`badge ${(0,l.XN)(e.is_lock?"Active":"Inactive")}`,children:e.is_lock?"Active":"Inactive"}),created_at:e=>r()(e.created_at).format("DD-MM-YYYY"),action:e=>(0,m.jsxs)("div",{className:"btn-group actionDrp",children:[(0,m.jsx)("button",{type:"button",className:"btn dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,m.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,m.jsx)("ul",{className:"dropdown-menu",children:(0,m.jsx)("li",{children:(0,m.jsxs)("span",{className:"dropdown-item",onClick:()=>{d(e)},children:[(0,m.jsx)(h.In,{className:"bi bi-pencil-square me-1"}),"Update"]})})})]})})),[d]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(o.Ak,{data:null===k||void 0===k?void 0:k.data,fields:[{key:"sn",label:"S.N"},{key:"month",label:"Month"},{key:"is_lock",label:"Is Lock"},{key:"action",label:"Action"}],isLoading:s,pagination:!0,currentPage:i,setCurrentPage:v,totalPages:null===k||void 0===k?void 0:k.totalPages,tableName:"Attendance Lock",scopedSlots:g})})};var k=t(52027),f=t(26181),g=t(80728);const x=e=>{const{attendanceLockPending:a,updateAttendanceLockPending:t}=(0,d.d4)((e=>null===e||void 0===e?void 0:e.attendanceDashboard)),{t:c}=(0,u.K)(),{selectedAttendanceLockData:o,openModel:l,handleOpenClose:i,handleCreateUpdateAttendanceLock:r}=e,[v,k]=(0,n.useState)({}),[x,p]=(0,n.useState)({month:"",is_lock:!0}),A=(e,a)=>{var t;const n=a||(null===(t=e.target)||void 0===t?void 0:t.name),{value:s,type:d,checked:c}=e.target?e.target:{value:e};p((e=>({...e,[n]:"checkbox"===d?c:s}))),k((e=>({...e,[n]:void 0})))};(0,n.useEffect)((()=>()=>{b()}),[l]),(0,n.useEffect)((()=>{o&&p({month:null===o||void 0===o?void 0:o.month,is_lock:null===o||void 0===o?void 0:o.is_lock})}),[o]);const b=()=>{p({month:"",is_lock:!0}),k({})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"offcanvas offcanvas-end  "+(l?"show":""),tabIndex:-1,style:{visibility:l?"visible":"hidden",width:"800px"},id:"interviewDetail",children:[(0,m.jsxs)("div",{className:"offcanvas-header",children:[(0,m.jsx)("h5",{className:"offcanvas-title  fs-5 fw-bold text-primary",children:c(o?"headings.updateAttendanceLock":"headings.createAttendanceLock")}),(0,m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:()=>i()})]}),(0,m.jsx)("div",{className:"offcanvas-body myRequest ",children:(0,m.jsxs)("div",{className:"formPanel",children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(h.JU,{text:c("labels.month/year"),required:!0})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsxs)("div",{className:"form-group mb-3",children:[(0,m.jsx)(h.pd,{type:"month",value:null===x||void 0===x?void 0:x.month,name:"month",onChange:e=>A(e)}),(null===v||void 0===v?void 0:v.month)&&(0,m.jsx)(s.eo,{text:v.month})]})})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(h.JU,{text:c("labels.isLock")})})}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsx)("div",{className:"form-group mb-3",children:(0,m.jsx)(h.P_,{id:"is_lock",checked:null===x||void 0===x?void 0:x.is_lock,handleChange:e=>A(e),name:"is_lock"},"is_lock")})})]})]})}),(0,m.jsx)("div",{className:"offcanvas-footer",children:(0,m.jsx)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:(0,m.jsx)(s.Sv,{text:c(o?"btns.updateLock":"btns.addLock"),classNames:"btn btn-org-gradient",handleClick:()=>(async()=>{const e=await(0,f.i6)(g.aN,x);if(e.isValid){const{month:e,is_lock:a}=x;r({month:e,is_lock:a,year:"2025"}),k({})}else k(e.errors)})(),isLoading:o?t:a})})})]}),l&&(0,m.jsx)("div",{className:"modal-backdrop fade show"})]})},p=()=>{const e=(0,d.wA)(),{t:a}=(0,u.K)(),{attendanceLockPending:t,attendanceLockRes:o,attendanceLockError:l,getAttendanceLockPending:i,getAttendanceLockRes:r,getAttendanceLockError:h,updateAttendanceLockPending:f,updateAttendanceLockRes:g,updateAttendanceLockError:p}=(0,d.d4)((e=>e.attendanceDashboard)),[A,b]=(0,n.useState)(!1),[L,N]=(0,n.useState)(""),[j,_]=(0,n.useState)(1),[C,E]=(0,n.useState)({}),D=e=>{N(e||""),b(!A)};(0,n.useEffect)((()=>{if(!t){if(l)return void e(c.Bq.handleClearAttendanceDashboardStore("HANDLE_CLEAR_ATTENDANCE_LOCK_STORE"));o&&200===(null===o||void 0===o?void 0:o.code)&&(e(c.Bq.handleClearAttendanceDashboardStore("HANDLE_CLEAR_ATTENDANCE_LOCK_STORE")),y(),b(!A))}}),[o,l,t]),(0,n.useEffect)((()=>{if(!f){if(p)return void e(c.Bq.handleClearAttendanceDashboardStore("HANDLE_CLEAR_UPDATE_ATTENDANCE_LOCK_STORE"));g&&200===(null===g||void 0===g?void 0:g.code)&&(e(c.Bq.handleClearAttendanceDashboardStore("HANDLE_CLEAR_UPDATE_ATTENDANCE_LOCK_STORE")),y(),b(!A))}}),[g,p,f]),(0,n.useEffect)((()=>{y()}),[j]);const y=()=>{const a={page:j,limit:k.X$.limit};e(c.Bq.getAttendanceLockRequest(a))};return(0,n.useEffect)((()=>{if(!i){if(h)return;if(r&&200===(null===r||void 0===r?void 0:r.code)){const e=null===r||void 0===r?void 0:r.data;E(e)}}}),[r,h,i]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"d-flex  justify-content-end ",children:(0,m.jsx)(s.Sv,{classNames:"btn btn-primary gradientBg",handleClick:()=>D(),text:a("btns.createNewAttendanceLock")})}),(0,m.jsx)(v,{toggleCreateUpdateAttendanceLockModal:D,currentPage:j,setCurrentPage:_,allAttendanceLocks:C,isLoading:i}),A&&(0,m.jsx)(x,{openModel:A,handleOpenClose:D,handleCreateUpdateAttendanceLock:a=>{L?(a._id=(null===L||void 0===L?void 0:L._id)||(null===L||void 0===L?void 0:L.id),e(c.Bq.updateAttendanceLockRequest(a))):e(c.Bq.attendanceLockRequest(a))},selectedAttendanceLockData:L})]})}}}]);
//# sourceMappingURL=2495.fc2c5220.chunk.js.map